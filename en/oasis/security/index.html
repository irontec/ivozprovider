

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Security elements &mdash; IvozProvider Oasis documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/banner.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="IvozProvider Oasis documentation" href="../index.html"/>
        <link rel="next" title="Maintenance and troubleshooting" href="../maintenance/index.html"/>
        <link rel="prev" title="User Portal" href="../userportal/index.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> IvozProvider
          

          
          </a>

          
            
            
              <div class="version">
                1.7
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Basic Concepts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../intro/index.html">Introduction to IvozProvider</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../architecture/index.html">Platform general architecture</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../operation_roles/index.html">Platform roles</a></li>
</ul>
<p class="caption"><span class="caption-text">Minimum Configuration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation/index.html">Initial Installation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../internal_calls/index.html">Making internal calls</a></li>
<li class="toctree-l1"><a class="reference internal" href="../external_incoming_calls/index.html">Receive external calls</a></li>
<li class="toctree-l1"><a class="reference internal" href="../external_outgoing_calls/index.html">Making external calls</a></li>
</ul>
<p class="caption"><span class="caption-text">Advanced Configuration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../pbx_features/index.html">PBX Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../retail/index.html">Retail Clients</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../billing_and_invoices/index.html">Billing and Invoices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../provisioning/index.html">Terminal provisioning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faxing/index.html">Virtual Fax System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userportal/index.html">User Portal</a></li>
</ul>
<p class="caption"><span class="caption-text">Security and Maintenance</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Security elements</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#firewall">Firewall</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#exposed-ports-services">Exposed ports/services</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#authorized-company-ip-ranges">Authorized company IP ranges</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#roadwarrior-users">Roadwarrior users</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#anti-flooding">Anti-flooding</a></li>
<li class="toctree-l2"><a class="reference internal" href="#concurrent-call-limit">Concurrent call limit</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../maintenance/index.html">Maintenance and troubleshooting</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">IvozProvider</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
    <li>Security elements</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/security/index.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="security-elements">
<h1>Security elements<a class="headerlink" href="#security-elements" title="Permalink to this headline">¶</a></h1>
<div class="section" id="firewall">
<h2>Firewall<a class="headerlink" href="#firewall" title="Permalink to this headline">¶</a></h2>
<p><strong>IvozProvider does not currently include a firewall</strong> but...</p>
<div class="admonition danger">
<p class="first admonition-title">Danger</p>
<p class="last">We <strong>strongly encourage any production installation to implement
a firewall</strong> to protect the platform from the wild Internet.</p>
</div>
<p>The protection method could be:</p>
<ul class="simple">
<li>Local firewall based on <a class="reference external" href="https://www.netfilter.org/">iptables</a></li>
<li>External firewall</li>
<li>Both</li>
</ul>
<div class="section" id="exposed-ports-services">
<h3>Exposed ports/services<a class="headerlink" href="#exposed-ports-services" title="Permalink to this headline">¶</a></h3>
<p>These are the <strong>ports IvozProvider needs to expose</strong> to work properly:</p>
<p><strong>SIP signalling</strong>:</p>
<ul class="simple">
<li>Port 5060 (TCP/UDP)</li>
<li>Port 5061 (TCP)</li>
<li>Port 7060 (TCP/UDP) y 7061 TCP (just in case both ProxyUsers and ProxyTrunks share IP)</li>
</ul>
<p><strong>RTP audioflow</strong>:</p>
<ul class="simple">
<li>Port range 13000-19000 UDP</li>
</ul>
<p><strong>Web portal and provisioning</strong>:</p>
<ul class="simple">
<li>Ports TCP 443, 1443 y 2443</li>
</ul>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p class="last">We recommend using <strong>iptables geoIP module</strong> to drop connections from
countries where we don&#8217;t have any users.</p>
</div>
</div>
</div>
<div class="section" id="authorized-company-ip-ranges">
<h2>Authorized company IP ranges<a class="headerlink" href="#authorized-company-ip-ranges" title="Permalink to this headline">¶</a></h2>
<p>During the Company creating process, we skipped the security mechanism that
<strong>limits the IP addresses or ranges that the company terminals can use
in their terminals</strong>.</p>
<p>This can be activated in the section <strong>Brand configuration</strong> &gt; <strong>Company</strong>:</p>
<img alt="../_images/authorized_ips2.png" class="align-center" src="../_images/authorized_ips2.png" />
<p>Rest of the users won&#8217;t be allowed to connect from another network, even if the
credentials are valid.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Once the filter has been activated you <strong>MUST</strong> add networks or
valid IP addresses, otherwise, all the calls will be rejected.</p>
</div>
<img alt="../_images/authorized_ips.png" src="../_images/authorized_ips.png" />
<p>Both IP addresses or ranges can be used, in CIDR format (IP/mask):</p>
<img alt="../_images/authorized_ips3.png" src="../_images/authorized_ips3.png" />
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">This mechanism limits the origin of the users of a company, it
doesn&#8217;t filter origin from <strong>Contract Peerings</strong>.</p>
</div>
<div class="section" id="roadwarrior-users">
<span id="id1"></span><h3>Roadwarrior users<a class="headerlink" href="#roadwarrior-users" title="Permalink to this headline">¶</a></h3>
<p>Some companies have roadwarrior users that travel often and connect from external
networks, forcing Companies to disable the IP filter security mechanism.</p>
<p>To solve this issue, there is a user option called <strong>Calls for non-granted IPs</strong>
that enables these users to call from non-granted IPs while their companies are
still protected with IP filter mechanism.</p>
<p>When users like theese call from non-granted IPs, their amount of concurrent
outgoing calls are limited to 1, 2 or 3 to avoid being a security breach.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Only calls generated by this kind of user (both internals and
externals) are counted and limited, received calls are not affected
by this setting (they are controlled with <strong>MaxCalls</strong> setting).</p>
</div>
<p>To sum up, with this feature:</p>
<ul class="simple">
<li>There are users that are allowed to make a fixed amount of calls from
non-granted IPs.</li>
<li>This calls from non-granted IPs are counted and limited.</li>
</ul>
<p class="rubric">Example 1 - Company without IP check</p>
<p>It doesn&#8217;t matter if the user is allowed to make calls from non-granted IPs,
as there are no non-granted IPs.</p>
<p class="rubric">Example 2 - Company with IP check</p>
<ul class="simple">
<li>If the user is calling from one of the allowed IPs,
it doesn&#8217;t matter if the user is allowed to make calls from non-granted IPs:
this calls are not counted nor limited.</li>
<li>If the user is NOT calling from one of the allowed IPs, it is verified the
amount of calls that this user is allowed to make. If the user is allowed to
make calls from non-granted IPs and has not exceeded his limit, the call is
granted and counted.</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If <strong>Calls for non-granted IPs</strong> is set to <em>None</em> the user must fulfill
the IP policy of his company.</p>
</div>
</div>
</div>
<div class="section" id="anti-flooding">
<h2>Anti-flooding<a class="headerlink" href="#anti-flooding" title="Permalink to this headline">¶</a></h2>
<p>IvozProvider comes with an <em>anti-flooding</em> mechanism to avoid that a single
sender can deny the platform service by sending lots of requests. Both <em>proxies</em>
(users and trunks) use this mechanism, that <strong>limits the number of requests
from an origin address in a time lapse</strong>.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">When an origin reaches this limit, the proxy will stop sending
responses for a period of time. After this time, the requests will be again
handled normally.</p>
</div>
<p>Some origins are automatically excluded from this <em>anti-flooding</em> mechanism:</p>
<ul class="simple">
<li>Application Servers from the platform.</li>
<li>Company authorized IP addresses or ranges (see previous section).</li>
</ul>
<p>Global operator of the platform can also add exceptions to this mechanism in
the section <strong>Global configuration</strong> &gt; <strong>Antiflood trusted IPs</strong>.</p>
<img alt="../_images/trusted_ips.png" src="../_images/trusted_ips.png" />
</div>
<div class="section" id="concurrent-call-limit">
<h2>Concurrent call limit<a class="headerlink" href="#concurrent-call-limit" title="Permalink to this headline">¶</a></h2>
<p>This mechanism limits the number of concurrent external calls for a company/retail account. It can also be configured
at brand level.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Brand and company/retail limits are not related anyhow. The one that is reached first will prevent new calls.</p>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">To disable this mechanism, set its value to 0.</p>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../maintenance/index.html" class="btn btn-neutral float-right" title="Maintenance and troubleshooting" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../userportal/index.html" class="btn btn-neutral" title="User Portal" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016-2017, Irontec.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
        <span class="fa fa-book"> Other Versions</span>
        v: oasis
        <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
        <dl>
            <dt>Branches</dt>
            <dd><a href="../../artemis/index.html">artemis</a></dd>
            <dd><a href="../../halliday/index.html">halliday</a></dd>
            <dd><a href="../../main/index.html">main</a></dd>
            <dd><a href="index.html">oasis</a></dd>
            <dd><a href="../../tempest/index.html">tempest</a></dd>
        </dl>
    </div>
</div>


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'Oasis',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>