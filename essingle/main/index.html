

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>documentación de IvozProvider - tempest</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="_static/banner.css" type="text/css" />
  

  
        <link rel="index" title="Índice"
              href="genindex.html"/>
        <link rel="search" title="Búsqueda" href="search.html"/>
    <link rel="top" title="None" href="index.html#document-index"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html#document-index" class="icon icon-home"> IvozProvider
          

          
          </a>

          
            
            
              <div class="version">
                4.6
              </div>
            
          

          

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Basic Concepts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-basic_concepts/intro/index">Introducción a IvozProvider</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-basic_concepts/architecture/index">Arquitectura general de la plataforma</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-basic_concepts/installation/index">Instalación inicial</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-basic_concepts/operation_roles/index">Roles de la plataforma</a></li>
</ul>
<p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-getting_started/internal_calls/index">Realizando llamadas internas</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-getting_started/external_incoming_calls/index">Recibiendo llamadas externas</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-getting_started/external_outgoing_calls/index">Realizando llamadas externas</a></li>
</ul>
<p class="caption"><span class="caption-text">Administration portal</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-administration_portal/platform/index">Configuración de la Plataforma</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-administration_portal/brand/index">Configuración de Marca</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-administration_portal/client/index">Configuración del Cliente</a></li>
</ul>
<p class="caption"><span class="caption-text">Specific portals</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-user_portal/index">Portal de Usuario</a></li>
</ul>
<p class="caption"><span class="caption-text">Security and Maintenance</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-security_and_maintenance/security/index">Seguridad</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-security_and_maintenance/maintenance/index">Solución de problemas</a></li>
</ul>
<p class="caption"><span class="caption-text">Rest API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-api_rest/introduction">Introducción a la API de IvozProvider</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-api_rest/multilevel">API multinivel</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-api_rest/web_client">Cliente web incorporado</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-api_rest/integrations">Integraciones de terceros</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-api_rest/use_case">Caso de Uso</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-api_rest/acls">ACLs</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html#document-index">IvozProvider</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html#document-index">Docs</a> &raquo;</li>
      
    <li>documentación de IvozProvider - tempest</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="ivozprovider-official-documentation">
<h1>Documentación Oficial de IvozProvider<a class="headerlink" href="#ivozprovider-official-documentation" title="Enlazar permanentemente con este título">¶</a></h1>
<div class="toctree-wrapper compound">
<span id="document-basic_concepts/intro/index"></span><div class="section" id="introduction-to-ivozprovider">
<h2>Introducción a IvozProvider<a class="headerlink" href="#introduction-to-ivozprovider" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Las siguientes secciones servirán como introducción general a IvozProvider:</p>
<div class="toctree-wrapper compound">
<span id="document-basic_concepts/intro/about"></span><div class="section" id="about-this-documentation">
<h3>Acerca de esta documentación<a class="headerlink" href="#about-this-documentation" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Esta documentación describe el proceso de instalación y uso de IvozProvider, la plataforma de telefonía multiinquilino para proveedores desarrollada por <a class="reference external" href="http://irontec.com">Irontec</a>.</p>
<p>Este debería ser el punto de partida para cualquier persona interesada en esta solución, tanto desde el punto de vista técnico como del usuario y está dividido en múltiples secciones desde la información y configuración básica de la infraestructura hasta la configuración del usuario final.</p>
</div>
<span id="document-basic_concepts/intro/getting_help"></span><div class="section" id="getting-help">
<span id="id1"></span><h3>Obteniendo ayuda<a class="headerlink" href="#getting-help" title="Enlazar permanentemente con este título">¶</a></h3>
<p>IvozProvider es un proyecto vivo y altamente desarrollado. Hay múltiples canales para obtener información o reportar errores.</p>
<p>En orden de preferencia:</p>
<ul class="simple">
<li>GitHub: <a class="reference external" href="https://github.com/irontec/ivozprovider">https://github.com/irontec/ivozprovider</a></li>
<li><p class="first">Canal IRC <a class="reference external" href="https://kiwiirc.com/nextclient/irc.libera.chat/#ivozprovider">#ivozprovider</a> en irc.libera.chat</p>
</li>
<li><p class="first">correo electrónico: <a class="reference external" href="mailto:vozip+ivozprovider&#37;&#52;&#48;irontec&#46;com">vozip+ivozprovider<span>&#64;</span>irontec<span>&#46;</span>com</a></p>
</li>
<li>Twitter: <a class="reference external" href="https://twitter.com/irontec">&#64;irontec</a></li>
</ul>
<p>No dude en contactarnos para cualquier tipo de comentario :)</p>
</div>
<span id="document-basic_concepts/intro/what_is_ivozprovider"></span><div class="section" id="what-is-ivozprovider">
<h3>¿Qué es IvozProvider?<a class="headerlink" href="#what-is-ivozprovider" title="Enlazar permanentemente con este título">¶</a></h3>
<p>IvozProvider es una solución de <a class="reference internal" href="#voip"><span class="std std-ref">telefonía IP</span></a> <a class="reference internal" href="#multilevel"><span class="std std-ref">multinivel</span></a> <a class="reference internal" href="#operator-oriented"><span class="std std-ref">orientada al proveedor</span></a> <a class="reference internal" href="#exposed"><span class="std std-ref">expuesta a la red pública</span></a>.</p>
<div class="section" id="ip-telephony">
<span id="voip"></span><h4>Telefonía IP<a class="headerlink" href="#ip-telephony" title="Enlazar permanentemente con este título">¶</a></h4>
<p>IvozProvider soporta sistemas de telefonía que utilizan el <em>Protocolo de Inicio de Sesión</em>, <strong>SIP</strong>, descrito en el <a class="reference external" href="https://tools.ietf.org/html/rfc3261">RFC 3261</a> y cualquier <a class="reference external" href="https://www.packetizer.com/ipmc/sip/standards.html">RFC relacionado</a> independiente de los fabricantes.</p>
<p>Esto permite total libertad para elegir <em>softphones</em>, <em>hardphones</em> y el resto de elementos que interactúan con IvozProvider, sin ningún tipo de vinculación con un fabricante.</p>
<p>En este momento, IvozProvider soporta los siguientes <strong>protocolos de transporte</strong> para SIP:</p>
<blockquote>
<div><ul class="simple">
<li>UDP</li>
<li>TCP</li>
<li>TLS</li>
<li>Websockets</li>
</ul>
</div></blockquote>
<p>Este último protocolo de transporte descrito en el <a class="reference external" href="https://tools.ietf.org/html/rfc7118">RFC 7118</a> soporta softphones integrados en la web, utilizando el estándar <a class="reference external" href="https://webrtc.org/">WebRTC</a> que permite a los navegadores establecer conexiones <em>peer-to-peer</em> en tiempo real.</p>
<p>La lista de <strong>códecs de audio soportados</strong> es:</p>
<blockquote>
<div><ul class="simple">
<li>PCMA (<em>alaw</em>)</li>
<li>PCMU (<em>ulaw</em>)</li>
<li>GSM</li>
<li>SpeeX</li>
<li>G.722</li>
<li>G.726</li>
<li><p class="first">G.729 (se requiere instalación manual)</p>
</li>
<li>iLBC</li>
<li><a class="reference external" href="http://opus-codec.org/">OPUS</a></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="multilevel">
<span id="id1"></span><h4>Multinivel<a class="headerlink" href="#multilevel" title="Enlazar permanentemente con este título">¶</a></h4>
<p>El diseño del portal web de IvozProvider permite <strong>múltiples actores dentro de la misma infraestructura</strong>:</p>
<img alt="_images/operator_levels1.png" src="_images/operator_levels1.png" />
<p>En la sección <a class="reference internal" href="index.html#operation-roles"><span class="std std-ref">Roles de la plataforma</span></a>, se describen en profundidad los diferentes roles, pero para resumir:</p>
<ul class="simple">
<li><p class="first"><strong>God Admin</strong>: El administrador y mantenedor de la solución. Proporciona acceso a múltiples operadores de marca.</p>
</li>
<li><p class="first"><strong>Brand Operator</strong>: Responsable de configurar el enrutamiento de operadores, la facturación y la emisión de facturas a múltiples clientes.</p>
</li>
<li><p class="first"><strong>Client Operator</strong>: Responsable de su propia configuración y de gestionar los usuarios finales de la plataforma.</p>
</li>
<li><p class="first"><strong>Usuarios</strong>: El último eslabón de la cadena, tiene credenciales SIP y puede acceder a su propio portal para configuraciones personalizadas. Este nivel sólo está disponible para tipos de clientes vPBX.</p>
</li>
</ul>
<p><strong>Cada uno</strong> de estos roles <strong>tiene su propio portal</strong> que les permite cumplir con sus tareas. Cada portal puede ser personalizado de las siguientes maneras:</p>
<ul class="simple">
<li><p class="first">Temas y <em>skins</em> para colores corporativos.</p>
</li>
<li><p class="first">Logos de clientes.</p>
</li>
<li><p class="first">URLs personalizadas con el dominio de la Marca o del Cliente.</p>
</li>
</ul>
</div>
<div class="section" id="provider-oriented">
<span id="operator-oriented"></span><h4>Orientado al proveedor<a class="headerlink" href="#provider-oriented" title="Enlazar permanentemente con este título">¶</a></h4>
<p>IvozProvider es una solución de telefonía <strong>diseñada con la escalabilidad horizontal en mente</strong>. Esto permite manejar una gran cantidad de <strong>tráfico y usuarios</strong> simplemente aumentando las máquinas y los recursos de las mismas.</p>
<p>Estas son las ideas principales que hacen que este producto esté orientado al proveedor:</p>
<ul>
<li><p class="first">A pesar de que todos los perfiles de máquina pueden ejecutarse en el mismo host, lo que facilita las pruebas iniciales, cada perfil de IvozProvider puede separarse del resto para ejecutarse en su propia máquina.</p>
</li>
<li><p class="first">Una <strong>instalación distribuida</strong> permite distribuir la cantidad correcta de recursos a cada tarea, pero también:</p>
<blockquote>
<div><ul class="simple">
<li><p class="first">Distribución geográfica de elementos para garantizar alta disponibilidad en caso de fallo del CPD.</p>
</li>
<li><p class="first">Configuración de elementos clave cerca de los usuarios finales, para minimizar las latencias de comunicación.</p>
</li>
<li><p class="first">Escalabilidad horizontal de perfiles clave para manejar cientos de miles de llamadas concurrentes.</p>
</li>
</ul>
</div></blockquote>
</li>
</ul>
<p>Los elementos que consumen recursos y que limitan el servicio de las soluciones VoIP suelen ser:</p>
<ul class="simple">
<li><p class="first">Gestión de audio de llamadas ya establecidas.</p>
</li>
<li><p class="first">Gestión de la configuración para cada administrador de cliente (IVRs, salas de conferencias, filtros de llamadas externas, etc.)</p>
</li>
<li><p class="first">Bases de datos de configuración y registros.</p>
</li>
</ul>
<p>IvozProvider fue diseñado siempre teniendo en cuenta la <strong>escalabilidad horizontal</strong> de cada uno de sus elementos, por lo que <strong>puede manejar miles de llamadas concurrentes</strong> y lo que es más importante, <strong>adaptar los recursos de la plataforma a la calidad de servicio esperada</strong>:</p>
<ul>
<li><p class="first">Los servidores de <strong>Media-relay</strong> manejan los marcos de audio para las llamadas ya establecidas:</p>
<blockquote>
<div><ul class="simple">
<li><p class="first">Puede usar tantos media-relays como necesite.</p>
</li>
<li><p class="first">Puede unir media-relays en grupos y obligar a algunos clientes a usar un grupo si lo desea.</p>
</li>
<li><p class="first">Puede configurar media-relays cerca de los usuarios finales, para minimizar las latencias de red en las llamadas.</p>
</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">Los <strong>servidores de aplicaciones</strong> son los encargados de procesar la lógica configurada:</p>
<blockquote>
<div><ul class="simple">
<li><p class="first">Escalan horizontalmente: se pueden instalar nuevos servidores de aplicaciones y agregarlos al grupo si lo considera necesario.</p>
</li>
<li><p class="first">Cada llamada es manejada por el servidor de aplicaciones menos ocupado</p>
</li>
<li><p class="first">Por defecto, no hay asignación estática * entre Clientes y Servidores de Aplicaciones. De esta manera, la falla de cualquier Servidor de Aplicaciones no es crítica: la plataforma ignorará el Servidor de Aplicaciones defectuoso mientras distribuye las llamadas.</p>
</li>
</ul>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="exposed-to-the-public-network">
<span id="exposed"></span><h4>Expuesto a la red pública<a class="headerlink" href="#exposed-to-the-public-network" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Como se muestra en el proceso de instalación, <strong>IvozProvider está diseñado para servir a los usuarios directamente desde Internet</strong>. Aunque se puede utilizar en entornos locales, IvozProvider está diseñado para utilizar direcciones IP públicas para sus servicios, eliminando la necesidad de túneles VPN o IPSec que conecten la infraestructura con los usuarios finales.</p>
<p>Aspectos destacados:</p>
<ul class="simple">
<li><p class="first">Solo los servicios requeridos estarán expuestos a Internet.</p>
</li>
<li><p class="first">El acceso desde orígenes no confiables puede ser filtrado por el firewall integrado</p>
</li>
<li><p class="first">El acceso desde direcciones IP o redes puede ser filtrado para evitar cualquier tipo de phishing.</p>
</li>
<li><p class="first">También hay un mecanismo anti-flood para evitar ataques de Denegación de Servicio de corta duración.</p>
</li>
<li><p class="first">Cada cliente puede tener un número limitado de llamadas concurrentes.</p>
</li>
<li><p class="first">IvozProvider soporta la conexión desde terminales detrás de <a class="reference external" href="https://en.wikipedia.org/wiki/Network_address_translation">NAT</a>.</p>
</li>
<li><p class="first">IvozProvider realiza un seguimiento de esas ventanas NAT y las mantiene activas con mecanismos de <em>nat-piercing</em>.</p>
</li>
</ul>
<table class="docutils footnote" frame="void" id="id2" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[*]</td><td><p class="first last">El administrador global puede asignar Servidores de Aplicaciones a algunos tipos de clientes, pero esta característica está más diseñada como una medida temporal de depuración y solución de problemas.</p>
</td></tr>
</tbody>
</table>
</div>
</div>
<span id="document-basic_concepts/intro/what_is_inside"></span><div class="section" id="what-is-inside-ivozprovider">
<h3>¿Qué hay dentro de IvozProvider?<a class="headerlink" href="#what-is-inside-ivozprovider" title="Enlazar permanentemente con este título">¶</a></h3>
<p>IvozProvider utiliza proyectos de <a class="reference external" href="https://www.gnu.org/philosophy/free-sw.en.html">Software Libre</a> bien conocidos y estables para cumplir con las diferentes tareas requeridas de la plataforma.</p>
<p>Nada mejor que una imagen para mostrar todo el software que está integrado en IvozProvider:</p>
<img alt="_images/ivozprovider_logos.png" class="align-center" src="_images/ivozprovider_logos.png" />
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">No podemos enfatizar lo suficiente nuestra gratitud a los desarrolladores y comunidades de estos proyectos.</p>
</div>
<p>La tarea de cada uno de estos programas se detallará en profundidad en el bloque <a class="reference internal" href="index.html#architecture"><span class="std std-ref">Arquitectura general de la plataforma</span></a>.</p>
</div>
<span id="document-basic_concepts/intro/use_cases"></span><div class="section" id="who-should-use-ivozprovider">
<h3>¿Quién debería usar IvozProvider?<a class="headerlink" href="#who-should-use-ivozprovider" title="Enlazar permanentemente con este título">¶</a></h3>
<p>IvozProvider es una buena opción para aquellos interesados en tener una plataforma de telefonía que pueda proporcionar servicio a <strong>miles de llamadas concurrentes</strong>.</p>
<p>Las mayores fortalezas de IvozProvider pueden ayudar a decidir si la solución cumple con sus necesidades:</p>
<ul class="simple">
<li>VoIP: SIP</li>
<li><p class="first">Multinivel, multiinquilino</p>
</li>
<li><p class="first">Escalabilidad horizontal</p>
</li>
<li><p class="first">PseudoSBC: abierto a Internet</p>
</li>
<li><p class="first">Motores de facturación e invoicing integrados</p>
</li>
<li><p class="first">Características de PBX</p>
</li>
</ul>
<p>El proceso de instalación es tan simple, que la mejor manera de probar si IvozProvider cumple con sus necesidades es probarlo!</p>
</div>
</div>
</div>
<span id="document-basic_concepts/architecture/index"></span><div class="section" id="platform-general-architecture">
<span id="architecture"></span><h2>Arquitectura general de la plataforma<a class="headerlink" href="#platform-general-architecture" title="Enlazar permanentemente con este título">¶</a></h2>
<div class="section" id="general-diagram">
<h3>Diagrama general<a class="headerlink" href="#general-diagram" title="Enlazar permanentemente con este título">¶</a></h3>
<p>El siguiente diagrama muestra la arquitectura global de la solución IvozProvider, con todos sus componentes:</p>
<img alt="_images/flows1.png" src="_images/flows1.png" />
<p>Este es un diagrama más conceptual:</p>
<img alt="_images/conceptual1.png" src="_images/conceptual1.png" />
</div>
<div class="section" id="sip-signalling-flow">
<span id="signallingflow"></span><h3>Flujo de señalización SIP<a class="headerlink" href="#sip-signalling-flow" title="Enlazar permanentemente con este título">¶</a></h3>
<p>El primer diagrama muestra el tráfico de señalización SIP involucrado en el establecimiento, modificación y terminación de sesiones siguiendo el SIP <a class="reference external" href="https://tools.ietf.org/html/rfc3261">RFC 3261</a> y cualquier <a class="reference external" href="https://www.packetizer.com/ipmc/sip/standards.html">RFC relacionado</a>.</p>
<p>Estas son las <strong>entidades SIP externas</strong> involucradas:</p>
<ul class="simple">
<li><p class="first">UACs: teléfonos fijos de usuarios, softphones, dispositivos compatibles con SIP.</p>
</li>
<li><p class="first">Operadores SIP/Proveedores DDI: operadores utilizados para interconectar IvozProvider con redes SIP externas (y, probablemente, con PSTN).</p>
</li>
</ul>
<p>Todo el tráfico SIP (en cualquiera de los transportes soportados: TCP, UDP, TLS, WSS) que envían/reciben es hacia/desde estas dos <strong>entidades SIP internas</strong> de IvozProvider:</p>
<ul class="simple">
<li><p class="first">Proxy SIP de Usuarios (ejecutando <a class="reference external" href="https://www.kamailio.org">Kamailio</a>).</p>
</li>
<li><p class="first">Proxy SIP de Trunks (ejecutando <a class="reference external" href="https://www.kamailio.org">Kamailio</a>).</p>
</li>
</ul>
<dl class="docutils">
<dt>De hecho, los UACs de usuarios solo hablan con el <em>Proxy SIP de Usuarios</em> y los &#8216;Operadores SIP&#8217; y &#8216;Proveedores DDI&#8217;.</dt>
<dd><p class="first last">Los Proveedores solo hablan con el <em>Proxy SIP de Trunks</em>.</p>
</dd>
</dl>
<p>Dentro de IvozProvider, estos dos proxies pueden hablar con <em>Servidores de Aplicaciones</em> ejecutando <a class="reference external" href="http://www.asterisk.org/">Asterisk</a> para algunos tipos de clientes, pero <strong>no se permite que ningún elemento externo hable directamente con los Servidores de Aplicaciones</strong>.</p>
</div>
<div class="section" id="rtp-audio-flow">
<span id="audioflow"></span><h3>Flujo de audio RTP<a class="headerlink" href="#rtp-audio-flow" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Las sesiones iniciadas por el protocolo de señalización SIP implican flujos de medios compartidos por las entidades involucradas.</p>
<p>Estos flujos de medios utilizan <a class="reference external" href="https://tools.ietf.org/html/rfc3550">RTP</a> para enviar y recibir los medios en sí, generalmente utilizando UDP como protocolo de transporte.</p>
<p><strong>Entidades externas</strong> involucradas en sesiones RTP se pueden dividir en:</p>
<ul class="simple">
<li><p class="first">Puntos finales de clientes.</p>
</li>
<li><p class="first">Operadores/Proveedores DDI.</p>
</li>
</ul>
<p>Ambas entidades intercambian RTP con la misma entidad de IvozProvider: <em>media-relays</em>.</p>
<p>IvozProvider implementa <em>media-relays</em> utilizando <a class="reference external" href="https://github.com/sipwise/rtpengine">RTPengine</a>.</p>
<p>Similar al SIP, estos <em>media-relays</em> intercambian RTP cuando es necesario con <em>Servidores de Aplicaciones</em>, pero <strong>las entidades externas nunca hablan directamente con ellos</strong>.</p>
</div>
<div class="section" id="https-traffic">
<h3>Tráfico HTTPS<a class="headerlink" href="#https-traffic" title="Enlazar permanentemente con este título">¶</a></h3>
<p>HTTPS es el tercer tipo de tráfico intercambiado entre IvozProvider y el <em>mundo exterior</em>.</p>
<p>El tráfico HTTPS se utiliza para:</p>
<ul>
<li><p class="first"><strong>Provisionamiento de terminales</strong>: varios teléfonos fijos solicitan su configuración cuando se encienden y estos archivos de configuración se pueden servir a través de HTTPS.</p>
</li>
<li><p class="first"><strong>Portales web</strong>: IvozProvider tiene portales web de 4 niveles para todos los <a class="reference internal" href="index.html#operation-roles"><span class="std std-ref">roles de la plataforma</span></a>.</p>
<p>Ambos tipos de tráfico son manejados por la entidad <em>Portales web</em> de IvozProvider.</p>
</li>
</ul>
</div>
<div class="section" id="additional-elements">
<h3>Elementos adicionales<a class="headerlink" href="#additional-elements" title="Enlazar permanentemente con este título">¶</a></h3>
<p>IvozProvider tiene múltiples elementos que no están expuestos al <em>mundo exterior</em> pero desempeñan una tarea crucial.</p>
<p>El perfil más notable es el <strong>perfil de base de datos</strong> que recopila toda la información de la plataforma y la comparte entre la mayoría del software empaquetado. IvozProvider utiliza el <a class="reference external" href="https://www.mysql.com/">motor de base de datos MySQL</a> para esta tarea.</p>
<p>Otra tarea notable es el <strong>manejador de tareas asincrónicas</strong> encargado de codificar grabaciones, generar facturas, recargar servicios, importar datos, etc.</p>
</div>
<div class="section" id="auxiliary-elements">
<h3>Elementos auxiliares<a class="headerlink" href="#auxiliary-elements" title="Enlazar permanentemente con este título">¶</a></h3>
<p>El <strong>perfil Aux</strong> ejecuta software que, aunque no es vital para la realización de llamadas, hace la vida del mantenedor de IvozProvider mucho más fácil.</p>
<p>De hecho, sin ellos, la depuración de problemas sería mucho más difícil y la calidad del servicio prestado se vería afectada.</p>
<p>Aunque IvozProvider no incluye ninguna de las herramientas mencionadas aquí, las consideramos cruciales para tratar con entornos de producción.</p>
<p>Aquí enumeramos las herramientas configuradas en todas las instalaciones de IvozProvider en producción mantenidas por <a class="reference external" href="https://www.irontec.com">Irontec</a>:</p>
<ul class="simple">
<li><p class="first"><strong>Captura SIP de Homer</strong>: Este increíble software nos permite capturar todo el tráfico SIP para su posterior análisis, para obtener estadísticas, medir la calidad de las llamadas, etc. Visita el <a class="reference external" href="http://sipcapture.org/">sitio web de SIP Capture</a> para más información.</p>
</li>
<li><p class="first"><strong>Visor de logs de Kibana</strong>: Mostrando logs recopilados por los restantes <a class="reference external" href="https://www.elastic.co/elk-stack">componentes de la pila ELK</a>.</p>
</li>
<li><p class="first"><strong>Visor de métricas de Chronograf</strong>: Mostrando métricas recopiladas por los restantes <a class="reference external" href="https://www.influxdata.com/time-series-platform/">componentes de la pila TICK</a>.</p>
</li>
</ul>
</div>
</div>
<span id="document-basic_concepts/installation/index"></span><div class="section" id="initial-installation">
<h2>Instalación inicial<a class="headerlink" href="#initial-installation" title="Enlazar permanentemente con este título">¶</a></h2>
<div class="toctree-wrapper compound">
<span id="document-basic_concepts/installation/install_types"></span><div class="section" id="installation-types">
<h3>Tipos de instalación<a class="headerlink" href="#installation-types" title="Enlazar permanentemente con este título">¶</a></h3>
<div class="section" id="instalacion-distribuida">
<span id="distributed-install"></span><span id="id1"></span><h4>Instalación distribuida<a class="headerlink" href="#instalacion-distribuida" title="Enlazar permanentemente con este título">¶</a></h4>
<p>El software de IvozProvider está diseñado para ejecutarse distribuido entre múltiples sistemas en lo que llamamos perfiles:</p>
<p>Cada perfil se encarga de realizar una de las funciones de la plataforma:</p>
<blockquote>
<div><ul class="simple">
<li><p class="first">Almacenamiento de datos</p>
</li>
<li><p class="first">Proxy SIP</p>
</li>
<li><p class="first">Servidor de aplicaciones</p>
</li>
<li><p class="first">Portal web</p>
</li>
</ul>
</div></blockquote>
<p>Para cada uno de estos perfiles, hay un paquete virtual que instalará todas las dependencias requeridas (ver <a class="reference internal" href="index.html#installing-profile-package"><span class="std std-ref">Instalación del paquete de perfil</span></a>).</p>
<p>Puede instalar tantas instancias como desee para cada perfil, pero tenga en cuenta que, mientras que algunos de ellos están diseñados para escalar horizontalmente (por ejemplo: asterisk o media-relays), otros requerirán software adicional para que los sistemas que tienen el mismo perfil estén sincronizados (por ejemplo: replicación de bases de datos o balanceo de solicitudes http).</p>
</div>
<div class="section" id="instalacion-standalone">
<span id="standalone-install"></span><span id="id2"></span><h4>Instalación StandAlone<a class="headerlink" href="#instalacion-standalone" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Si desea una instalación pequeña para realizar un par de pruebas o proporcionar un servicio básico, hemos diseñado toda esta configuración para que puedan funcionar en una sola máquina.</p>
<p>Hemos llamado a este tipo de instalaciones <strong>StandAlone</strong> y también hemos creado <a class="reference internal" href="index.html#automatic-iso-cd-image"><span class="std std-ref">Imagen ISO CD automática</span></a> para que pueda instalar en un par de minutos.</p>
</div>
</div>
<span id="document-basic_concepts/installation/requirements"></span><div class="section" id="requisitos-minimos">
<span id="minimum-requirements"></span><span id="id1"></span><h3>Requisitos mínimos<a class="headerlink" href="#requisitos-minimos" title="Enlazar permanentemente con este título">¶</a></h3>
<div class="section" id="system-requirements">
<h4>Requisitos del sistema<a class="headerlink" href="#system-requirements" title="Enlazar permanentemente con este título">¶</a></h4>
<p>IvozProvider está diseñado para ser instalado utilizando el sistema de paquetes APT de Debian GNU/Linux.</p>
<div class="admonition important">
<p class="first admonition-title">Importante</p>
<p class="last">Se recomienda instalar IvozProvider en un servidor dedicado para la plataforma. Muchos de los programas instalados pueden no funcionar correctamente con otros servicios preinstalados (como servidores MySQL o DNS).</p>
</div>
<p>Para una instalación StandAlone, recomendamos al menos:</p>
<blockquote>
<div><ul class="simple">
<li><p class="first">4 CPUs (x86_64 o i386)</p>
</li>
<li><p class="first">4 Gb de memoria</p>
</li>
<li><p class="first">30GB de HDD</p>
</li>
<li><p class="first">1/2 direcciones IP públicas (leer nota detrás)</p>
</li>
</ul>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Es posible que tanto KamUsers como KamTrunks compartan una única dirección IP pública. Si es así, <strong>los puertos de KamTrunks se cambiarán de 5060 (TCP/UDP) a 7060 (TCP/UDP) y de 5061 (TCP) a 7061 (TCP)</strong>.</p>
</div>
<p>Si no está utilizando una <a class="reference internal" href="index.html#automatic-iso-cd-image"><span class="std std-ref">Imagen ISO CD automática</span></a>, también necesitará:</p>
<blockquote>
<div><ul class="simple">
<li><p class="first">Instalación base de Debian Bookworm 12.0</p>
</li>
<li><p class="first">Acceso a Internet</p>
</li>
</ul>
</div></blockquote>
</div>
</div>
<span id="document-basic_concepts/installation/debian_install"></span><div class="section" id="debian-packages-install">
<h3>Instalación de paquetes Debian<a class="headerlink" href="#debian-packages-install" title="Enlazar permanentemente con este título">¶</a></h3>
<p>IvozProvider está diseñado para ser instalado y actualizado utilizando paquetes Debian. Más exactamente, la versión actual está lista para ser instalada en <a class="reference external" href="https://www.debian.org/releases/bookworm">Debian Bookworm 12</a>.</p>
<p>Se recomienda utilizar una de las <a class="reference external" href="https://www.debian.org/releases/bookworm/installmanual">guías de instalación oficiales</a> para instalar el sistema base mínimo. El resto de las dependencias requeridas se instalarán automáticamente con los metapaquetes de IvozProvider.</p>
<p>No importa si está instalando una <a class="reference internal" href="index.html#instalacion-standalone"><span class="std std-ref">Instalación StandAlone</span></a> o una <a class="reference internal" href="index.html#instalacion-distribuida"><span class="std std-ref">Instalación distribuida</span></a>, es necesario configurar los repositorios debian de Irontec.</p>
<div class="section" id="apt-repository-configuration">
<h4>Configuración del repositorio APT<a class="headerlink" href="#apt-repository-configuration" title="Enlazar permanentemente con este título">¶</a></h4>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">cd /etc/apt/sources.list.d</span>
<span class="go">echo deb http://packages.irontec.com/debian tempest main extra &gt; ivozprovider.list</span>
</pre></div>
</div>
<p>Opcionalmente, podemos agregar la clave del repositorio para verificar los paquetes firmados:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">wget http://packages.irontec.com/public.key -q -O /etc/apt/trusted.gpg.d/irontec-debian-repository.asc</span>
</pre></div>
</div>
</div>
<div class="section" id="instalar-el-paquete-del-rol">
<span id="installing-profile-package"></span><span id="id1"></span><h4>Instalación del paquete de perfil<a class="headerlink" href="#instalar-el-paquete-del-rol" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Una vez configurados los repositorios, será necesario seleccionar el metapaquete adecuado según el tipo de instalación.</p>
<ul class="simple">
<li><dl class="first docutils">
<dt>Para una <a class="reference internal" href="index.html#instalacion-standalone"><span class="std std-ref">Instalación StandAlone</span></a>:</dt>
<dd><ul class="first last">
<li>ivozprovider</li>
</ul>
</dd>
</dl>
</li>
</ul>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">apt-get update</span>
<span class="go">apt-get install ivozprovider</span>
</pre></div>
</div>
<ul>
<li><p class="first">Para una <a class="reference internal" href="index.html#instalacion-distribuida"><span class="std std-ref">Instalación distribuida</span></a>: uno de los paquetes de perfil dependiendo del rol que desempeñará la máquina.</p>
<blockquote>
<div><ul class="simple">
<li>ivozprovider-profile-data</li>
<li>ivozprovider-profile-proxy</li>
<li>ivozprovider-profile-portal</li>
<li>ivozprovider-profile-as</li>
</ul>
</div></blockquote>
</li>
</ul>
<div class="admonition attention">
<p class="first admonition-title">Atención</p>
<p class="last">La instalación distribuida requiere un par de configuraciones manuales basadas en los roles que están desempeñando. Tenga en cuenta que el proceso de instalación distribuida aún no está documentado. Puede consultar la <a class="reference external" href="https://github.com/irontec/ivozprovider/issues/271">solicitud de documentación</a> para obtener más información.</p>
</div>
</div>
<div class="section" id="finish-the-installation">
<h4>Terminar la instalación<a class="headerlink" href="#finish-the-installation" title="Enlazar permanentemente con este título">¶</a></h4>
<p>La instalación StandAlone tiene un menú que se puede usar para configurar los servicios básicos utilizados en IvozProvider. La mayoría de los servicios se configuran automáticamente para funcionar en la misma máquina con los valores predeterminados.</p>
<p>Este menú permite:</p>
<ul class="simple">
<li><p class="first">Configurar dirección(es) IP para proxies SIP</p>
</li>
<li><p class="first">Idioma predeterminado de la plataforma</p>
</li>
<li><p class="first">Contraseña de la base de datos MySQL del administrador</p>
</li>
</ul>
<p>Es posible cambiar cualquiera de estos valores en cualquier momento ejecutando:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">dpkg-reconfigure ivozprovider</span>
</pre></div>
</div>
<div class="admonition important">
<p class="first admonition-title">Importante</p>
<p class="last">Cualquiera de las direcciones IP públicas configuradas durante la instalación funcionará para acceder al portal web. Las credenciales predeterminadas son <strong>admin / changeme</strong>.</p>
</div>
<div class="admonition important">
<p class="first admonition-title">Importante</p>
<p class="last">Debe reiniciar su máquina después de una instalación de paquetes para iniciar todos los servicios requeridos.</p>
</div>
</div>
</div>
<span id="document-basic_concepts/installation/cd_install"></span><div class="section" id="cds-automaticos-de-instalacion">
<span id="automatic-iso-cd-image"></span><span id="id1"></span><h3>Imagen ISO CD automática<a class="headerlink" href="#cds-automaticos-de-instalacion" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Puede descargar una de las <a class="reference external" href="https://github.com/irontec/ivozprovider">imágenes ISO CD automáticas de IvozProvider</a> (generadas usando <a class="reference external" href="https://wiki.debian.org/Simple-CDD">simplecdd</a>) en versiones estables o nocturnas:</p>
<div class="admonition important">
<p class="first admonition-title">Importante</p>
<p class="last">IMPORTANTE: ¡Los CDs de instalación automática formatearán el disco de la máquina de destino!</p>
</div>
<ul class="simple">
<li><p class="first">Configure la máquina de destino para que arranque desde el CD. Mostrará el menú de instalación de Debian GNU/Linux.</p>
</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Puede usar la instalación gráfica si lo prefiere, pero las siguientes capturas de pantalla muestran la instalación estándar.</p>
</div>
<img alt="_images/installcd-intro.png" src="_images/installcd-intro.png" />
<ul class="simple">
<li><p class="first">Elija el idioma de instalación:</p>
</li>
</ul>
<img alt="_images/installcd-language.png" src="_images/installcd-language.png" />
<ul class="simple">
<li><p class="first">Elija la ubicación:</p>
</li>
</ul>
<img alt="_images/installcd-location.png" src="_images/installcd-location.png" />
<ul class="simple">
<li><p class="first">Establecer contraseña de root</p>
</li>
</ul>
<img alt="_images/installcd-rootpass.png" src="_images/installcd-rootpass.png" />
<ul class="simple">
<li><p class="first">Elija la configuración de fecha y hora:</p>
</li>
</ul>
<img alt="_images/installcd-clock.png" src="_images/installcd-clock.png" />
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">En este punto, se realizará una configuración de red genérica y particionamiento de disco, y también una instalación del sistema base.</p>
</div>
<ul class="simple">
<li><p class="first">Configurar la contraseña de root del servidor MySQL</p>
</li>
</ul>
<img alt="_images/installcd-mysqlpass.png" src="_images/installcd-mysqlpass.png" />
<div class="admonition important">
<p class="first admonition-title">Importante</p>
<p class="last">La contraseña de MySQL debe establecerse en esta pantalla y nuevamente en el siguiente menú de configuración de Ivozprovider. Si deja este campo vacío, se utilizará la contraseña predeterminada (ver más abajo).</p>
</div>
<ul class="simple">
<li><p class="first">Configurar IvozProvider:</p>
</li>
</ul>
<img alt="_images/installcd-ivozmenu.png" src="_images/installcd-ivozmenu.png" />
<p>Como se menciona en <a class="reference internal" href="index.html#requisitos-minimos"><span class="std std-ref">Requisitos mínimos</span></a>, se requiere al menos una dirección IP pública para los proxies SIP de Usuario y Trunk. Recuerde que si usa solo una, KamTrunks utilizará diferentes puertos SIP para evitar colisiones.</p>
<p>Puede establecer sus direcciones ahora y configurar las interfaces correctamente cuando el sistema esté completamente instalado. Este menú puede mostrarse en cualquier momento después de la instalación.</p>
<img alt="_images/installcd-proxyaddr.png" src="_images/installcd-proxyaddr.png" />
<p>También puede configurar la contraseña de root de MySQL predeterminada ahora.</p>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Si no configura la contraseña de MySQL, se utilizará la contraseña predeterminada (changeme). Aún puede cambiarla más tarde.</p>
</div>
<img alt="_images/installcd-mysql.png" src="_images/installcd-mysql.png" />
<p>Y el idioma predeterminado para los portales:</p>
<img alt="_images/installcd-portallang.png" src="_images/installcd-portallang.png" />
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">No es necesario configurar todos los ajustes durante la instalación inicial. En caso de que algún ajuste haya quedado sin configurar, se mostrará un cuadro de diálogo de advertencia.</p>
</div>
<img alt="_images/installcd-warning.png" src="_images/installcd-warning.png" />
<p>Por último, seleccione dónde se instalará el cargador de arranque GRUB.</p>
<img alt="_images/installcd-grub.png" src="_images/installcd-grub.png" />
<p>¡Después del reinicio, estará listo para acceder utilizando los portales web!</p>
<div class="admonition important">
<p class="first admonition-title">Importante</p>
<p class="last">Cualquiera de las direcciones IP públicas configuradas durante la instalación funcionará para acceder al portal web. Las credenciales predeterminadas son <strong>admin / changeme</strong>.</p>
</div>
</div>
<span id="document-basic_concepts/installation/extra_components"></span><div class="section" id="extra-components">
<h3>Componentes adicionales<a class="headerlink" href="#extra-components" title="Enlazar permanentemente con este título">¶</a></h3>
<div class="section" id="g-729">
<h4>G.729<a class="headerlink" href="#g-729" title="Enlazar permanentemente con este título">¶</a></h4>
<div class="admonition attention">
<p class="first admonition-title">Atención</p>
<p class="last">El códec G.729 se ofrece por defecto para llamadas externas salientes. Si no lo instala utilizando las siguientes instrucciones, debe ser eliminado del archivo de configuración pjsip.conf. De lo contrario, los servidores de aplicaciones ofrecerán un códec no disponible.</p>
</div>
<div class="admonition important">
<p class="first admonition-title">Importante</p>
<p class="last">En algunos países, es posible que deba pagar tarifas de regalías para utilizar el códec G.729 a sus titulares de patentes. No somos asesores legales en cuanto a patentes mundiales activas o retiradas.</p>
</div>
<p>Puede usar G.729 con IvozProvider, pero la instalación debe hacerse manualmente. El códec G.729 está optimizado para cada tipo de CPU y versión de asterisk, por lo que cada instalación puede requerir un módulo de códec diferente.</p>
<p>Puede descargar el códec desde <a class="reference external" href="http://asterisk.hosting.lv/">aquí</a> en la sección Asterisk 18.</p>
<p>Una vez descargado, mueva el archivo <cite>.so</cite> a <strong>/usr/lib/asterisk/modules/</strong> y renómbrelo a <strong>codec_g729.so</strong></p>
<p>Puede verificar que el códec es válido cargando el módulo en asterisk e imprimiendo las traducciones de códecs disponibles usando:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">asterisk -rx &#39;module load codec_g729.so&#39;</span>
<span class="go">asterisk -rx &#39;core show translation&#39; | grep 729</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<span id="document-basic_concepts/operation_roles/index"></span><div class="section" id="platform-roles">
<span id="operation-roles"></span><h2>Roles de la plataforma<a class="headerlink" href="#platform-roles" title="Enlazar permanentemente con este título">¶</a></h2>
<p>IvozProvider es una solución de proveedor de roles multinivel.</p>
<p>Las siguientes imágenes muestran los diferentes niveles disponibles y la relación entre ellos:</p>
<img alt="_images/operator_levels3.png" src="_images/operator_levels3.png" />
<p>Esta sección explicará cada uno de los roles disponibles, describiendo sus responsabilidades y tareas más importantes.</p>
<div class="section" id="global-administrator-role">
<h3>Rol de administrador global<a class="headerlink" href="#global-administrator-role" title="Enlazar permanentemente con este título">¶</a></h3>
<p>El rol de administrador global (operador en la imagen) generalmente lo realiza el responsable de la instalación.</p>
<p>Todas las opciones y características de la plataforma son visibles para este rol y generalmente está a cargo de su mantenimiento.</p>
<p>Su tarea más importante es <strong>crear Marcas</strong> y configurarlas para que tengan la suficiente autonomía para usar correctamente la plataforma:</p>
<blockquote>
<div><ul class="simple">
<li><p class="first">Configurar su acceso web.</p>
</li>
<li><p class="first">Configurar la apariencia del portal de su marca: temas, colores, etc.</p>
</li>
</ul>
</div></blockquote>
<p>Aparte de su tarea principal, su visibilidad global y acceso total los hace responsables de:</p>
<ul>
<li><p class="first">Monitorear la plataforma para que siempre esté en funcionamiento</p>
</li>
<li><p class="first">Analizar los registros de la plataforma para rastrear posibles errores.</p>
</li>
<li><p class="first">Pulir los mecanismos de seguridad para evitar ataques externos.</p>
</li>
<li><p class="first">Obtener estadísticas globales de la calidad del audio de las llamadas.</p>
</li>
<li><p class="first">Aumentar los recursos disponibles de la plataforma según sea necesario:</p>
<blockquote>
<div><ul class="simple">
<li><p class="first">Aumentar los recursos disponibles en una instalación independiente</p>
</li>
<li><p class="first">Migrar, cuando sea necesario, a una instalación distribuida con múltiples AS, relés de medios, etc.</p>
</li>
</ul>
</div></blockquote>
</li>
</ul>
<p>En resumen, <strong>este rol es el único que no tiene límites dentro de la plataforma</strong>, por eso <em>Dios</em> es un término utilizado en múltiples lugares a lo largo de esta documentación.</p>
<div class="admonition important">
<p class="first admonition-title">Importante</p>
<p class="last"><em>Este rol es responsable de mantener la plataforma*</em>, configurándola para el comportamiento correcto. Este rol <strong>no tiene ningún tipo de límite</strong> y <strong>otorga acceso</strong> a los <strong>operadores de marca</strong>.</p>
</div>
</div>
<div class="section" id="brand-administrator-role">
<h3>Rol de administrador de marca<a class="headerlink" href="#brand-administrator-role" title="Enlazar permanentemente con este título">¶</a></h3>
<p>El operador de marca puede acceder a un portal con menos secciones disponibles en comparación con el rol anterior. El administrador general (Dios) es el encargado de proporcionar una URL con credenciales para su portal de marca.</p>
<p>La tarea más importante para el operador de marca es <strong>crear y configurar clientes para que puedan trabajar correctamente</strong>.</p>
<p>Debido a que los operadores de marca también son responsables de facturar a sus clientes y asegurarse de que las llamadas externas estén correctamente configuradas, también deben gestionar:</p>
<ul class="simple">
<li><p class="first">Contratos de interconexión con otros proveedores de IP para la interconexión PSTN.</p>
</li>
<li><p class="first">Incluir toda la información requerida del cliente para el proceso de facturación.</p>
</li>
<li><p class="first">Planes de precios que ofrecerán a sus clientes, que determinarán cuánto pagarán por cada llamada.</p>
</li>
<li><p class="first">Configurar las rutas para cada tipo de llamada saliente según su destino final</p>
</li>
<li><p class="first">Crear las facturas para cada período de facturación y enviarlas a sus clientes.</p>
</li>
</ul>
<p>Como puede ver, la tarea del operador de marca tiene poco en común con el operador global, pero su importancia es vital para que los usuarios finales puedan utilizar todas las características incluidas en IvozProvider.</p>
<div class="admonition important" id="brand-responsibilities">
<p class="first admonition-title">Importante</p>
<p class="last"><strong>En resumen</strong>, los operadores de marca <strong>otorgan acceso</strong> a los administradores de sus <strong>clientes</strong> y <strong>configuran la plataforma para enrutar y tarificar sus llamadas</strong>.</p>
</div>
</div>
<div class="section" id="client-administrator-role">
<h3>Rol de administrador de cliente<a class="headerlink" href="#client-administrator-role" title="Enlazar permanentemente con este título">¶</a></h3>
<p>El administrador del cliente tiene acceso al portal proporcionado por el operador de marca.</p>
<p>Desde su punto de vista, tiene una pbx virtual en la nube que debe configurar para sus usuarios.</p>
<p>Para lograr eso, se requiere:</p>
<ul>
<li><p class="first">Configurar terminales, extensiones y usuarios.</p>
</li>
<li><p class="first">Configurar el proceso de entrada DDI con la lógica adecuada:</p>
<blockquote>
<div><ul class="simple">
<li><p class="first">Directamente a un usuario</p>
</li>
<li>IVRs</li>
<li><p class="first">Grupos de búsqueda</p>
</li>
<li>Faxes</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">Dar acceso a los usuarios finales a su portal web, para que puedan configurar sus opciones de perfil:</p>
<blockquote>
<div><ul class="simple">
<li><p class="first">Desvío de llamadas</p>
</li>
<li><p class="first">No molestar</p>
</li>
<li><p class="first">Llamada en espera</p>
</li>
</ul>
</div></blockquote>
</li>
</ul>
<div class="admonition important">
<p class="first admonition-title">Importante</p>
<p class="last">En resumen, los administradores de clientes son responsables de <strong>configurar el sistema de telefonía y utilizar todas las características disponibles en IvozProvider</strong>.</p>
</div>
</div>
<div class="section" id="final-user-role">
<h3>Rol de usuario final<a class="headerlink" href="#final-user-role" title="Enlazar permanentemente con este título">¶</a></h3>
<p>El usuario final tiene dos tipos diferentes de credenciales, ambas suministradas por su administrador de cliente:</p>
<ul class="simple">
<li><p class="first">Credenciales de acceso al portal de usuario</p>
</li>
<li><p class="first">Credenciales SIP utilizadas para registrar terminales en IvozProvider</p>
</li>
</ul>
<p>A través del portal de usuario, puede navegar por su registro de llamadas y configurar:</p>
<blockquote>
<div><ul class="simple">
<li><p class="first">Desvío de llamadas</p>
</li>
<li><p class="first">No molestar</p>
</li>
<li><p class="first">Llamada en espera</p>
</li>
<li><p class="first">Datos mostrados al llamar</p>
</li>
<li><p class="first">Configuración geográfica</p>
</li>
</ul>
</div></blockquote>
<p>Por otro lado, las credenciales SIP permiten a los usuarios configurar sus terminales para realizar y recibir llamadas.</p>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Las mismas credenciales SIP pueden ser utilizadas en múltiples dispositivos al mismo tiempo, generando lo que se conoce como <em>parallel-forking</em>: siempre que se realice una llamada a un usuario, todos los dispositivos activos sonarán para que el usuario pueda responder la llamada desde cualquiera de ellos.</p>
</div>
</div>
</div>
</div>
<div class="toctree-wrapper compound">
<span id="document-getting_started/internal_calls/index"></span><div class="section" id="making-internal-calls">
<h2>Realizando llamadas internas<a class="headerlink" href="#making-internal-calls" title="Enlazar permanentemente con este título">¶</a></h2>
<p>El objetivo de este bloque será configurar IvozProvider para realizar llamadas internas, utilizando como punto de partida la instalación base descrita en el paso anterior.</p>
<p>Para lograr realizar una llamada entre Alice y Bob, debemos cumplir con algunas tareas en los tres niveles de configuración descritos en <a class="reference internal" href="index.html#operation-roles"><span class="std std-ref">Roles de la plataforma</span></a>.</p>
<p>Por eso hemos ordenado el índice en estos 3 bloques:</p>
<div class="toctree-wrapper compound">
<span id="document-getting_started/internal_calls/god_portal"></span><div class="section" id="global-configuration">
<h3>Configuración Global<a class="headerlink" href="#global-configuration" title="Enlazar permanentemente con este título">¶</a></h3>
<div class="admonition important">
<p class="first admonition-title">Importante</p>
<p class="last">Cualquiera de las 2 direcciones IP públicas configuradas durante la instalación funcionará para acceder al portal web. Las credenciales predeterminadas son <strong>admin / changeme</strong>.</p>
</div>
<p>En esta sección se hará referencia a las opciones de configuración del administrador global, disponibles en el menú (<strong>Gestión principal</strong>) del portal web (solo visible para los administradores God):</p>
<div class="section" id="emulate-the-demo-brand">
<h4>Emular la marca Demo<a class="headerlink" href="#emulate-the-demo-brand" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Como se mencionó anteriormente, la instalación inicial tendrá una marca ya creada llamada DemoBrand, que se utilizará para nuestro objetivo: tener 2 teléfonos registrados que puedan llamarse entre sí.</p>
<p>Antes de pasar a la siguiente sección, es bastante importante entender cómo funciona la <strong>emulación</strong>.</p>
<ul class="simple">
<li><p class="first">Como operador global, tienes acceso al menú <strong>Configuración Global</strong> solo visible para los administradores <em>God</em>.</p>
</li>
<li><p class="first">Aparte de ese menú, también tendrás acceso a los bloques de <strong>Configuración de Marca</strong> y <strong>Configuración de Cliente</strong>.</p>
</li>
<li><p class="first">Los dos últimos bloques tienen un botón rojo en el lado derecho.</p>
</li>
<li><p class="first">Al presionarlo, se mostrará un popup que lista todas las marcas / clientes existentes.</p>
</li>
<li><p class="first">Después de seleccionar la marca DemoBrand, el icono cambiará.</p>
</li>
<li><p class="first">La esquina superior derecha del portal también mostrará la marca que se está emulando.</p>
</li>
</ul>
</div>
<div class="section" id="what-emulation-means">
<h4>Qué significa la emulación<a class="headerlink" href="#what-emulation-means" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Básicamente, que <strong>todo en el menú &#8216;Configuración de Marca&#8217; será relativo a la marca elegida</strong> y es <strong>exactamente</strong> las mismas entradas de menú que el operador de la marca verá usando su portal de marca.</p>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Ok, ok, tal vez exactamente no sea totalmente preciso. El operador global puede ver algunos campos en algunas pantallas que otros administradores no pueden (por ejemplo, en la pantalla de edición del Cliente, campos como &#8216;Relés de medios&#8217; o &#8216;Servidor de aplicaciones&#8217; solo son configurables por el operador global.</p>
</div>
</div>
</div>
<span id="document-getting_started/internal_calls/brand_portal"></span><div class="section" id="brand-configuration">
<span id="id1"></span><h3>Configuración de Marca<a class="headerlink" href="#brand-configuration" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Necesitamos que la DemoBrand predeterminada tenga un cliente con al menos 2 usuarios. Para lograr esto, necesitaremos un poco de configuración en esta sección.</p>
<p>De hecho, si revisamos <strong>PBXs Virtuales</strong> en el menú de la marca, descubriremos que ya existe una <em>DemoCompany</em> que podemos usar para cumplir nuestro objetivo deseado :)</p>
<p>Solo se requiere una cosa para configurar este cliente, presionar la opción <strong>Editar cliente</strong>.</p>
<div class="section" id="client-sip-domain">
<span id="domain-per-client"></span><span id="id2"></span><h4>Dominio SIP del Cliente<a class="headerlink" href="#client-sip-domain" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Como se mencionó en la sección anterior, es <strong>requerido</strong> que cada uno de los clientes vPBX tenga un dominio público que resuelva a la dirección IP configurada para <a class="reference internal" href="index.html#proxyusers"><span class="std std-ref">Proxies de Usuarios</span></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">El registro DNS puede ser de tipo A (compatible con todos los teléfonos fijos/softphones) o incluso NAPTR+SRV.</p>
</div>
<p>Una vez que el dominio ha sido configurado (por medios que están fuera del alcance de este documento), será suficiente escribirlo en nuestra configuración del cliente campo <strong>Dominio SIP</strong>.</p>
<p>Una vez que el cliente ha sido guardado, el dominio también se mostrará en la lista en la columna <strong>Dominio SIP</strong>.</p>
<div class="admonition attention">
<p class="first admonition-title">Atención</p>
<p class="last">Es importante entender este bloque. <a class="reference internal" href="#dnshack"><span class="std std-ref">A menos que tengamos un solo cliente registrado</span></a>, sin un dominio DNS apuntando a nuestra dirección IP del proxy de usuarios, todo fallará.</p>
</div>
<div class="admonition danger">
<p class="first admonition-title">Peligro</p>
<p class="last">¿Hemos repetido lo suficiente que sin un DNS configurado correctamente apuntando a la dirección IP del proxy de Usuarios nada funcionará?</p>
</div>
<div class="section" id="i-have-no-time-for-a-dns-registry">
<span id="dnshack"></span><h5>No tengo tiempo para un registro DNS<a class="headerlink" href="#i-have-no-time-for-a-dns-registry" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Todo lo que hemos dicho es cierto: a medida que creamos nuevas marcas y las marcas crean nuevos clientes, cada uno de ellos necesitará un registro DNS.</p>
<p>Pero el primer cliente de la plataforma es bastante especial y puede tomar la dirección IP del proxy para usarla como un dominio.</p>
<p>Aunque no es un dominio, pero al ser usado como si lo fuera, se mostrará en la sección <a class="reference internal" href="index.html#sip-domains"><span class="std std-ref">Dominios SIP</span></a>.</p>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Es importante entender que este truco solo es válido para el primer cliente de la plataforma ;)</p>
</div>
</div>
</div>
<div class="section" id="emulate-demo-client">
<span id="emulate-client"></span><h4>Emular cliente Demo<a class="headerlink" href="#emulate-demo-client" title="Enlazar permanentemente con este título">¶</a></h4>
<p>El proceso de emulación del cliente es el mismo que el de la emulación de la marca, con la diferencia de que filtra el bloque ‘Configuración del Cliente’ en lugar de ‘Configuración de Marca’.</p>
<p>Una vez que el cliente ha sido emulado, la esquina superior derecha del portal mostrará que estamos en el camino correcto :)</p>
</div>
</div>
<span id="document-getting_started/internal_calls/client_portal"></span><div class="section" id="client-configuration">
<span id="id1"></span><h3>Configuración del Cliente<a class="headerlink" href="#client-configuration" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Estamos cerca de hacer nuestra primera llamada en nuestro recién instalado IvozProvider, solo hay 6 pasos para configurar en nuestra pbx virtual DemoClient.</p>
<ul class="simple">
<li><p class="first">2 terminales</p>
</li>
<li><p class="first">2 extensiones</p>
</li>
<li><p class="first">2 usuarios</p>
</li>
</ul>
<div class="section" id="creating-terminals">
<h4>Creando Terminales<a class="headerlink" href="#creating-terminals" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Ve a la sección de terminales y... ¡voilà! Ya tenemos 2 terminales creados.</p>
</div>
<div class="section" id="creating-extensions">
<h4>Creando Extensiones<a class="headerlink" href="#creating-extensions" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Luego vamos a extensiones, solo para verificar que ya tenemos 2 extensiones creadas para nosotros.</p>
<p>Nada más que hacer en esta sección, ¡vamos a la siguiente!</p>
</div>
<div class="section" id="creating-users">
<h4>Creando Usuarios<a class="headerlink" href="#creating-users" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Como se esperaba, también tenemos 2 usuarios creados con extensiones y terminales asignados previamente.</p>
<p>En este punto, tenemos todo listo para hacer una llamada entre estos dos usuarios: Alice y Bob.</p>
</div>
</div>
<span id="document-getting_started/internal_calls/configure_sipuacs"></span><div class="section" id="sip-terminal-configuration">
<h3>Configuración del Terminal SIP<a class="headerlink" href="#sip-terminal-configuration" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Lo último que necesitamos son 2 terminales SIP (teléfonos fijos, softphones o incluso aplicaciones móviles) y configurarlos de la siguiente manera:</p>
<p><strong>ALICE</strong></p>
<ul class="simple">
<li><p class="first"><strong>Usuario</strong>: alice</p>
</li>
<li><p class="first"><strong>Contraseña</strong>: alice</p>
</li>
<li><p class="first"><strong>Dominio</strong>: users.democlient.com (o la IP si estamos usando <a class="reference internal" href="index.html#dnshack"><span class="std std-ref">el truco de DNS</span></a>)</p>
</li>
</ul>
<p><strong>BOB</strong></p>
<ul class="simple">
<li><p class="first"><strong>Usuario</strong>: bob</p>
</li>
<li><p class="first"><strong>Contraseña</strong>: bob</p>
</li>
<li><p class="first"><strong>Dominio</strong>: users.democlient.com (o la IP si estamos usando <a class="reference internal" href="index.html#dnshack"><span class="std std-ref">el truco de DNS</span></a>)</p>
</li>
</ul>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">A veces el usuario y el dominio se configuran en una sola opción. En este caso deberíamos ingresar <a class="reference external" href="mailto:alice&#37;&#52;&#48;users&#46;democlient&#46;com">alice<span>&#64;</span>users<span>&#46;</span>democlient<span>&#46;</span>com</a> y <a class="reference external" href="mailto:bob&#37;&#52;&#48;users&#46;democlient&#46;com">bob<span>&#64;</span>users<span>&#46;</span>democlient<span>&#46;</span>com</a> (o la IP si estamos usando <a class="reference internal" href="index.html#dnshack"><span class="std std-ref">el truco de DNS</span></a>)</p>
</div>
<p>Después de configurar los terminales, Alice debería poder llamar a Bob solo marcando 102 en su terminal.</p>
</div>
</div>
</div>
<span id="document-getting_started/external_incoming_calls/index"></span><div class="section" id="receiving-external-calls">
<h2>Recibiendo llamadas externas<a class="headerlink" href="#receiving-external-calls" title="Enlazar permanentemente con este título">¶</a></h2>
<p>El objetivo de este bloque será configurar IvozProvider para recibir llamadas externas entrantes.</p>
<p>Para lograr esto, se seguirán estos pasos:</p>
<div class="toctree-wrapper compound">
<span id="document-getting_started/external_incoming_calls/transformations"></span><div class="section" id="transformations-configuration">
<h3>Configuración de transformaciones<a class="headerlink" href="#transformations-configuration" title="Enlazar permanentemente con este título">¶</a></h3>
<p><strong>IvozProvider</strong> está diseñado para proporcionar servicio <strong>en cualquier lugar del planeta</strong>, no solo en el país original donde se instala la plataforma.</p>
<p>Un concepto muy importante para lograr este objetivo son las transformaciones numéricas, que <strong>adaptan los diferentes sistemas de formato de números de los países del mundo</strong> definidos en <a class="reference external" href="https://www.itu.int/rec/T-REC-E.164/es">E.164</a> <strong>a un formato neutral</strong>.</p>
<p>La sección que permite al operador de la marca configurar todas las <strong>transformaciones numéricas</strong> es <strong>Configuración de Marca / Proveedores / Transformaciones numéricas</strong>.</p>
<p>Puede encontrar más información sobre transformaciones en la sección <a class="reference internal" href="index.html#numeric-transformations"><span class="std std-ref">Transformaciones numéricas</span></a>.</p>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Ya tenemos un conjunto pre-creado para la mayoría de los países del mundo, por lo que con suerte no se necesita hacer nada aquí.</p>
</div>
</div>
<span id="document-getting_started/external_incoming_calls/peering"></span><div class="section" id="peering-configuration">
<h3>Configuración de peering<a class="headerlink" href="#peering-configuration" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Entendemos un <strong>contrato de peering</strong> como el acuerdo entre un <strong>Operador de Marca</strong> y un Proveedor de VoIP para realizar y recibir llamadas.</p>
<p>Dividimos los peerings en dos tipos:</p>
<ul class="simple">
<li><p class="first"><strong>Carriers</strong> para llamadas salientes (ver <a class="reference internal" href="index.html#carriers"><span class="std std-ref">Carriers</span></a>).</p>
</li>
<li><p class="first"><strong>Proveedores de DDI</strong> para llamadas entrantes (ver <a class="reference internal" href="index.html#ddi-providers"><span class="std std-ref">Proveedores DDI</span></a>).</p>
</li>
</ul>
<p>Para lograr nuestro objetivo, necesitaremos crear un nuevo (y válido) Proveedor de DDI y asignar la transformación numérica de nuestro país. Consulte <a class="reference internal" href="index.html#ddi-providers"><span class="std std-ref">Proveedores DDI</span></a> para más información.</p>
</div>
<span id="document-getting_started/external_incoming_calls/configure_ddi"></span><p>Una vez que tenemos un acuerdo con un proveedor de DDI y lo hemos configurado en la sección anterior, solo quedan dos tareas pendientes:</p>
<div class="section" id="configuring-an-external-ddi">
<span id="settingup-ddi"></span><h3>Configurando un DDI externo<a class="headerlink" href="#configuring-an-external-ddi" title="Enlazar permanentemente con este título">¶</a></h3>
<p>El operador de la marca, responsable de estos acuerdos de <em>peering</em> con proveedores de VoIP, tiene la tarea de crear los DDIs para cada cliente.</p>
<p>Tenga en cuenta que para acceder a esta sección, el operador de la marca (o <em>dios</em>) debe haber emulado al cliente adecuado y acceder a la sección del menú <strong>Configuración del Cliente</strong>.</p>
<div class="admonition attention">
<p class="first admonition-title">Atención</p>
<p class="last">La sección <strong>Configuración del Cliente &gt; DDIs</strong> es diferente cuando accede el administrador del cliente que los datos mostrados cuando lo hace un administrador global o de marca. Los administradores de clientes no pueden crear o eliminar DDIs, solo editar los creados por el administrador de marca o dios.</p>
</div>
<p>Teniendo en cuenta estos conceptos, creamos un nuevo DDI y llenamos los campos requeridos.</p>
<p>Para información detallada sobre los campos de configuración, consulte la sección <a class="reference internal" href="index.html#pbx-ddis"><span class="std std-ref">DDIs</span></a>.</p>
<p class="rubric">Configurar rutas entrantes</p>
<p>En la sección anterior, hemos creado el DDI y lo configuramos (apuntándolo al usuario Alice), pero <strong>el procedimiento más común</strong> es que el operador de la marca solo cree el DDI mientras que el <strong>administrador del cliente</strong>, usando la misma sección, <strong>lo configura</strong> eligiendo la ruta correcta (usuario, grupo de búsqueda, etc.), filtros de calendarios, etc.</p>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">En este punto, llamar al número del DDI configurado hará que suene el teléfono de <em>Alice</em>.</p>
</div>
</div>
</div>
</div>
<span id="document-getting_started/external_outgoing_calls/index"></span><div class="section" id="making-external-calls">
<h2>Realizando llamadas externas<a class="headerlink" href="#making-external-calls" title="Enlazar permanentemente con este título">¶</a></h2>
<p>El objetivo de esta sección es configurar IvozProvider para realizar llamadas externas salientes, tomando la configuración de la sección anterior como punto de partida.</p>
<p>Seguiremos estos pasos:</p>
<div class="toctree-wrapper compound">
<span id="document-getting_started/external_outgoing_calls/create_carrier"></span><div class="section" id="create-a-new-carrier">
<h3>Crear un nuevo carrier<a class="headerlink" href="#create-a-new-carrier" title="Enlazar permanentemente con este título">¶</a></h3>
<p>En este punto de la configuración, tenemos que configurar IvozProvider para recibir llamadas usando un Proveedor DDI, pero no hemos configurado un Carrier para realizar llamadas externas.</p>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Los proveedores de VoIP generalmente proporcionarán ambos servicios: realizar y recibir llamadas.</p>
</div>
<p>Configure un Carrier de manera similar a como configuramos el Proveedor DDI (instrucciones adicionales <a class="reference internal" href="index.html#carriers"><span class="std std-ref">aquí</span></a>), asignándole el mismo conjunto de transformaciones numéricas.</p>
</div>
<span id="document-getting_started/external_outgoing_calls/where_do_i_call"></span><div class="section" id="where-do-i-call">
<h3>¿Dónde llamo?<a class="headerlink" href="#where-do-i-call" title="Enlazar permanentemente con este título">¶</a></h3>
<p>En este punto de la configuración, tenemos que configurar IvozProvider para usar el <em>Carrier</em> ya configurado para realizar las llamadas externas que estamos haciendo.</p>
<p>Para lograr esto, en primer lugar, necesitamos que los números externos marcados caigan en un <strong>patrón de destino</strong> existente:</p>
<ul class="simple">
<li><p class="first"><a class="reference internal" href="index.html#id1"><span class="std std-ref">Patrones de enrutamiento</span></a></p>
</li>
<li><p class="first"><a class="reference internal" href="index.html#routing-pattern-groups"><span class="std std-ref">Grupos de patrones de enrutamiento</span></a></p>
</li>
</ul>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Para lograr nuestro objetivo de hacer una llamada externa a un número español, no tuvimos que modificar el contenido inicial de estas dos secciones ya que el patrón de España ya existe :)</p>
</div>
</div>
<span id="document-getting_started/external_outgoing_calls/call_routing"></span><div class="section" id="outgoing-routing-configuration">
<h3>Configuración de enrutamiento saliente<a class="headerlink" href="#outgoing-routing-configuration" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Ya tenemos nuestra llamada de prueba categorizada como una llamada dentro del <strong>patrón de enrutamiento</strong> &#8216;España&#8217;. Además, también tenemos un <strong>grupo de patrones de enrutamiento</strong> que incluye &#8216;España&#8217;, llamado &#8216;Europa&#8217;.</p>
<p>Ahora tenemos que decirle a IvozProvider que las llamadas a &#8216;España&#8217; o &#8216;Europa&#8217; deben establecerse a través de nuestro nuevo <strong>Carrier</strong>.</p>
<p>Para hacer esta asignación, usamos la sección <strong>Configuración de Marca &gt; Enrutamiento &gt; Enrutamientos salientes</strong>:</p>
<ul class="simple">
<li><p class="first">Cliente: &#8220;Aplicar a todos los clientes&#8221; (o solo <em>democompany</em>).</p>
</li>
<li><p class="first">Tipo: patrón.</p>
</li>
<li><p class="first">Patrón de destino: España.</p>
</li>
<li><p class="first">Tipo de ruta: estática.</p>
</li>
<li><p class="first">Carriers: nuestro nuevo carrier.</p>
</li>
<li><p class="first">Prioridad: 1</p>
</li>
<li><p class="first">Prioridad: 1</p>
</li>
</ul>
<p>Para más información sobre enrutamiento y balanceo de carga, consulte la sección <a class="reference internal" href="index.html#outgoing-routings"><span class="std std-ref">Enrutamientos Salientes</span></a>.</p>
</div>
<span id="document-getting_started/external_outgoing_calls/outgoing_ddi"></span><div class="section" id="outgoing-ddi-configuration">
<span id="external-ddi"></span><h3>Configuración de DDI saliente<a class="headerlink" href="#outgoing-ddi-configuration" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Antes de realizar nuestra primera llamada saliente, sería deseable elegir el número que el destinatario verá cuando suene el teléfono, para que pueda devolver la llamada fácilmente.</p>
<p>Para lograr este objetivo, tenemos que configurar nuestro DDI como el <strong>DDI saliente</strong> de <em>Alice</em>, porque ella será la elegida para realizar nuestra primera llamada saliente.</p>
<p>Podemos configurar esto editando a <em>Alice</em> en <strong>Configuración del Cliente</strong> &gt; <strong>Usuarios</strong>. Si este cambio lo realiza el operador de marca o el operador global, debe <a class="reference internal" href="index.html#emulate-client"><span class="std std-ref">emular al cliente correspondiente</span></a> previamente.</p>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Podríamos haber configurado el mismo DDI como DDI Saliente Predeterminado a nivel de cliente, editando el cliente <em>democompany</em>.</p>
</div>
<div class="admonition error">
<p class="first admonition-title">Error</p>
<p class="last">Las llamadas de usuarios sin un DDI saliente serán rechazadas por IvozProvider.</p>
</div>
</div>
<span id="document-getting_started/external_outgoing_calls/noplan_nocall"></span><p>En este punto, estamos deseando hacer nuestra primera llamada saliente con nuestro nuevo IvozProvider, puede que incluso hayamos intentado llamar con la configuración actual pero...</p>
<div class="section" id="no-rating-plan-no-call">
<span id="noplan-nocall"></span><h3>Sin plan de tarifas, no hay llamada<a class="headerlink" href="#no-rating-plan-no-call" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Tal como advertimos <a class="reference internal" href="index.html#brand-responsibilities"><span class="std std-ref">cuando describimos las responsabilidades del operador de marca</span></a>, el operador de marca es <strong>responsable de hacer toda la configuración necesaria para que IvozProvider pueda facturar todas las llamadas externas</strong>.</p>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last"><strong>Facturar una llamada</strong> es la acción de <strong>asignar un precio</strong> a una llamada que implica un costo.</p>
</div>
<p><strong>IvozProvider verifica en vivo que una llamada pueda ser facturada cuando se establece</strong> para evitar realizar llamadas que impliquen un costo pero que no serán facturadas porque el Operador de Marca, debido a un error, no ha asignado un precio.</p>
<div class="admonition error">
<p class="first admonition-title">Error</p>
<p class="last">Si una llamada no puede ser facturada, IvozProvider no permitirá su establecimiento.</p>
</div>
<div class="section" id="creating-a-rating-plan">
<h4>Creando un plan de tarifas<a class="headerlink" href="#creating-a-rating-plan" title="Enlazar permanentemente con este título">¶</a></h4>
<p>La sección <strong>Configuración de Marca &gt; Facturación &gt; Destino</strong> está vacía por defecto, a diferencia de la sección de patrones de enrutamiento, que tiene los 254 países del mundo. La razón es que una tarifa de destino generalmente implicará muchos patrones por país (redes GSM, números especiales, números móviles, líneas fijas, etc.).</p>
<p>En la mayoría de los casos, los datos de esta sección se importarán desde un CSV proporcionado por su proveedor de VoIP, pero para nuestra prueba lo crearemos manualmente:</p>
<ul class="simple">
<li><p class="first">Cree un <strong>destino</strong> con &#8216;+34&#8217; para España.</p>
</li>
<li><p class="first">Cree una <strong>tarifa de destino</strong> e inserte un precio para el destino España.</p>
</li>
<li><p class="first">Cree un <strong>plan de tarifas</strong> que incluya esa tarifa de destino.</p>
</li>
</ul>
</div>
<div class="section" id="assign-rating-plan-to-client">
<h4>Asignar plan de tarifas al cliente<a class="headerlink" href="#assign-rating-plan-to-client" title="Enlazar permanentemente con este título">¶</a></h4>
<p>El último paso es <strong>asignar ese plan de tarifas</strong> a <em>democompany</em> siguiendo la indicación <a class="reference internal" href="index.html#assigning-rating-plans-to-clients"><span class="std std-ref">aquí</span></a>.</p>
</div>
</div>
<span id="document-getting_started/external_outgoing_calls/finish"></span><div class="section" id="outgoing-configuration-complete">
<h3>¡Configuración de salida completa!<a class="headerlink" href="#outgoing-configuration-complete" title="Enlazar permanentemente con este título">¶</a></h3>
<p>¡Eso es todo!</p>
<p>En este punto, <em>Alice</em> debería poder realizar llamadas salientes a destinos españoles y estas llamadas deberían ser enrutadas y facturadas adecuadamente.</p>
</div>
</div>
</div>
</div>
<div class="toctree-wrapper compound">
<span id="document-administration_portal/platform/index"></span><div class="section" id="platform-configuration">
<h2>Configuración de la Plataforma<a class="headerlink" href="#platform-configuration" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Esta sección solo se muestra al <em>administrador principal</em> y permite modificar configuraciones globales:</p>
<div class="toctree-wrapper compound">
<span id="document-administration_portal/platform/brands"></span><div class="section" id="brands">
<span id="id1"></span><h3>Marcas<a class="headerlink" href="#brands" title="Enlazar permanentemente con este título">¶</a></h3>
<p>El <em>operador principal</em> es responsable de crear y gestionar las marcas de la plataforma a través de esta sección.</p>
<p>Estos son los campos que se muestran cuando se crea una nueva marca:</p>
<blockquote>
<div><dl class="docutils">
<dt>Nombre</dt>
<dd><p class="first last">Establece el nombre para esta marca.</p>
</dd>
<dt>NIF</dt>
<dd><p class="first last">Número utilizado en las facturas de esta marca.</p>
</dd>
<dt>Logo</dt>
<dd><p class="first last">Utilizado como logo predeterminado en facturas y en portales (si no especifican otro logo).</p>
</dd>
<dt>Datos Facturación</dt>
<dd><p class="first last">Datos incluidos en las facturas creadas por esta marca.</p>
</dd>
<dt>Dominio SIP</dt>
<dd><p class="first last">Introducido en 1.4. Dominio que apunta al proxy SIP de Usuarios utilizado por todas las Cuentas Retail y Dispositivos Residenciales de esta marca.</p>
</dd>
<dt>Grabaciones</dt>
<dd><p class="first last">Configura un límite para el tamaño de las grabaciones de esta marca. Se envía una notificación a la dirección configurada cuando se alcanza el 80% y las grabaciones más antiguas se rotan cuando se alcanza el tamaño configurado.</p>
</dd>
<dt>Funcionalidades</dt>
<dd><p class="first last">Introducido en 1.3, permite al operador principal elegir las funcionalidades de la marca creada. Una configuración equivalente está disponible en Clientes, para elegir entre las que el operador principal dio a su Marca. Las secciones relacionadas se ocultan en consecuencia.</p>
</dd>
<dt>Límite llamadas</dt>
<dd><p class="first last">Limita tanto las llamadas generadas por el usuario como las recibidas <strong>externas</strong> a este valor (0 para ilimitado).</p>
</dd>
<dt>Localización</dt>
<dd><p class="first last">Define la Zona Horaria, Idioma y Divisa predeterminados para los clientes de esta marca.</p>
</dd>
<dt>Notificaciones</dt>
<dd><p class="first last">Configure las <a class="reference internal" href="index.html#id1"><span class="std std-ref">Plantillas de Notificación</span></a> de correo electrónico para usar en esta marca. Los clientes configurados para usar notificaciones genéricas usarán las notificaciones configuradas de la marca. Si la marca no tiene notificaciones configuradas, se usarán las <a class="reference internal" href="index.html#id1"><span class="std std-ref">Plantillas de Notificación por Defecto</span></a>.</p>
</dd>
<dt>ProxyTrunks</dt>
<dd><p class="first last">Seleccione qué direcciones de ProxyTrunks pueden ser utilizadas por esta marca. Lea <a class="reference internal" href="index.html#proxy-trunks"><span class="std std-ref">Proxies de Salida</span></a> para más detalles. No es posible desasignar una dirección utilizada en cualquier <a class="reference internal" href="index.html#carriers"><span class="std std-ref">operador</span></a> o <a class="reference internal" href="index.html#ddi-providers"><span class="std std-ref">proveedor de DDI</span></a>.</p>
</dd>
</dl>
</div></blockquote>
<div class="admonition hint">
<p class="first admonition-title">Consejo</p>
<p class="last">Algunas funcionalidades están relacionadas con la marca y no pueden ser asignadas a los clientes. Otras también están relacionadas con los clientes y permiten al operador de la marca asignarlas a sus clientes.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Advertencia</p>
<p class="last">Deshabilitar la facturación oculta todas las secciones relacionadas y asume que un elemento externo establecerá un precio para las llamadas (se necesita un módulo de tarificación externo, ¡pregunte por él!).</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Deshabilitar las facturas oculta las secciones relacionadas, asumiendo que utilizará una herramienta externa para generarlas.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">El dominio SIP solo es visible para las Marcas con funcionalidades Retail o Residenciales habilitadas.</p>
</div>
<div class="section" id="brand-operators">
<span id="id2"></span><h4>Operadores de Marca<a class="headerlink" href="#brand-operators" title="Enlazar permanentemente con este título">¶</a></h4>
<p>La subsección <strong>Listado de operadores de marca</strong> permite añadir/editar/eliminar credenciales para el acceso al portal de la marca.</p>
<p>Lea <a class="reference internal" href="index.html#acls"><span class="std std-ref">ACLs</span></a> para más información sobre administradores de marca restringidos.</p>
</div>
<div class="section" id="brand-portals">
<span id="id3"></span><h4>Portales de Marca<a class="headerlink" href="#brand-portals" title="Enlazar permanentemente con este título">¶</a></h4>
<p>La subsección <strong>Listado de portales de marca</strong> permite gestionar las URLs para acceder a los diferentes portales web disponibles para una marca dada.</p>
<p>Vea <a class="reference internal" href="index.html#id1"><span class="std std-ref">Portales de Clientes</span></a> para más información.</p>
<div class="admonition warning">
<p class="first admonition-title">Advertencia</p>
<p class="last">Las URLs se asignan a las marcas. Esto significa que a través de una URL dada se puede adivinar la marca, pero no el cliente. Como resultado, el dominio de colisión de nombres de usuario estará a nivel de marca (no pueden existir dos administradores de clientes con el mismo nombre de usuario dentro de una marca).</p>
</div>
</div>
</div>
<span id="document-administration_portal/platform/main_operators"></span><div class="section" id="main-operators">
<span id="id1"></span><h3>Operadores de Plataforma<a class="headerlink" href="#main-operators" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Esta sección enumera las credenciales para iniciar sesión en el portal de administración principal. Puede editar o eliminar credenciales existentes y crear nuevas.</p>
<p>Estos son los campos requeridos de cada entrada:</p>
<blockquote>
<div><dl class="docutils">
<dt>Nombre de usuario</dt>
<dd><p class="first last">Usuario para el proceso de inicio de sesión.</p>
</dd>
<dt>Contraseña</dt>
<dd><p class="first last">Contraseña para el proceso de inicio de sesión.</p>
</dd>
<dt>Zona Horaria</dt>
<dd><p class="first last">Utilizado para mostrar fechas en Llamadas Externas y secciones similares.</p>
</dd>
<dt>Restringido</dt>
<dd><p class="first last">Permite crear credenciales limitadas (lea <a class="reference internal" href="index.html#acls"><span class="std std-ref">ACLs</span></a> para más información).</p>
</dd>
</dl>
</div></blockquote>
<p>Los campos restantes no son requeridos ni utilizados en ningún lugar, solo permiten almacenar información adicional de un usuario dado (nombre, apellido y correo electrónico).</p>
</div>
<span id="document-administration_portal/platform/antiflood_banned_ips"></span><div class="section" id="antiflood-banned-ips">
<span id="id1"></span><h3>IPs bloqueadas por Antiflood<a class="headerlink" href="#antiflood-banned-ips" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Las direcciones enumeradas aquí han sido bloqueadas al menos una vez por el mecanismo de <em>Antiflooding</em>.</p>
<div class="admonition warning">
<p class="first admonition-title">Advertencia</p>
<p class="last"><strong>Las IPs solo se bloquean durante 5 minutos</strong>. Las entradas con <em>Último bloqueo</em> de más de 5 minutos no están actualmente bloqueadas.</p>
</div>
<p>Vea <a class="reference internal" href="index.html#sip-antiflooding"><span class="std std-ref">Antiflooding SIP</span></a> para más información.</p>
</div>
<span id="document-administration_portal/platform/terminal_manufacturers"></span><div class="section" id="terminal-manufacturers">
<span id="provisioning"></span><h3>Fabricantes de Terminales<a class="headerlink" href="#terminal-manufacturers" title="Enlazar permanentemente con este título">¶</a></h3>
<div class="section" id="overview">
<h4>Descripción general<a class="headerlink" href="#overview" title="Enlazar permanentemente con este título">¶</a></h4>
<p>IvozProvider soporta la provisión de terminales vía HTTP/HTTPS que cumplen con los siguientes requisitos:</p>
<ul>
<li><p class="first">Asumiendo un terminal recién desempaquetado, recién conectado y conectado a la red:</p>
<blockquote>
<div><ul class="simple">
<li><p class="first">Solicitar dirección IP vía DHCP.</p>
</li>
<li><p class="first">DHCP ha habilitado la opción 66 que apunta al portal de la plataforma</p>
</li>
<li><p class="first">El primer archivo de provisión solicitado es un archivo estático (diferente para cada modelo) con el prefijo de la URL del paso anterior.</p>
</li>
<li><p class="first">El archivo servido puede redefinir la URL para solicitudes adicionales</p>
</li>
</ul>
</div></blockquote>
</li>
</ul>
<p>Cualquier modelo de terminal que pueda adaptarse a esta forma de provisión puede añadirse en la sección <strong>Configuración de la Plataforma &gt; Fabricantes de Terminales</strong>.</p>
<p class="rubric">Ejemplo Cisco SPA504G</p>
<ul>
<li><p class="first">Cisco SPA504G se enciende y solicita una dirección IP a DHCP</p>
</li>
<li><p class="first">Recibe “<a class="reference external" href="http://provision.example.com/provision">http://provision.example.com/provision</a>” como opción 66 de DHCP</p>
</li>
<li><p class="first">Solicitar configuración HTTP desde <a class="reference external" href="http://provision.example.com/provision/spa504g.cfg">http://provision.example.com/provision/spa504g.cfg</a></p>
</li>
<li><p class="first">Todos los 504G solicitan el mismo archivo (spa504.cfg), con el prefijo de la URL dada</p>
</li>
<li><p class="first">Este archivo solo contiene configuraciones básicas para el modelo y la URL para la siguiente solicitud (p.e. <a class="reference external" href="https://provision.example.com/provision/$MAC.cfg">https://provision.example.com/provision/$MAC.cfg</a>)</p>
</li>
<li><p class="first">De esta manera, cada terminal (MAC debe ser único) solicita un archivo específico (y diferente) después de que se haya servido el genérico.</p>
</li>
<li><p class="first">Este archivo contendrá la configuración específica para el terminal:</p>
<blockquote>
<div><ul class="simple">
<li><p class="first">Usuario</p>
</li>
<li><p class="first">Contraseña</p>
</li>
<li><p class="first">Dominio SIP</p>
</li>
</ul>
</div></blockquote>
</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">El sistema de provisión de IvozProvider, en este momento, solo tiene un objetivo: proporcionar credenciales y configuraciones de idioma para los terminales.</p>
</div>
</div>
<div class="section" id="configuration-of-supported-models">
<h4>Configuración de modelos soportados<a class="headerlink" href="#configuration-of-supported-models" title="Enlazar permanentemente con este título">¶</a></h4>
<p>IvozProvider utiliza un sistema de plantillas que permite al operador global (God) definir nuevos modelos y configurar qué archivos se servirán.</p>
<p>La sección de ayuda de <strong>Fabricantes de Terminales</strong> tiene ejemplos para algunos modelos que funcionan (en el momento de escribir esto) con el sistema de provisión de IvozProvider.</p>
<div class="admonition hint">
<p class="first admonition-title">Consejo</p>
<p class="last">Estos modelos estarán disponibles después de la instalación inicial, pero debe editarlos y cargar la configuración predeterminada antes de poder usar el sistema de provisión (opción <strong>Restaurar plantilla por defecto</strong>).</p>
</div>
<div class="admonition error">
<p class="first admonition-title">Error</p>
<p class="last">Los cambios en el firmware de los UAC pueden hacer que los ejemplos dados dejen de funcionar. Intentaremos mantener las plantillas actualizadas, pero no podemos garantizar este punto.</p>
</div>
<p>Analizando las plantillas sugeridas puede tener una idea básica de la flexibilidad del sistema para configurar cualquier modelo de terminal existente en el mercado y adaptarlos a cambios eventuales en los ejemplos dados.</p>
</div>
<div class="section" id="getting-technical">
<h4>Aspectos técnicos<a class="headerlink" href="#getting-technical" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Imagine un entorno con esta configuración:</p>
<ul class="simple">
<li><p class="first">URLs de provisión:</p>
<ul>
<li><p class="first">Archivo genérico: <a class="reference external" href="http://PROV_IP/provision">http://PROV_IP/provision</a></p>
</li>
<li><p class="first">Archivo específico: <a class="reference external" href="https://PROV_IP:PROV_PORT/provision">https://PROV_IP:PROV_PORT/provision</a></p>
</li>
</ul>
</li>
<li>TerminalModels.genericUrlPattern: y000000000044.cfg</li>
</ul>
<p>¿Qué URLs solicitadas serán válidas?</p>
<p>Para el archivo genérico, solo una: <a class="reference external" href="http://PROV_IP/provision/y000000000044.cfg">http://PROV_IP/provision/y000000000044.cfg</a></p>
<p>Para el archivo específico, las solicitudes son correctas siempre que se cumplan estas reglas:</p>
<ul class="simple">
<li><p class="first">Todas las solicitudes HTTP son incorrectas.</p>
</li>
<li><p class="first">Las solicitudes HTTPS al 443 son incorrectas (se debe usar PROV_PORT).</p>
</li>
<li><p class="first">Los subrutas después de la URL de provisión se ignoran, tanto en la solicitud como en specificUrlPattern.</p>
</li>
<li><p class="first">En la solicitud de archivo específico, la extensión debe coincidir siempre que se use la extensión en specificUrlPattern.</p>
</li>
<li><p class="first">En la solicitud de archivo específico, el nombre del archivo debe coincidir exactamente una vez que se reemplace {mac}.</p>
</li>
<li><p class="first">La dirección MAC no distingue entre mayúsculas y minúsculas y puede contener dos puntos o no (&#8216;:&#8217;).</p>
</li>
</ul>
<p>Analicemos los ejemplos a continuación para entender mejor estas reglas:</p>
<p class="rubric">Ejemplo 1 - TerminalModels.specificUrlPattern: {mac}.cfg</p>
<p>Solicitudes correctas:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">https://PROV_IP:PROV_PORT/provision/aabbccddeeff.cfg</span>
<span class="go">https://PROV_IP:PROV_PORT/provision/aa:bb:cc:dd:ee:ff.cfg</span>
<span class="go">https://PROV_IP:PROV_PORT/provision/aabbccdd:ee:ff.cfg</span>
<span class="go">https://PROV_IP:PROV_PORT/provision/aabbccddeeff.cfg</span>
<span class="go">https://PROV_IP:PROV_PORT/provision/AABBCCDDEEFF.cfg</span>
<span class="go">https://PROV_IP:PROV_PORT/provision/subpath1/aabbccddeeff.cfg</span>
<span class="go">https://PROV_IP:PROV_PORT/provision/subpath1/subpath2/aabbccddeeff.cfg</span>
</pre></div>
</div>
<p>Solicitudes incorrectas:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">https://PROV_IP:PROV_PORT/provision/aabbccddeeff.boot</span>
<span class="go">https://PROV_IP:PROV_PORT/provision/subpath1/subpath2/aabbccddeeff.boot</span>
</pre></div>
</div>
<p>Este ejemplo es idéntico a &#8216;t23/{mac}.cfg&#8217;, ya que se ignoran las subrutas.</p>
<p class="rubric">Ejemplo 2 - TerminalModels.specificUrlPattern: {mac}</p>
<p>Todos los ejemplos anteriores son correctos, ya que se ignora la extensión si no se encuentra ninguna extensión en specificUrlPattern.</p>
<p>Este ejemplo es idéntico a &#8216;t23/{mac}&#8217;, ya que se ignoran las subrutas.</p>
<p class="rubric">Ejemplo 3 - TerminalModels.specificUrlPattern: yea-{mac}.cfg</p>
<p>Todos los ejemplos anteriores son incorrectos, ya que no se encuentra &#8216;yea-&#8216; (la coincidencia de &#8216;yea&#8217; distingue entre mayúsculas y minúsculas).</p>
<p>Solicitudes correctas:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">https://PROV_IP:PROV_PORT/provision/subpath1/yea-aabbccdd:ee:ff.cfg</span>
</pre></div>
</div>
<p>Solicitudes incorrectas:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">https://PROV_IP:PROV_PORT/provision/subpath1/yea-aabbccdd:ee:ff.boot</span>
<span class="go">https://PROV_IP:PROV_PORT/provision/subpath1/YEA-aabbccdd:ee:ff.cfg</span>
</pre></div>
</div>
<p>Este ejemplo es idéntico a &#8216;t23/yea-{mac}.cfg&#8217;, ya que se ignoran las subrutas.</p>
<p class="rubric">Ejemplo 4 - TerminalModels.specificUrlPattern: yea-{mac}</p>
<p>Como no se da ninguna extensión:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">https://PROV_IP:PROV_PORT/provision/subpath1/yea-aabbccdd:ee:ff.cfg</span>
<span class="go">https://PROV_IP:PROV_PORT/provision/subpath1/yea-aabbccdd:ee:ff.boot</span>
</pre></div>
</div>
<p>Solicitudes incorrectas:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">https://PROV_IP:PROV_PORT/provision/subpath1/YEA-aabbccdd:ee:ff.cfg</span>
</pre></div>
</div>
<p>Este ejemplo es idéntico a &#8216;t23/yea-{mac}&#8217;, ya que se ignoran las subrutas.</p>
</div>
</div>
<span id="document-administration_portal/platform/services"></span><div class="section" id="services">
<span id="god-services"></span><h3>Servicios<a class="headerlink" href="#services" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Hay <strong>servicios especiales</strong> a los que se puede acceder llamando a algunos códigos <strong>desde el terminal</strong>.</p>
<div class="admonition danger">
<p class="first admonition-title">Peligro</p>
<p class="last">Los servicios definidos en esta sección <strong>no son accesibles durante una conversación</strong>. Se activan <strong>llamando a los códigos</strong>, no usando códigos DTMF mientras se habla.</p>
</div>
<p>Hay los siguientes <strong>servicios especiales</strong> disponibles en la sección <strong>Configuración global</strong> &gt; <strong>Servicios</strong>:</p>
<blockquote>
<div><dl class="docutils">
<dt>Captura directa</dt>
<dd><p class="first last">Este servicio permite capturar una llamada entrante desde otro terminal llamando al código seguido de la extensión del usuario objetivo.</p>
</dd>
<dt>Captura de grupo</dt>
<dd><p class="first last">Este servicio permite capturar una llamada entrante para cualquier terminal cuyo usuario sea parte de uno de los grupos de captura.</p>
</dd>
<dt>Consultar buzón de voz</dt>
<dd><p class="first last">Este servicio permite consultar el buzón de voz del usuario utilizando un menú interactivo desde el cual se pueden escuchar, eliminar, etc. los nuevos mensajes de voz. Esta es una alternativa activa para recibir mensajes de voz por correo electrónico. Desde la versión 1.4, este servicio permite una extensión opcional después del código de servicio para consultar los mensajes de voz de otros usuarios. Los usuarios pueden proteger su buzón de voz utilizando las opciones del menú interno.</p>
</dd>
<dt>Grabar locución</dt>
<dd><p class="first last">Este servicio permite a cualquier usuario grabar las locuciones de sus clientes marcando un código especial. Se proporcionarán instrucciones de voz en el idioma del usuario.</p>
</dd>
<dt>Abrir bloqueo</dt>
<dd><p class="first last">Llamar a este código de servicio establecerá el estado del bloqueo de ruta en &#8216;Abierto&#8217; (ver <a class="reference internal" href="index.html#route-locks"><span class="std std-ref">Candados de ruta</span></a>).</p>
</dd>
<dt>Cerrar bloqueo</dt>
<dd><p class="first last">Llamar a este código de servicio establecerá el estado del bloqueo de ruta en &#8216;Cerrado&#8217; (ver <a class="reference internal" href="index.html#route-locks"><span class="std std-ref">Candados de ruta</span></a>).</p>
</dd>
<dt>Alternar bloqueo</dt>
<dd><p class="first last">Llamar a este código de servicio cambiará el estado actual del bloqueo (ver <a class="reference internal" href="index.html#route-locks"><span class="std std-ref">Candados de ruta</span></a>).</p>
</dd>
<dt>Desvío incondicional de llamadas</dt>
<dd><p class="first last">Llamar a este código de servicio cambiará el estado actual del desvío incondicional de llamadas (solo disponible para clientes residenciales, ver <a class="reference internal" href="index.html#residential-devices-cfw"><span class="std std-ref">Configuración de desvío de llamadas de dispositivos residenciales</span></a>).</p>
</dd>
<dt>Desvío de llamadas por ocupado</dt>
<dd><p class="first last">Llamar a este código de servicio cambiará el estado actual del desvío de llamadas por ocupado (solo disponible para clientes residenciales, ver <a class="reference internal" href="index.html#residential-devices-cfw"><span class="std std-ref">Configuración de desvío de llamadas de dispositivos residenciales</span></a>).</p>
</dd>
<dt>Desvío de llamadas por no respuesta</dt>
<dd><p class="first last">Llamar a este código de servicio cambiará el estado actual del desvío de llamadas por no respuesta (solo disponible para clientes residenciales, ver <a class="reference internal" href="index.html#residential-devices-cfw"><span class="std std-ref">Configuración de desvío de llamadas de dispositivos residenciales</span></a>).</p>
</dd>
<dt>Desvío de llamadas por inalcanzable</dt>
<dd><p class="first last">Llamar a este código de servicio cambiará el estado actual del desvío de llamadas por inalcanzable (solo disponible para clientes residenciales, ver <a class="reference internal" href="index.html#residential-devices-cfw"><span class="std std-ref">Configuración de desvío de llamadas de dispositivos residenciales</span></a>).</p>
</dd>
</dl>
</div></blockquote>
<p>Tan pronto como se implementen nuevos servicios en IvozProvider, se enumerarán en esta sección.</p>
<div class="admonition attention">
<p class="first admonition-title">Atención</p>
<p class="last">Esta sección enumera los servicios disponibles y los códigos predeterminados cuando se crea una <strong>nueva marca</strong>.</p>
</div>
<div class="admonition hint">
<p class="first admonition-title">Consejo</p>
<p class="last">Cambiar el código predeterminado en esta sección solo afectará a las nuevas marcas creadas.</p>
</div>
</div>
<span id="document-administration_portal/platform/currencies"></span><div class="section" id="currencies">
<h3>Divisas<a class="headerlink" href="#currencies" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Esta sección permite añadir tantas divisas como se desee. Es un campo multilingüe con un símbolo que se utilizará en facturas, movimientos de saldo, etc.</p>
<p>Estos elementos de IvozProvider tienen una divisa asignada:</p>
<blockquote>
<div><dl class="docutils">
<dt>Marca</dt>
<dd><p class="first last">Utilizado como divisa predeterminada para todos los elementos subyacentes que tienen divisa.</p>
</dd>
<dt>Cliente</dt>
<dd><p class="first last">La divisa elegida se utilizará en el cálculo de precios, facturas, costos fijos de la factura, movimientos de saldo y operaciones de dinero restantes de este cliente.</p>
</dd>
<dt>Operador</dt>
<dd><p class="first last">La divisa elegida se utilizará en el cálculo de costos, movimientos de saldo y operaciones de dinero restantes de este operador.</p>
</dd>
<dt>Tarifa de destino</dt>
<dd><p class="first last">Todas las tarifas dentro de una tarifa de destino asumirán esta divisa.</p>
</dd>
<dt>Plan de precios</dt>
<dd><p class="first last">Todas las tarifas de destino agrupadas en un plan de precios <strong>deben</strong> usar esta divisa.</p>
</dd>
</dl>
</div></blockquote>
<p>Es importante tener en cuenta las notas a continuación antes de usar esta función:</p>
<ul class="simple">
<li><p class="first">Los planes de precios <strong>deben</strong> agrupar solo tarifas de destino que usen su divisa.</p>
</li>
<li><p class="first">Los clientes y operadores <strong>deben</strong> usar solo planes de precios que usen su divisa.</p>
</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Algunas verificaciones en el backend evitan algunas de las configuraciones incorrectas anteriores, pero no todas: <strong>use esta función con cuidado</strong>.</p>
</div>
<div class="admonition important">
<p class="first admonition-title">Importante</p>
<p class="last"><strong>No hay conversión de divisas involucrada</strong>: el costo de la llamada se calculará en la divisa del operador, el precio de la llamada se calculará en la divisa del cliente.</p>
</div>
<div class="admonition caution">
<p class="first admonition-title">Prudencia</p>
<p class="last">Las rutas LCR que involucran operadores con diferentes divisas no son compatibles.</p>
</div>
</div>
<span id="document-administration_portal/platform/default_notification_templates"></span><div class="section" id="id1">
<span id="default-notification-templates"></span><span id="id2"></span><h3>Plantillas de Notificación por Defecto<a class="headerlink" href="#id1" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Los administradores de marca pueden configurar las notificaciones enviadas por IvozProvider:</p>
<ul class="simple">
<li><p class="first">Correo electrónico enviado cuando se recibe un nuevo buzón de voz</p>
</li>
<li><p class="first">Correo electrónico enviado cuando se recibe un nuevo fax</p>
</li>
<li><p class="first">Correo electrónico enviado cuando el saldo está por debajo del umbral configurado</p>
</li>
<li><p class="first">Correo electrónico enviado cuando se genera una factura automática</p>
</li>
<li><p class="first">Correo electrónico enviado cuando se generan CSVs de CDR programados</p>
</li>
<li><p class="first">Correo electrónico enviado cuando se alcanza el uso máximo diario</p>
</li>
</ul>
<p>Esta sección permite <strong>modificar las plantillas por defecto</strong> que se <strong>utilizarán cuando no se configure una notificación personalizada</strong>.</p>
<p>Vea <a class="reference internal" href="index.html#notification-templates"><span class="std std-ref">Plantillas de Notificación</span></a> para más información.</p>
</div>
<span id="document-administration_portal/platform/default_invoice_templates"></span><div class="section" id="default-invoice-templates">
<span id="id1"></span><h3>Plantillas de Factura por Defecto<a class="headerlink" href="#default-invoice-templates" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Los administradores de la plataforma pueden crear plantillas de factura que pueden ser utilizadas por todas las marcas en la plataforma.</p>
<p>Aunque los administradores de marca no podrán editarlas, estarán disponibles para <a class="reference internal" href="index.html#invoices"><span class="std std-ref">Facturas</span></a> y <a class="reference internal" href="index.html#invoice-schedulers"><span class="std std-ref">Programadores de facturas</span></a>.</p>
</div>
<span id="document-administration_portal/platform/global_special_numbers"></span><div class="section" id="global-special-numbers">
<span id="id1"></span><h3>Números Especiales Globales<a class="headerlink" href="#global-special-numbers" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Esta sección permite añadir números externos que serán manejados de una manera diferente por IvozProvider cuando un cliente llame a esos destinos (<strong>solo para llamadas externas salientes</strong>).</p>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Los números enumerados aquí se aplicarán en cada marca. El operador de marca también puede añadir números utilizando <a class="reference internal" href="index.html#special-numbers"><span class="std std-ref">Números Especiales</span></a>.</p>
</div>
<div class="section" id="disable-cdr">
<h4>Deshabilitar CDR<a class="headerlink" href="#disable-cdr" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Actualmente solo hay un tratamiento especial: <strong>Deshabilitar CDR</strong>. Configurar esto en <em>Sí</em> para un número:</p>
<ul>
<li><p class="first">Evitar que las llamadas externas salientes se enumeren en las siguientes secciones:</p>
<ul class="simple">
<li><p class="first"><em>Llamadas Activas</em></p>
</li>
<li><p class="first"><em>Llamadas Externas</em></p>
</li>
<li><p class="first"><em>Registro de Llamadas</em> (tanto en el portal del cliente como en el portal del usuario)</p>
</li>
</ul>
</li>
<li><p class="first">Como consecuencia, las llamadas no se incluirán en ningún:</p>
<ul class="simple">
<li><p class="first"><a class="reference internal" href="index.html#invoices"><span class="std std-ref">Facturas</span></a></p>
</li>
<li><p class="first">CSV definido por <a class="reference internal" href="index.html#call-csv-schedulers"><span class="std std-ref">Programadores de CSV de llamadas</span></a></p>
</li>
<li><p class="first">Respuesta de la API de los endpoints relacionados</p>
</li>
</ul>
</li>
<li><p class="first">No llame a CGRateS para estas llamadas: la llamada será permitida sin importar si el plan de precios activo lo permite.</p>
<blockquote>
<div><ul class="simple">
<li><p class="first">Como consecuencia, no se disminuirá el precio/coste de la cuenta del operador/cliente.</p>
</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">Evitar grabar estas llamadas. Como consecuencia, la sección <em>Grabaciones</em> no las enumerará.</p>
</li>
</ul>
<div class="admonition warning">
<p class="first admonition-title">Advertencia</p>
<p class="last">Añadir un número causará este manejo especial <strong>solo para futuras llamadas externas salientes</strong>. No se realizan cambios en llamadas anteriores.</p>
</div>
</div>
</div>
<span id="document-administration_portal/platform/sip_domains"></span><div class="section" id="sip-domains">
<span id="god-sipdomains"></span><span id="id1"></span><h3>Dominios SIP<a class="headerlink" href="#sip-domains" title="Enlazar permanentemente con este título">¶</a></h3>
<p>La sección <strong>Dominios</strong> mostrará los dominios SIP que apuntan a la dirección pública de <a class="reference internal" href="index.html#proxyusers"><span class="std std-ref">Proxies de Usuarios</span></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">El registro DNS puede ser de tipo A (soportado por todos los teléfonos físicos/softphones) o incluso NAPTR+SRV.</p>
</div>
<p>Hay dos tipos de dominios SIP:</p>
<blockquote>
<div><dl class="docutils">
<dt>Dominio SIP del cliente vPBX</dt>
<dd><p class="first last">Cada cliente vPBX tiene un dominio SIP único.</p>
</dd>
<dt>Dominio SIP de la marca</dt>
<dd><p class="first last">Compartido por todos los clientes retail y residenciales de la marca.</p>
</dd>
</dl>
</div></blockquote>
<p>Todos estos dominios SIP se mostrarán en esta lista para que el administrador global pueda verificar qué dominios están registrados para cada cliente/marca:</p>
<blockquote>
<div><dl class="docutils">
<dt>Dominio</dt>
<dd><p class="first last">DNS apuntando a la dirección pública de <a class="reference internal" href="index.html#proxyusers"><span class="std std-ref">Proxies de Usuarios</span></a></p>
</dd>
<dt>Marca</dt>
<dd><p class="first last">Marca del dominio de marca específico o cliente vPBX.</p>
</dd>
<dt>Cliente</dt>
<dd><p class="first last">Cliente vPBX del dominio vPBX específico. Vacío para dominios de marca.</p>
</dd>
</dl>
</div></blockquote>
</div>
<span id="document-administration_portal/platform/portals"></span><div class="section" id="platform-portals">
<span id="portals"></span><span id="id1"></span><h3>Portales de Plataforma<a class="headerlink" href="#platform-portals" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Esta sección permite la configuración de los portales de la plataforma que serán utilizados por <a class="reference internal" href="index.html#main-operators"><span class="std std-ref">Operadores de Plataforma</span></a>.</p>
<div class="admonition warning">
<p class="first admonition-title">Advertencia</p>
<ul class="last simple">
<li><p class="first">Las URLs DEBEN ser HTTPS</p>
</li>
<li><p class="first">Las URLs NO DEBEN terminar con una barra /</p>
</li>
</ul>
</div>
<p>Cada URL también puede configurar un logo y un tema por URL.</p>
</div>
<span id="document-administration_portal/platform/active_calls"></span><div class="section" id="call-state">
<span id="active-calls"></span><span id="id1"></span><h3>Llamadas activas<a class="headerlink" href="#call-state" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Esta sección permite al operador principal y al operador de marca ver <strong>llamadas externas activas actuales</strong>.</p>
<div class="admonition warning">
<p class="first admonition-title">Advertencia</p>
<p class="last">Las llamadas internas no se enumerarán.</p>
</div>
<p>Estas son las columnas mostradas:</p>
<blockquote>
<div><dl class="docutils">
<dt>Duración</dt>
<dd><p class="first last">Muestra la duración del establecimiento de la llamada durante el establecimiento y la duración de la llamada durante la llamada en curso. También muestra la dirección (entrante/saliente) y la información del estado de la llamada, como se explica a continuación.</p>
</dd>
<dt>Marca</dt>
<dd><p class="first last">Marca que realiza una llamada dada (solo se muestra a nivel principal).</p>
</dd>
<dt>Cliente</dt>
<dd><p class="first last">Cliente que realiza una llamada dada.</p>
</dd>
<dt>Llamante</dt>
<dd><p class="first last">Número de origen de la llamada en E.164.</p>
</dd>
<dt>Llamado</dt>
<dd><p class="first last">Número de destino de la llamada en E.164.</p>
</dd>
<dt>Operador</dt>
<dd><p class="first last">Operador/Proveedor de DDI utilizado en una llamada dada.</p>
</dd>
</dl>
</div></blockquote>
<div class="section" id="id2">
<h4>Estado de la llamada<a class="headerlink" href="#id2" title="Enlazar permanentemente con este título">¶</a></h4>
<p>El estado de la llamada sigue la <a class="reference external" href="https://tools.ietf.org/html/rfc4235#section-3.7.1">Máquina de Estado de Diálogo propuesta en RFC4235</a>:</p>
<ul>
<li><p class="first"><strong>Intentando</strong></p>
<blockquote>
<div><ul class="simple">
<li><p class="first">INVITE enviado, alguien está intentando hacer una nueva llamada.</p>
</li>
<li><p class="first">Mostrado como <em>Configuración de Llamada</em> en esta sección.</p>
</li>
</ul>
</div></blockquote>
</li>
<li><p class="first"><strong>En proceso</strong></p>
<blockquote>
<div><ul class="simple">
<li><p class="first">Respuesta provisional de los proxies intermedios recibida (generalmente 100 Trying).</p>
</li>
<li><p class="first">Este estado se ignora en esta sección.</p>
</li>
</ul>
</div></blockquote>
</li>
<li><p class="first"><strong>Temprano</strong></p>
<blockquote>
<div><ul class="simple">
<li><p class="first">Respuesta provisional de la parte final recibida (generalmente 180 Ringing).</p>
</li>
<li><p class="first">Mostrado como <em>Sonando</em> en esta sección.</p>
</li>
</ul>
</div></blockquote>
</li>
<li><p class="first"><strong>Confirmado</strong></p>
<blockquote>
<div><ul class="simple">
<li><p class="first">200 OK recibido, llamada confirmada, partes hablando.</p>
</li>
<li><p class="first">Mostrado como <em>En llamada</em> en esta sección.</p>
</li>
</ul>
</div></blockquote>
</li>
<li><p class="first"><strong>Terminada</strong></p>
<blockquote>
<div><ul class="simple">
<li><p class="first">BYE/CANCEL/respuesta de error (&gt;300) recibida, llamada terminada.</p>
</li>
<li><p class="first">La llamada desaparece para mostrar este estado.</p>
</li>
</ul>
</div></blockquote>
</li>
</ul>
<p class="rubric">Ejemplo 1: Llamada exitosa</p>
<p>Una llamada exitosa atraviesa estos estados:</p>
<ul class="simple">
<li><p class="first">Intentando -&gt; En proceso (opcional) -&gt; Temprano (opcional) -&gt; Confirmado -&gt; Terminada</p>
</li>
</ul>
<p>Eso se codificará en esta sección como:</p>
<ul class="simple">
<li><p class="first">Configuración de Llamada -&gt; Sonando (opcional) -&gt; En llamada -&gt; La llamada desaparece</p>
</li>
</ul>
<p class="rubric">Ejemplo 2: Llamada no exitosa</p>
<p>Una llamada no exitosa atraviesa estos estados:</p>
<ul class="simple">
<li><p class="first">Intentando -&gt; En proceso (opcional) -&gt; Temprano (opcional) -&gt; Terminada</p>
</li>
</ul>
<p>Eso se mostrará en esta sección como:</p>
<ul class="simple">
<li><p class="first">Configuración de Llamada -&gt; Sonando (opcional) -&gt; La llamada desaparece</p>
</li>
</ul>
</div>
</div>
<span id="document-administration_portal/platform/external_calls"></span><div class="section" id="id1">
<span id="external-calls"></span><span id="id2"></span><h3>Llamadas externas<a class="headerlink" href="#id1" title="Enlazar permanentemente con este título">¶</a></h3>
<p>La sección <strong>Llamadas externas</strong> enumera <strong>tanto las llamadas externas entrantes como las salientes</strong>.</p>
<p>Esta sección se muestra en diferentes niveles:</p>
<ul class="simple">
<li><p class="first">Nivel principal (nivel principal)</p>
</li>
<li><p class="first">Nivel de marca (filtrado para marca emulada/registrada).</p>
</li>
<li><p class="first">Nivel de cliente (filtrado para cliente emulado/registrado).</p>
</li>
</ul>
<p>Cada entrada muestra esta información:</p>
<blockquote>
<div><dl class="docutils">
<dt>Tiempo de inicio</dt>
<dd><p class="first last">Fecha y hora del establecimiento de la llamada.</p>
</dd>
<dt>Marca</dt>
<dd><p class="first last">Solo visible para <em>principal</em>, muestra la marca de cada llamada.</p>
</dd>
<dt>Cliente</dt>
<dd><p class="first last">Visible para <em>principal</em> y <em>operador de marca</em>, muestra el cliente de cada llamada.</p>
</dd>
<dt>Llamante</dt>
<dd><p class="first last">DDI presentado para la llamada saliente.</p>
</dd>
<dt>Llamado</dt>
<dd><p class="first last">Número externo marcado.</p>
</dd>
<dt>Duración</dt>
<dd><p class="first last">Muestra cuánto duró la llamada.</p>
</dd>
<dt>Precio</dt>
<dd><p class="first last">El monto de dinero para el cliente. Visible para <em>principal</em> y <em>operador de marca</em> y <em>administrador del cliente</em> si <em>Mostrar detalles de facturación al cliente</em> está habilitado.</p>
</dd>
<dt>Coste</dt>
<dd><p class="first last">Visible para <em>principal</em> y <em>operador de marca</em>, el monto de dinero para la marca (el dinero que el operador facturará por la llamada).</p>
</dd>
<dt>Plan de precios</dt>
<dd><p class="first last">Plan de precios utilizado para establecer el precio de la llamada. Visible para <em>principal</em> y <em>operador de marca</em> y <em>administrador del cliente</em> si <em>Mostrar detalles de facturación al cliente</em> está habilitado.</p>
</dd>
<dt>Destino</dt>
<dd><p class="first last">Destino que coincidió con la llamada para la facturación. Visible para <em>principal</em> y <em>operador de marca</em> y <em>administrador del cliente</em> si <em>Mostrar detalles de facturación al cliente</em> está habilitado.</p>
</dd>
<dt>Operador</dt>
<dd><p class="first last">Visible para <em>principal</em> y <em>operador de marca</em>, muestra qué <a class="reference internal" href="index.html#carriers"><span class="std std-ref">Operador</span></a> se utilizó para cada llamada saliente.</p>
</dd>
<dt>Proveedor DDI</dt>
<dd><p class="first last">Visible para <em>principal</em> y <em>operador de marca</em>, muestra qué <a class="reference internal" href="index.html#ddi-providers"><span class="std std-ref">Proveedor DDI</span></a> se utilizó para cada llamada entrante.</p>
</dd>
<dt>Factura</dt>
<dd><p class="first last">Visible para <em>principal</em> y <em>operador de marca</em>, muestra si una llamada ya está incluida en alguna <a class="reference internal" href="index.html#invoices"><span class="std std-ref">Factura</span></a>.</p>
</dd>
<dt>ID de llamada</dt>
<dd><p class="first last">Muestra el ID de la llamada para la resolución de problemas y exportación CSV.</p>
</dd>
<dt>Tipo de Endpoint</dt>
<dd><p class="first last">Valores posibles: RetailAccount, ResidentialDevice, User, Fax, Friend.</p>
</dd>
<dt>ID de Endpoint</dt>
<dd><p class="first last">ID interno del endpoint específico (solo cuando <em>endpointType</em> no está vacío).</p>
</dd>
<dt>Nombre de Endpoint</dt>
<dd><p class="first last">Extensión de usuario, nombre de amigo, nombre de fax, nombre de cuenta retail o nombre de dispositivo residencial (solo cuando <em>endpointId</em> no está vacío).</p>
</dd>
</dl>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Un proceso asíncrono analiza cada llamada externa y la añade a esta lista unos minutos después de colgar la llamada. Los campos relacionados con la facturación, como el coste y el precio, estarán vacíos para las llamadas entrantes externas.</p>
</div>
<div class="section" id="call-rerating">
<h4>Recalificación de llamada<a class="headerlink" href="#call-rerating" title="Enlazar permanentemente con este título">¶</a></h4>
<p>A nivel de <strong>marca</strong>, hay una operación adicional disponible para llamadas salientes: <strong>Recalificar llamada</strong>. Esta opción permite llamar al motor de calificación nuevamente para una llamada o un grupo de llamadas.</p>
<p>Notas sobre este proceso de recalificación:</p>
<ul class="simple">
<li><p class="first">Si una llamada está en una factura, no se puede recalificar. La factura debe ser eliminada primero.</p>
</li>
<li><p class="first">La llamada será recalificada con el <em>Tiempo de inicio</em> de la llamada (no con los planes de calificación activos actuales, sino con los planes de calificación activos en el momento de la llamada).</p>
</li>
<li><p class="first">Tanto el <em>Precio</em> como el <em>Coste</em> serán recalculados. Esto puede implicar actualizar el <em>plan de precios</em> y el <em>destino</em> también.</p>
</li>
</ul>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Cuando una llamada es recalificada, el coste y el precio se vacían hasta la siguiente iteración de la tarea asíncrona.</p>
</div>
</div>
</div>
<span id="document-administration_portal/platform/infrastructure/index"></span><div class="section" id="infrastructure">
<h3>Infraestructura<a class="headerlink" href="#infrastructure" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Las secciones de este grupo enumeran los componentes de la plataforma y no deben modificarse sin un conocimiento profundo:</p>
<div class="toctree-wrapper compound">
<span id="document-administration_portal/platform/infrastructure/proxy_users"></span><div class="section" id="proxy-users">
<span id="proxyusers"></span><h4>Proxies de Usuarios<a class="headerlink" href="#proxy-users" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Este es el proxy SIP expuesto al mundo exterior donde los usuarios registran sus terminales.</p>
<p>El valor mostrado en la sección <strong>Proxies de Usuarios</strong> mostrará la dirección IP ingresada durante el proceso de instalación.</p>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Todos los dominios en la sección <cite>Dominios SIP</cite> (excepto trunks.ivozprovider.local) deben apuntar a esta dirección IP.</p>
</div>
</div>
<span id="document-administration_portal/platform/infrastructure/proxy_trunks"></span><div class="section" id="proxy-trunks">
<span id="id1"></span><h4>Proxies de Salida<a class="headerlink" href="#proxy-trunks" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Este es el proxy SIP expuesto al mundo exterior y se encarga de conectar con proveedores (operadores / proveedores de DDI) que los administradores de marca configurarán para <em>SIP peering</em>.</p>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Solo se enumerarán las direcciones IP, ya que el puerto siempre será 5060 (5061 para SIP sobre TLS).</p>
</div>
<div class="section" id="main-address">
<h5>Dirección principal<a class="headerlink" href="#main-address" title="Enlazar permanentemente con este título">¶</a></h5>
<p>El valor mostrado en la entrada <strong>proxytrunks</strong> mostrará la dirección IP ingresada durante el proceso de instalación.</p>
<div class="admonition danger">
<p class="first admonition-title">Peligro</p>
<p class="last">Esta entrada no se puede eliminar.</p>
</div>
<p>Esta dirección IP:</p>
<ul class="simple">
<li><p class="first">Se utilizará para la señalización interna:</p>
<ul>
<li>KamTrunks &lt;-&gt; KamUsers</li>
<li><p class="first">KamTrunks &lt;-&gt; Servidores de Aplicación</p>
</li>
</ul>
</li>
<li><p class="first">Se utilizará para recargar los módulos de Kamailio cuando sea necesario (XMLRPC).</p>
</li>
</ul>
<p>Este valor se puede cambiar desde el portal, pero Kamailio se asegura de que KamTrunks esté vinculado a la dirección IP dada.</p>
</div>
<div class="section" id="additional-addresses">
<h5>Direcciones adicionales<a class="headerlink" href="#additional-addresses" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Además de la entrada <strong>proxytrunks</strong> no removible, se pueden agregar direcciones adicionales aquí. Estas direcciones adicionales se pueden eliminar siempre que no estén asignadas a ningún Operador / Proveedor de DDI.</p>
<div class="admonition warning">
<p class="first admonition-title">Advertencia</p>
<p class="last">Además de agregarlas aquí, las direcciones deben configurarse en <em>/etc/kamailio/proxytrunks/additional_addresses.cfg</em> (<em>additional_addresses.cfg.in</em> se proporciona como ejemplo). Asegúrese de que Kamailio pueda vincularse a las direcciones dadas, de lo contrario no se iniciará.</p>
</div>
<p>El propósito de estas direcciones adicionales es comunicarse con diferentes Proveedores utilizando diferentes direcciones:</p>
<ul class="simple">
<li><p class="first">El operador principal (<em>God</em>) asignará las direcciones IP enumeradas en esta sección a las Marcas (leer <a class="reference internal" href="index.html#brands"><span class="std std-ref">Marcas</span></a>).</p>
<ul>
<li><p class="first">Cada marca debe tener al menos una dirección.</p>
</li>
<li><p class="first">Cada dirección se puede asignar en varias marcas.</p>
</li>
</ul>
</li>
<li><p class="first">El operador de marca asignará estas direcciones a los Operadores (leer <a class="reference internal" href="index.html#carriers"><span class="std std-ref">Carriers</span></a>) y Proveedores de DDI (leer <a class="reference internal" href="index.html#ddi-providers"><span class="std std-ref">Proveedores DDI</span></a>).</p>
<ul>
<li><p class="first">Cada Proveedor (tanto Operadores como Proveedores de DDI) debe tener una dirección.</p>
</li>
</ul>
</li>
<li><p class="first">IvozProvider utilizará las direcciones asignadas en la señalización SIP con esos Operadores / Proveedores de DDI.</p>
</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Tenga en cuenta que solo se aplica a la señalización SIP, no se realizan cambios en el manejo de medios RTP.</p>
</div>
</div>
</div>
<span id="document-administration_portal/platform/infrastructure/media_relay_sets"></span><div class="section" id="media-relay-sets">
<h4>Sets de Servidores de Media<a class="headerlink" href="#media-relay-sets" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Los servidores de media se encargan de intermediar el tráfico RTP de las llamadas establecidas. Al igual que los Servidores de Aplicación, pueden escalar horizontalmente según sea necesario.</p>
<p>Los servidores de media están organizados en grupos para que puedan ser asignados a un cliente/proveedor. Cada elemento del grupo tiene una <strong>métrica</strong> que permite un balanceo de carga no igual dentro del mismo grupo (por ejemplo, media-relay1 métrica 1; media-relay2 métrica 2: el segundo servidor de media manejará el doble de llamadas que el primero).</p>
<div class="admonition hint">
<p class="first admonition-title">Consejo</p>
<p class="last">La asignación estática de grupos de servidores de media no es la práctica común, pero nos permite asignar recursos estratégicos a clientes que necesitan un servicio garantizado. El uso más común de estos <strong>grupos de servidores de media</strong> es colocarlos cerca del área geográfica del cliente (generalmente lejos del resto de los sistemas de la plataforma) para reducir las <strong>latencias</strong> en sus conversaciones.</p>
</div>
<p>En una instalación independiente, solo existirá un grupo de servidores de media. Por defecto, este grupo solo tiene un servidor de media.</p>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">La dirección mostrada es el socket de control, no la dirección SDP que se incluirá durante la negociación SIP. Por defecto, este único servidor de media compartirá la misma dirección IP que el proxy SIP del Usuario.</p>
</div>
</div>
<span id="document-administration_portal/platform/infrastructure/application_servers"></span><div class="section" id="application-servers">
<h4>Servidores de Aplicación<a class="headerlink" href="#application-servers" title="Enlazar permanentemente con este título">¶</a></h4>
<p>La sección <strong>Servidores de Aplicación</strong> enumerará la dirección IP donde los procesos de Asterisk existentes escucharán las solicitudes y, como se mencionó anteriormente, pueden escalar horizontalmente para adaptar la plataforma a la carga requerida.</p>
<p>A diferencia de los Proxies, Asterisk no está expuesto al mundo exterior, por lo que para una instalación independiente solo habrá uno escuchando en 127.0.0.1.</p>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">El puerto de escucha no se mostrará en el campo porque siempre será 6060 (UDP).</p>
</div>
<div class="admonition important">
<p class="first admonition-title">Importante</p>
<p class="last">Tan pronto como se agregue otro Servidor de Aplicación, los proxies intentarán equilibrar la carga usándolo. Si no se recibe respuesta del servidor de aplicación agregado, se deshabilitará automáticamente.</p>
</div>
</div>
<span id="document-administration_portal/platform/infrastructure/application_server_sets"></span><div class="section" id="application-server-sets">
<h4>Sets de Servidores de Aplicación<a class="headerlink" href="#application-server-sets" title="Enlazar permanentemente con este título">¶</a></h4>
<p>La sección de Sets de Servidores de Aplicación permite a los administradores de la plataforma gestionar conjuntos de servidores de aplicación añadiéndolos, eliminándolos y editándolos.</p>
<blockquote>
<div><dl class="docutils">
<dt>Nombre</dt>
<dd><p class="first last">El nombre del Set de Servidores de Aplicación.</p>
</dd>
<dt>Método de Distribución</dt>
<dd><ul class="first last simple">
<li><p class="first"><strong>Hash</strong>: Distribuye las llamadas haciendo hash de un parámetro que es único por cliente.</p>
</li>
<li><p class="first"><strong>Round robin</strong>: Distribuye las llamadas equitativamente entre los Servidores de Aplicación.</p>
</li>
</ul>
</dd>
<dt>Descripción:</dt>
<dd><p class="first last">Una breve descripción del Set de Servidores de Aplicación.</p>
</dd>
<dt>Servidores de Aplicación:</dt>
<dd><p class="first last">Una lista de selección múltiple con uno o más servidores de aplicación.</p>
</dd>
</dl>
</div></blockquote>
</div>
</div>
</div>
</div>
</div>
<span id="document-administration_portal/brand/index"></span><div class="section" id="brand-configuration">
<h2>Configuración de Marca<a class="headerlink" href="#brand-configuration" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Este módulo describirá todas las secciones mostradas a los operadores de marca:</p>
<div class="toctree-wrapper compound">
<span id="document-administration_portal/brand/clients/index"></span><div class="section" id="clients">
<h3>Clientes<a class="headerlink" href="#clients" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Este grupo mostrará todos los tipos de clientes disponibles para una marca dada (emulada/registrada):</p>
<div class="toctree-wrapper compound">
<span id="document-administration_portal/brand/clients/virtual_pbx"></span><div class="section" id="virtual-pbx">
<span id="id1"></span><h4>PBX Virtual<a class="headerlink" href="#virtual-pbx" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Los clientes de PBX Virtual están diseñados para proporcionar servicio a clientes con múltiples terminales que requieren flujos de llamadas con muchas características.</p>
<div class="admonition hint">
<p class="first admonition-title">Consejo</p>
<p>Algunos campos descritos a continuación pueden no ser visibles dependiendo de las funcionalidades habilitadas.</p>
<dl class="last docutils">
<dt>Nombre</dt>
<dd><p class="first last">Establece el nombre para este cliente.</p>
</dd>
<dt>Dominio SIP</dt>
<dd><p class="first last">DNS para este cliente. Ver sección <a class="reference internal" href="index.html#client-sip-domain"><span class="std std-ref">Dominio SIP del Cliente</span></a>.</p>
</dd>
<dt>Características</dt>
<dd><p class="first last">Permite la configuración de características disponibles para este cliente. Las secciones relacionadas se ocultan en consecuencia y el cliente no puede usarlas.</p>
</dd>
<dt>Método de facturación</dt>
<dd><p class="first last">Cuando la función de facturación está habilitada, determina cuándo se valorarán las llamadas. &#8216;ninguno&#8217; desactiva la facturación. Ver sección <a class="reference internal" href="index.html#billing"><span class="std std-ref">Tarificación</span></a>.</p>
</dd>
<dt>Corporación</dt>
<dd><p class="first last">Seleccione a qué corporación pertenece este cliente. Permite usar <a class="reference internal" href="index.html#internal-friends"><span class="std std-ref">Amigos Inter VPBX</span></a> para marcar otras extensiones de clientes.</p>
</dd>
<dt>Configuración Geográfica</dt>
<dd><p class="first last">Configuración general del cliente para idioma y zonas horarias. La mayoría de las configuraciones en la sección se pueden configurar por usuario si es necesario.</p>
</dd>
<dt>Moneda</dt>
<dd><p class="first last">La moneda elegida se usará en el cálculo de precios, facturas, movimientos de saldo y operaciones de dinero restante de este cliente.</p>
</dd>
<dt>Máximo de llamadas</dt>
<dd><p class="first last">Limita tanto las llamadas externas entrantes como salientes (0 para ilimitado).</p>
</dd>
<dt>Filtrar por dirección IP</dt>
<dd><p class="first last">Si se establece, la plataforma solo permitirá llamadas provenientes de IP/rangos o países permitidos.</p>
</dd>
<dt>Países permitidos por GeoIP</dt>
<dd><p class="first last">Si <em>Filtrar por dirección IP</em> está habilitado, se permitirá el tráfico de los países seleccionados.</p>
</dd>
<dt>Uso máximo diario</dt>
<dd><p class="first last">Limita las llamadas externas salientes cuando se alcanza este límite dentro de un día. A medianoche se restablecen los contadores y se reactivan las cuentas.</p>
</dd>
<dt>Correo electrónico</dt>
<dd><p class="first last">Se enviará un correo electrónico de notificación a la dirección dada cuando se alcance el uso máximo diario configurado. Dejar vacío para evitar la notificación.</p>
</dd>
<dt>Datos de la factura</dt>
<dd><p class="first last">Datos incluidos en las facturas creadas por esta marca. Esta sección también permite mostrar/ocultar detalles de facturación en el portal del cliente, como Facturas, Perfiles de Tarifas y Precio de llamadas externas.</p>
</dd>
<dt>Notificaciones</dt>
<dd><p class="first last">Configurar las <a class="reference internal" href="index.html#id1"><span class="std std-ref">Plantillas de Notificación</span></a> por correo electrónico para usar con este cliente.</p>
</dd>
<dt>DDI saliente</dt>
<dd><p class="first last">Selecciona un DDI para las llamadas salientes de este cliente, si no se anula en un nivel inferior.</p>
</dd>
<dt>Conjunto de retransmisión de medios</dt>
<dd><p class="first last">Como se mencionó anteriormente, la retransmisión de medios se puede agrupar en conjuntos para reservar capacidades o con un propósito geográfico. Esta sección te permite asignarlos a los clientes.</p>
</dd>
<dt>Método de Distribución</dt>
<dd><p class="first last">&#8216;Basado en hash&#8217; distribuye las llamadas haciendo hash de un parámetro que es único por cliente, &#8216;Round robin&#8217; distribuye las llamadas equitativamente entre los AS y &#8216;estático&#8217; se usa para fines de depuración.</p>
</dd>
<dt>Servidor de Aplicaciones</dt>
<dd><p class="first last">Si se usa el <em>método de distribución</em> &#8216;estático&#8217;, selecciona un servidor de aplicaciones aquí.</p>
</dd>
<dt>Grabación de llamadas bajo demanda</dt>
<dd><p class="first last">Se muestra solo si la función <em>Grabación</em> está habilitada para el cliente, permite habilitar y deshabilitar la grabación de llamadas bajo demanda. Si está habilitado, puedes elegir cómo invocar y el código de servicio si es necesario.</p>
</dd>
<dt>Permitir al Cliente eliminar grabaciones</dt>
<dd><p class="first last">Se muestra solo si la función <em>Grabación</em> está habilitada para el cliente, muestra/oculta el botón de eliminación de grabaciones en la sección <em>Grabaciones de Llamadas</em> del cliente.</p>
</dd>
</dl>
</div>
<p>La mayoría de las características son autoexplicativas, pero <strong>notificación de voz</strong> merece una explicación: si las habilitas, cuando una llamada falla, el usuario escuchará una locución explicando lo ocurrido (&#8220;no tienes permisos para realizar esta llamada&#8221;, &#8220;la llamada no se puede facturar&#8221;, etc.)</p>
<p>Tanto <strong>Método de Distribución</strong> como <strong>Servidor de Aplicaciones</strong> son visibles solo para el Administrador Principal.</p>
<div class="admonition warning">
<p class="first admonition-title">Advertencia</p>
<p class="last">El método de distribución &#8216;Round-robin&#8217; está reservado para clientes grandes cuyas llamadas no pueden ser manejadas en un solo AS. <strong>Usa &#8216;Basado en hash&#8217; para los restantes</strong>, ya que &#8216;Round-robin&#8217; impone algunas limitaciones a las características del cliente (sin colas, sin conferencias).</p>
</div>
<div class="section" id="additional-subsections">
<h5>Subsecciones adicionales<a class="headerlink" href="#additional-subsections" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Cada entrada en esta tabla tiene estas opciones adicionales:</p>
<ul class="simple">
<li><p class="first"><strong>Lista de fuentes autorizadas</strong>: si <em>Filtrar por dirección IP</em> está habilitado, esta subsección permite agregar direcciones o rangos de red.</p>
</li>
</ul>
<div class="admonition error">
<p class="first admonition-title">Error</p>
<p class="last">No se permitirá ninguna llamada saliente si <em>Filtrar por dirección IP</em> está habilitado y la lista correspondiente está vacía.</p>
</div>
<ul class="simple">
<li><p class="first"><strong>Lista de administradores de clientes</strong>: esta subsección permite gestionar las credenciales del portal para este cliente específico. Lea <a class="reference internal" href="index.html#acls"><span class="std std-ref">ACLs</span></a> para una mayor explicación sobre administradores de clientes restringidos.</p>
</li>
<li><p class="first"><strong>Lista de perfiles de tarifas</strong>: esta subsección permite gestionar los perfiles de tarifas que se utilizarán para facturar sus llamadas salientes.</p>
</li>
</ul>
<div class="admonition warning">
<p class="first admonition-title">Advertencia</p>
<p class="last">No se permitirá ninguna llamada saliente para este cliente a menos que haya un perfil de tarifas activo que pueda facturar la llamada específica.</p>
</div>
</div>
</div>
<span id="document-administration_portal/brand/clients/residential"></span><div class="section" id="residential">
<h4>Residencial<a class="headerlink" href="#residential" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Los clientes residenciales son un tipo de cliente más ligero que los <em>clientes vPBX</em>.</p>
<p>Su objetivo es proporcionar estos servicios a entornos residenciales:</p>
<ul class="simple">
<li><p class="first">Configurar uno o más dispositivos residenciales (dispositivos SIP).</p>
</li>
<li><p class="first">Configurar uno o más DDI.</p>
</li>
<li><p class="first"><strong>Realizar llamadas externas</strong> mostrando uno de esos DDI.</p>
</li>
<li><p class="first"><strong>Recibir llamadas externas</strong> a sus DDI.</p>
</li>
<li><p class="first">Enviar/Recibir faxes virtuales.</p>
</li>
<li><p class="first">Grabar llamadas.</p>
</li>
</ul>
<div class="admonition warning">
<p class="first admonition-title">Advertencia</p>
<p class="last">Sin usuarios, sin extensiones, sin llamadas internas, sin grupos de búsqueda, sin IVR... solo <strong>llamadas externas entrantes y salientes (y algunos servicios de voz)</strong>.</p>
</div>
<div class="admonition error">
<p class="first admonition-title">Error</p>
<p class="last">Los clientes residenciales y sus dispositivos <strong>DEBEN usar el dominio SIP de la marca en sus mensajes SIP</strong>.</p>
</div>
<div class="section" id="adding-editing-residential-clients">
<h5>Agregar/Editar clientes residenciales<a class="headerlink" href="#adding-editing-residential-clients" title="Enlazar permanentemente con este título">¶</a></h5>
<div class="admonition hint">
<p class="first admonition-title">Consejo</p>
<p class="last">Algunos campos descritos a continuación pueden no ser visibles dependiendo de las funcionalidades habilitadas.</p>
</div>
<p>Estos son los campos mostrados al <strong>agregar</strong> un nuevo cliente residencial:</p>
<blockquote>
<div><dl class="docutils">
<dt>Nombre</dt>
<dd><p class="first last">Usado para referenciar a este cliente en particular.</p>
</dd>
<dt>Método de facturación</dt>
<dd><p class="first last">Para elegir entre pospago, prepago y pseudo-prepago. &#8216;ninguno&#8217; desactiva la facturación.</p>
</dd>
<dt>Características</dt>
<dd><p class="first last">Habilitar/Deshabilitar el envío de faxes y la grabación de llamadas para este cliente en particular.</p>
</dd>
<dt>Idioma</dt>
<dd><p class="first last">Usado para elegir el idioma de las locuciones reproducidas.</p>
</dd>
<dt>Código de país</dt>
<dd><p class="first last">Código de país predeterminado para los DDI.</p>
</dd>
<dt>Zona horaria predeterminada</dt>
<dd><p class="first last">Usado para mostrar las fechas de los registros de llamadas.</p>
</dd>
<dt>Moneda</dt>
<dd><p class="first last">La moneda elegida se usará en el cálculo de precios, facturas, movimientos de saldo y operaciones de dinero restante de este cliente.</p>
</dd>
<dt>Transformación numérica</dt>
<dd><p class="first last">Describe la forma en que el cliente &#8220;hablará&#8221; y la forma en que el cliente quiere ser &#8220;hablado&#8221;.</p>
</dd>
<dt>Máximo de llamadas</dt>
<dd><p class="first last">Limita tanto las llamadas externas entrantes como salientes (0 para ilimitado).</p>
</dd>
<dt>Filtrar por dirección IP</dt>
<dd><p class="first last">Si se establece, la plataforma solo permitirá llamadas provenientes de IP/rangos o países permitidos.</p>
</dd>
<dt>Países permitidos por GeoIP</dt>
<dd><p class="first last">Si <em>Filtrar por dirección IP</em> está habilitado, se permitirá el tráfico de los países seleccionados.</p>
</dd>
<dt>Uso máximo diario</dt>
<dd><p class="first last">Limita las llamadas externas salientes cuando se alcanza este límite dentro de un día. A medianoche se restablecen los contadores y se reactivan las cuentas.</p>
</dd>
<dt>Correo electrónico</dt>
<dd><p class="first last">Se enviará un correo electrónico de notificación a la dirección dada cuando se alcance el uso máximo diario configurado. Dejar vacío para evitar la notificación.</p>
</dd>
</dl>
</div></blockquote>
<p>Al <strong>editar</strong> un cliente, se pueden configurar estos campos adicionales:</p>
<blockquote>
<div><dl class="docutils">
<dt>Datos de la factura</dt>
<dd><p class="first last">Todos los campos de este grupo se incluirán en las facturas generadas para este cliente. Esta sección también permite mostrar/ocultar detalles de facturación en el portal del cliente, como Facturas, Perfiles de Tarifas y Precio de llamadas externas.</p>
</dd>
<dt>DDI saliente</dt>
<dd><p class="first last">DDI de respaldo para llamadas externas salientes (puede ser anulado a nivel de dispositivo residencial).</p>
</dd>
<dt>Opciones de notificación</dt>
<dd><p class="first last">Este grupo permite elegir una plantilla de notificación tanto para faxes como notificaciones de correo de voz.</p>
</dd>
<dt>Permitir al cliente eliminar grabaciones</dt>
<dd><p class="first last">Se muestra solo si la función <em>Grabación</em> está habilitada para el cliente, muestra/oculta el botón de eliminación de grabaciones en la sección <em>Grabaciones de llamadas</em> del cliente.</p>
</dd>
</dl>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p>Aparte de estos campos, el operador principal (<em>también conocido como</em> Dios) también verá un grupo de <strong>Datos de la plataforma</strong> que permite:</p>
<ul class="last simple">
<li><p class="first">Elegir un conjunto específico de retransmisión de medios para el cliente.</p>
</li>
<li><p class="first">Elija la forma en que las llamadas de este cliente se distribuirán entre los servidores de aplicaciones existentes (<strong>basado en hash</strong> es recomendado).</p>
</li>
</ul>
</div>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Para llamadas salientes, la plataforma usará el CLID proporcionado por el cliente siempre que se considere válido, de lo contrario se usará el DDI de respaldo. La plataforma considerará válido cualquier CLID que coincida con uno de los DDI del cliente.</p>
</div>
</div>
<div class="section" id="additional-subsections">
<h5>Subsecciones adicionales<a class="headerlink" href="#additional-subsections" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Cada entrada en esta tabla tiene estas opciones adicionales:</p>
<ul class="simple">
<li><p class="first"><strong>Lista de fuentes autorizadas</strong>: si <em>Filtrar por dirección IP</em> está habilitado, esta subsección permite agregar direcciones o rangos de red.</p>
</li>
</ul>
<div class="admonition error">
<p class="first admonition-title">Error</p>
<p class="last">No se permitirá ninguna llamada saliente si <em>Filtrar por dirección IP</em> está habilitado y la lista correspondiente está vacía.</p>
</div>
<ul class="simple">
<li><p class="first"><strong>Lista de administradores de clientes</strong>: esta subsección permite gestionar las credenciales del portal para este cliente específico. Lea <a class="reference internal" href="index.html#acls"><span class="std std-ref">ACLs</span></a> para una mayor explicación sobre administradores de clientes restringidos.</p>
</li>
<li><p class="first"><strong>Lista de perfiles de tarifas</strong>: esta subsección permite gestionar los perfiles de tarifas que se utilizarán para facturar sus llamadas salientes.</p>
</li>
</ul>
<div class="admonition warning">
<p class="first admonition-title">Advertencia</p>
<p class="last">No se permitirá ninguna llamada saliente para este cliente a menos que haya un perfil de tarifas activo que pueda facturar la llamada específica.</p>
</div>
</div>
</div>
<span id="document-administration_portal/brand/clients/retail"></span><div class="section" id="retail">
<span id="retail-clients"></span><h4>Retail<a class="headerlink" href="#retail" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Los clientes Retail son un tipo de cliente aún más ligero que los <em>clientes residenciales</em>.</p>
<p>Solo proporcionan un servicio de troncal SIP que incluye estas características:</p>
<ul class="simple">
<li><p class="first">Configurar una o más cuentas retail (dispositivos SIP).</p>
</li>
<li><p class="first">Configurar uno o más DDI.</p>
</li>
<li><p class="first"><strong>Realizar llamadas externas</strong> mostrando uno de esos DDI.</p>
</li>
<li><p class="first"><strong>Recibir llamadas externas</strong> a sus DDI.</p>
</li>
<li><p class="first">Grabar llamadas.</p>
</li>
</ul>
<div class="admonition warning">
<p class="first admonition-title">Advertencia</p>
<p class="last">Sin usuarios, sin extensiones, sin llamadas internas, sin grupos de búsqueda, sin IVR, sin correo de voz... solo <strong>llamadas externas entrantes y salientes</strong>.</p>
</div>
<div class="admonition error">
<p class="first admonition-title">Error</p>
<p class="last">Los clientes Retail y sus cuentas <strong>DEBEN usar el dominio SIP de la marca en sus mensajes SIP</strong>.</p>
</div>
<div class="section" id="differences-between-retail-and-residential-clients">
<span id="id1"></span><h5>Diferencias entre clientes retail y residenciales<a class="headerlink" href="#differences-between-retail-and-residential-clients" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Hay una diferencia clave importante entre estos dos clientes: <strong>las llamadas de clientes retail no atraviesan ningún servidor de aplicaciones</strong>.</p>
<p>Como resultado:</p>
<ul class="simple">
<li><p class="first">No hay servicio de fax virtual para clientes retail.</p>
</li>
<li><p class="first">No hay servicio de correo de voz para clientes retail.</p>
</li>
</ul>
<p>Pero también tienen beneficios que los hacen ideales para algunas situaciones:</p>
<ul class="simple">
<li><p class="first">No hay travesía de servidor de aplicaciones, mucha menos carga para la plataforma.</p>
</li>
<li><p class="first">Transcodificación de llamadas como una característica.</p>
</li>
<li><p class="first">Etiquetas de enrutamiento para diferentes enrutamientos de llamadas para los mismos destinos.</p>
</li>
</ul>
<div class="admonition warning">
<p class="first admonition-title">Advertencia</p>
<p class="last">Los dispositivos residenciales están obligados a usar el códec seleccionado en su configuración (solo uno). Los clientes retail, por otro lado, pueden usar los códecs que ofrecen en su SDP y los códecs seleccionados en IvozProvider: IvozProvider hará la transcodificación cuando sea necesario.</p>
</div>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Usa el tipo de cliente retail a menos que necesites alguno de los servicios proporcionados por servidores de aplicaciones (fax o correos de voz).</p>
</div>
</div>
<div class="section" id="adding-editing-retail-clients">
<h5>Agregar/Editar clientes retail<a class="headerlink" href="#adding-editing-retail-clients" title="Enlazar permanentemente con este título">¶</a></h5>
<div class="admonition hint">
<p class="first admonition-title">Consejo</p>
<p class="last">Algunos campos descritos a continuación pueden no ser visibles dependiendo de las funcionalidades habilitadas.</p>
</div>
<p>Estos son los campos mostrados al <strong>agregar</strong> un nuevo cliente retail:</p>
<blockquote>
<div><dl class="docutils">
<dt>Nombre</dt>
<dd><p class="first last">Usado para referenciar a este cliente en particular.</p>
</dd>
<dt>Método de facturación</dt>
<dd><p class="first last">Para elegir entre pospago, prepago y pseudo-prepago. &#8216;ninguno&#8217; desactiva la facturación.</p>
</dd>
<dt>Idioma</dt>
<dd><p class="first last">Usado para elegir el idioma de las locuciones reproducidas.</p>
</dd>
<dt>Código de país</dt>
<dd><p class="first last">Código de país predeterminado para los DDI.</p>
</dd>
<dt>Zona horaria predeterminada</dt>
<dd><p class="first last">Usado para mostrar las fechas de los registros de llamadas.</p>
</dd>
<dt>Moneda</dt>
<dd><p class="first last">La moneda elegida se usará en el cálculo de precios, facturas, movimientos de saldo y operaciones de dinero restante de este cliente.</p>
</dd>
<dt>Transformación numérica</dt>
<dd><p class="first last">Describe la forma en que el cliente &#8220;hablará&#8221; y la forma en que el cliente quiere ser &#8220;hablado&#8221;.</p>
</dd>
<dt>Máximo de llamadas</dt>
<dd><p class="first last">Limita tanto las llamadas externas entrantes como salientes (0 para ilimitado).</p>
</dd>
<dt>Filtrar por dirección IP</dt>
<dd><p class="first last">Si se establece, la plataforma solo permitirá llamadas provenientes de IP/rangos o países permitidos.</p>
</dd>
<dt>Países permitidos por GeoIP</dt>
<dd><p class="first last">Si <em>Filtrar por dirección IP</em> está habilitado, se permitirá el tráfico de los países seleccionados.</p>
</dd>
<dt>Uso máximo diario</dt>
<dd><p class="first last">Limita las llamadas externas salientes cuando se alcanza este límite dentro de un día. A medianoche se restablecen los contadores y se reactivan las cuentas.</p>
</dd>
<dt>Correo electrónico</dt>
<dd><p class="first last">Se enviará un correo electrónico de notificación a la dirección dada cuando se alcance el uso máximo diario configurado. Dejar vacío para evitar la notificación.</p>
</dd>
</dl>
</div></blockquote>
<p>Al <strong>editar</strong> un cliente, se pueden configurar estos campos adicionales:</p>
<blockquote>
<div><dl class="docutils">
<dt>Datos de la factura</dt>
<dd><p class="first last">Todos los campos de este grupo se incluirán en las facturas generadas para este cliente. Esta sección también permite mostrar/ocultar detalles de facturación en el portal del cliente, como Facturas, Perfiles de Tarifas y Precio de llamadas externas.</p>
</dd>
<dt>DDI saliente</dt>
<dd><p class="first last">DDI de respaldo para llamadas externas salientes (puede ser anulado a nivel de dispositivo residencial).</p>
</dd>
<dt>Etiquetas de enrutamiento</dt>
<dd><p class="first last">Este campo permite habilitar etiquetas de enrutamiento para este cliente específico. Las llamadas precedidas por estas etiquetas de enrutamiento se valorarán y enrutará de manera diferente.</p>
</dd>
<dt>Transcodificación de audio</dt>
<dd><p class="first last">Este campo permite habilitar códecs para este cliente específico. Estos códecs se agregarán a los ofrecidos por el cliente en su SDP.</p>
</dd>
<dt>Permitir al cliente eliminar grabaciones</dt>
<dd><p class="first last">Se muestra solo si la función <em>Grabación</em> está habilitada para el cliente, muestra/oculta el botón de eliminación de grabaciones en la sección <em>Grabaciones de llamadas</em> del cliente.</p>
</dd>
</dl>
</div></blockquote>
<div class="admonition error">
<p class="first admonition-title">Error</p>
<p class="last">Seleccionar códecs en <strong>Transcodificación de audio</strong> puede llevar a una transcodificación innecesaria. Seleccionar TODOS los códecs siempre es una idea horrible. No selecciones ningún códec a menos que este cliente no admita un códec específico que sea obligatorio para un destino/carrier necesario.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p>Aparte de estos campos, el operador principal (<em>también conocido como</em> Dios) también verá un grupo de <strong>Datos de la plataforma</strong> que permite:</p>
<ul class="last simple">
<li><p class="first">Elegir un conjunto específico de retransmisión de medios para el cliente.</p>
</li>
</ul>
</div>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Para llamadas salientes, la plataforma usará el CLID proporcionado por el cliente siempre que se considere válido, de lo contrario se usará el DDI de respaldo. La plataforma considerará válido cualquier CLID que coincida con uno de los DDI del cliente.</p>
</div>
</div>
<div class="section" id="additional-subsections">
<h5>Subsecciones adicionales<a class="headerlink" href="#additional-subsections" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Cada entrada en esta tabla tiene estas opciones adicionales:</p>
<ul class="simple">
<li><p class="first"><strong>Lista de fuentes autorizadas</strong>: si <em>Filtrar por dirección IP</em> está habilitado, esta subsección permite agregar direcciones o rangos de red.</p>
</li>
</ul>
<div class="admonition error">
<p class="first admonition-title">Error</p>
<p class="last">No se permitirá ninguna llamada saliente si <em>Filtrar por dirección IP</em> está habilitado y la lista correspondiente está vacía.</p>
</div>
<ul class="simple">
<li><p class="first"><strong>Lista de administradores de clientes</strong>: esta subsección permite gestionar las credenciales del portal para este cliente específico. Lea <a class="reference internal" href="index.html#acls"><span class="std std-ref">ACLs</span></a> para una mayor explicación sobre administradores de clientes restringidos.</p>
</li>
<li><p class="first"><strong>Lista de perfiles de tarifas</strong>: esta subsección permite gestionar los perfiles de tarifas que se utilizarán para facturar sus llamadas salientes.</p>
</li>
</ul>
<div class="admonition warning">
<p class="first admonition-title">Advertencia</p>
<p class="last">No se permitirá ninguna llamada saliente para este cliente a menos que haya un perfil de tarifas activo que pueda facturar la llamada específica.</p>
</div>
</div>
</div>
<span id="document-administration_portal/brand/clients/wholesale"></span><div class="section" id="wholesale">
<span id="wholesale-clients"></span><h4>Wholesale<a class="headerlink" href="#wholesale" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Los clientes Wholesale son el tipo de cliente más simple en IvozProvider.</p>
<p>Permite servicios de trunking con Carriers sin ninguna característica de servidor de aplicaciones, enfocándose en la concurrencia y la calidad en lugar de tener muchos servicios.</p>
<blockquote>
<div><ul class="simple">
<li><p class="first">Solo hacer llamadas salientes.</p>
</li>
<li><p class="first">Solo autenticación IP (sin registro, sin autenticación SIP).</p>
</li>
<li><p class="first">Las llamadas van directamente de los usuarios a los trunks, sin ningún servidor de aplicaciones involucrado.</p>
</li>
<li><p class="first">Soporte para etiquetas de enrutamiento (el cliente puede elegir la ruta de salida a usar)</p>
</li>
<li><p class="first">Soporte para transcodificación de audio.</p>
</li>
</ul>
</div></blockquote>
<div class="admonition warning">
<p class="first admonition-title">Advertencia</p>
<p class="last">Sin usuarios, sin extensiones, sin llamadas internas, sin DDI, sin correo de voz, sin desvíos de llamadas... solo <strong>llamadas externas salientes</strong>.</p>
</div>
<div class="admonition error">
<p class="first admonition-title">Error</p>
<p class="last">Los clientes mayoristas <strong>no necesitan usar el dominio SIP de la marca en sus mensajes SIP</strong>.</p>
</div>
<div class="section" id="adding-editing-clients">
<h5>Agregar/Editar clientes<a class="headerlink" href="#adding-editing-clients" title="Enlazar permanentemente con este título">¶</a></h5>
<div class="admonition hint">
<p class="first admonition-title">Consejo</p>
<p class="last">Algunos campos descritos a continuación pueden no ser visibles dependiendo de las funcionalidades habilitadas.</p>
</div>
<p>Estos son los campos mostrados al <strong>agregar</strong> un nuevo cliente mayorista:</p>
<blockquote>
<div><dl class="docutils">
<dt>Nombre</dt>
<dd><p class="first last">Usado para referenciar a este cliente en particular.</p>
</dd>
<dt>Método de facturación</dt>
<dd><p class="first last">Para elegir entre pospago, prepago y pseudo-prepago. &#8216;ninguno&#8217; desactiva la facturación.</p>
</dd>
<dt>Idioma</dt>
<dd><p class="first last">Usado para elegir el idioma de las locuciones reproducidas.</p>
</dd>
<dt>Zona horaria predeterminada</dt>
<dd><p class="first last">Usado para mostrar las fechas de los registros de llamadas.</p>
</dd>
<dt>Moneda</dt>
<dd><p class="first last">La moneda elegida se usará en el cálculo de precios, facturas, movimientos de saldo y operaciones de dinero restante de este cliente.</p>
</dd>
<dt>Transformación numérica</dt>
<dd><p class="first last">Describe la forma en que el cliente &#8220;hablará&#8221; y la forma en que el cliente quiere ser &#8220;hablado&#8221;.</p>
</dd>
<dt>Máximo de llamadas</dt>
<dd><p class="first last">Limita las llamadas externas salientes (0 para ilimitado).</p>
</dd>
<dt>Uso máximo diario</dt>
<dd><p class="first last">Limita las llamadas externas salientes cuando se alcanza este límite dentro de un día. A medianoche se restablecen los contadores y se reactivan las cuentas.</p>
</dd>
<dt>Correo electrónico</dt>
<dd><p class="first last">Se enviará un correo electrónico de notificación a la dirección dada cuando se alcance el uso máximo diario configurado. Dejar vacío para evitar la notificación.</p>
</dd>
</dl>
</div></blockquote>
<p>Al <strong>editar</strong> un cliente, se pueden configurar estos campos adicionales:</p>
<blockquote>
<div><dl class="docutils">
<dt>Datos de la factura</dt>
<dd><p class="first last">Todos los campos de este grupo se incluirán en las facturas generadas para este cliente. Esta sección también permite mostrar/ocultar detalles de facturación en el portal del cliente, como Facturas, Perfiles de Tarifas y Precio de llamadas externas.</p>
</dd>
<dt>Etiquetas de enrutamiento</dt>
<dd><p class="first last">Este campo permite habilitar etiquetas de enrutamiento para este cliente específico. Las llamadas precedidas por estas etiquetas de enrutamiento se calificarán y enrutarán de manera diferente.</p>
</dd>
<dt>Transcodificación de audio</dt>
<dd><p class="first last">Este campo permite habilitar códecs para este cliente específico. Estos códecs se agregarán a los ofrecidos por el cliente en su SDP.</p>
</dd>
</dl>
</div></blockquote>
<div class="admonition error">
<p class="first admonition-title">Error</p>
<p class="last">Seleccionar códecs en <strong>Transcodificación de audio</strong> puede llevar a una transcodificación innecesaria. Seleccionar TODOS los códecs siempre es una idea horrible. No selecciones ningún códec a menos que este cliente no soporte un códec específico que sea obligatorio para un destino/carrier necesario.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p>Aparte de estos campos, el operador principal (<em>también conocido como</em> Dios) también verá un grupo de <strong>Datos de la plataforma</strong> que permite:</p>
<ul class="last simple">
<li><p class="first">Elegir un conjunto específico de retransmisión de medios para el cliente.</p>
</li>
</ul>
</div>
</div>
<div class="section" id="additional-subsections">
<h5>Subsecciones adicionales<a class="headerlink" href="#additional-subsections" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Cada entrada en esta tabla tiene estas opciones adicionales:</p>
<ul class="simple">
<li><p class="first"><strong>Lista de fuentes autorizadas</strong>: la identificación del cliente se realizará buscando la dirección IP de origen en esta tabla.</p>
</li>
<li><p class="first"><strong>Lista de administradores de clientes</strong>: esta subsección permite gestionar las credenciales del portal para este cliente específico. Lea <a class="reference internal" href="index.html#acls"><span class="std std-ref">ACLs</span></a> para una mayor explicación sobre administradores de clientes restringidos.</p>
</li>
<li><p class="first"><strong>Lista de perfiles de tarifas</strong>: esta subsección permite gestionar los perfiles de tarifas que se utilizarán para facturar sus llamadas salientes.</p>
</li>
</ul>
<div class="admonition warning">
<p class="first admonition-title">Advertencia</p>
<p class="last">No se permitirá ninguna llamada saliente para este cliente a menos que haya un perfil de tarifas activo que pueda facturar la llamada específica.</p>
</div>
</div>
</div>
<span id="document-administration_portal/brand/clients/operators"></span><div class="section" id="client-operators">
<span id="id1"></span><h4>Operadores de Clientes<a class="headerlink" href="#client-operators" title="Enlazar permanentemente con este título">¶</a></h4>
<p>La subsección <strong>Lista de operadores de clientes</strong> permite agregar/editar/eliminar credenciales para el acceso al portal del cliente.</p>
<p>Lea <a class="reference internal" href="index.html#acls"><span class="std std-ref">ACLs</span></a> para una mayor explicación sobre administradores restringidos.</p>
</div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Los tipos de clientes disponibles se pueden configurar a través de <em>Características de la marca</em>.</p>
</div>
</div>
<span id="document-administration_portal/brand/providers/index"></span><div class="section" id="providers">
<h3>Proveedores<a class="headerlink" href="#providers" title="Enlazar permanentemente con este título">¶</a></h3>
<p>El operador de la marca debe llegar a acuerdos con los proveedores de VoIP para realizar llamadas de sus clientes y recibir llamadas a los DDIs de sus clientes.</p>
<p>Dependiendo de la dirección de la llamada, se pueden dividir en:</p>
<div class="toctree-wrapper compound">
<span id="document-administration_portal/brand/providers/carriers"></span><div class="section" id="carriers">
<span id="id1"></span><h4>Carriers<a class="headerlink" href="#carriers" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Los carriers se utilizan para realizar llamadas salientes externas.</p>
<p>Estos son los campos que definen un carrier:</p>
<div class="admonition hint">
<p class="first admonition-title">Consejo</p>
<p>Algunos campos descritos a continuación pueden no ser visibles dependiendo de las funcionalidades habilitadas.</p>
<dl class="last docutils">
<dt>Nombre</dt>
<dd><p class="first last">Usado para referenciar este Carrier.</p>
</dd>
<dt>Descripción</dt>
<dd><p class="first last">Campo opcional con cualquier información adicional requerida.</p>
</dd>
<dt>Transformación Numérica</dt>
<dd><p class="first last">Transformación que se aplicará al origen y destino de los números salientes que usan este Carrier (ver <a class="reference internal" href="index.html#numeric-transformations"><span class="std std-ref">Transformaciones numéricas</span></a>).</p>
</dd>
<dt>Calcular costo</dt>
<dd><p class="first last">Si se establece, IvozProvider calculará el costo de la llamada utilizando el perfil de calificación activo del carrier.</p>
</dd>
<dt>Moneda</dt>
<dd><p class="first last">La moneda elegida se utilizará en el cálculo de costos, movimientos de saldo y operaciones de dinero restantes de este carrier.</p>
</dd>
<dt>Socket local</dt>
<dd><p class="first last">La dirección seleccionada se usará como dirección de origen para la señalización con este carrier. El operador de la marca puede elegir entre las direcciones asignadas por el operador principal a través de <a class="reference internal" href="index.html#brands"><span class="std std-ref">Marcas</span></a>. Lea <a class="reference internal" href="index.html#proxy-trunks"><span class="std std-ref">Proxies de Salida</span></a> para más detalles.</p>
</dd>
<dt>Conjunto de retransmisión de medios</dt>
<dd><p class="first last">Los retransmisores de medios se pueden agrupar en conjuntos para reservar capacidades o con un propósito geográfico. El conjunto seleccionado se usará en llamadas a través de este carrier específico. Este campo solo lo ve el administrador global (también conocido como Dios).</p>
</dd>
<dt>Estado</dt>
<dd><p class="first last">Los servidores de carrier que no responden se desactivan hasta que respondan a la solicitud de ping OPTIONS. Este icono es verde si todos los servidores de carrier de un carrier dado están activos, rojo si todos están inactivos y amarillo si solo algunos de ellos están inactivos.</p>
</dd>
</dl>
</div>
<div class="admonition hint">
<p class="first admonition-title">Consejo</p>
<p class="last">Si desea que los medios del lado del carrier sean manejados por el mismo conjunto de retransmisión de medios que el lado del cliente, seleccione &#8220;Predeterminado del cliente&#8221;.</p>
</div>
<div class="section" id="cost-calculation">
<span id="id2"></span><h5>Cálculo de costos<a class="headerlink" href="#cost-calculation" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Si <em>Calcular costo</em> está habilitado, <em>Planes de calificación</em> se pueden vincular a los carriers para el cálculo de costos (ver <a class="reference internal" href="index.html#assigning-rating-plans-to-carriers"><span class="std std-ref">Asignación de planes de tarifas a operadores</span></a>) y un saldo está adjunto a cada carrier. Cada vez que se use un carrier para realizar una llamada, este saldo se reducirá utilizando el perfil de calificación activo del carrier.</p>
<p>Además:</p>
<ul class="simple">
<li><p class="first">El saldo del carrier se puede aumentar/disminuir con <em>Operaciones de saldo</em>.</p>
</li>
<li><p class="first">Estas operaciones se enumeran en <em>Lista de movimientos de saldo</em>.</p>
</li>
<li><p class="first"><em>Notificaciones de saldo</em> se pueden configurar para ser notificadas cuando el saldo alcance un umbral dado.</p>
</li>
</ul>
<div class="admonition important">
<p class="first admonition-title">Importante</p>
<p class="last">Contrario a los saldos de los clientes, <strong>los saldos (negativos/cero) de los carriers no deshabilitarán el carrier</strong>.</p>
</div>
</div>
<div class="section" id="carrier-servers">
<h5>Servidores de carrier<a class="headerlink" href="#carrier-servers" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Un <strong>Servidor de carrier</strong> es un servidor SIP asociado a un proveedor de IP. Los servidores de carrier se utilizan para realizar llamadas salientes utilizando <a class="reference internal" href="index.html#outgoing-routings"><span class="std std-ref">Enrutamientos Salientes</span></a>.</p>
<blockquote>
<div><dl class="docutils">
<dt>Proxy SIP</dt>
<dd><p class="first last">Dirección IP (o registro DNS) del servidor de carrier. También puede especificar un puerto si es diferente de 5060.</p>
</dd>
<dt>Proxy de salida</dt>
<dd><p class="first last">Generalmente esto se deja vacío. Se puede llenar con la dirección IP del dominio del <strong>Proxy SIP</strong> (para evitar la resolución DNS, pero manteniendo el dominio en los mensajes SIP). Funciona como un proxy web: en lugar de enviar los mensajes SIP al <strong>Proxy SIP</strong> de destino, se enviarán a la IP:PUERTO de este campo.</p>
</dd>
<dt>Esquema URI</dt>
<dd><p class="first last">Los esquemas compatibles son sip y sips. Use &#8216;sip&#8217; en caso de duda.</p>
</dd>
<dt>Transporte</dt>
<dd><p class="first last">Protocolos de transporte compatibles. Use &#8216;udp&#8217; en caso de duda.</p>
</dd>
<dt>Requiere autenticación</dt>
<dd><p class="first last">Algunos carriers validan nuestra plataforma por IP, otros requieren cada sesión que queremos establecer. Para este último caso, esta sección permite configurar usuario y contraseña para esta autenticación.</p>
</dd>
<dt>Encabezado de origen de llamada</dt>
<dd><p class="first last">Algunos proveedores obtienen el origen del encabezado SIP From. Otros usan el encabezado From para la contabilidad y necesitan encabezados adicionales para identificar el origen. En caso de duda, deje <strong>PAI</strong> marcado.</p>
</dd>
<dt>Personalización del encabezado From</dt>
<dd><p class="first last">Para aquellos proveedores que muestran el origen en otros encabezados (PAI/RPID), es posible que soliciten que el usuario From tenga el código de cuenta que se está utilizando y del dominio su dominio SIP. En caso de duda, deje vacío.</p>
</dd>
<dt>Estado</dt>
<dd><p class="first last">Los servidores de carrier que no responden se desactivan hasta que respondan a una solicitud de ping OPTIONS. Este icono muestra si el servidor de carrier está activo o inactivo (y se le envía un ping a través de un mensaje OPTIONS hasta que vuelva).</p>
</dd>
</dl>
</div></blockquote>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Hay muchos campos para establecer <em>peering</em> con múltiples tipos de carriers, pero generalmente con el nombre y el Proxy SIP será suficiente (para aquellos que validan nuestra plataforma por IP) y Autenticación (para aquellos que no lo hacen).</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Advertencia</p>
<p class="last">En caso de definir múltiples servidores de carrier para un solo carrier, IvozProvider equilibrará y conmutará por error utilizando todos ellos. Al igual que con los servidores de aplicaciones, deshabilitará aquellos que no respondan a nuestras solicitudes.</p>
</div>
</div>
<div class="section" id="list-of-external-calls">
<h5>Lista de llamadas externas<a class="headerlink" href="#list-of-external-calls" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Puede ver las llamadas externas realizadas a través de un carrier dado utilizando esta opción. Verá los mismos campos que en <a class="reference internal" href="index.html#external-calls"><span class="std std-ref">Llamadas externas</span></a> pero filtrados para el carrier elegido.</p>
<div class="admonition error">
<p class="first admonition-title">Error</p>
<p class="last">Es obligatorio tener <strong>una URL de marca válida</strong> para utilizar la función <em>Exportar a CSV</em> en esta subsección.</p>
</div>
</div>
</div>
<span id="document-administration_portal/brand/providers/ddi_providers"></span><div class="section" id="ddi-providers">
<span id="id1"></span><h4>Proveedores DDI<a class="headerlink" href="#ddi-providers" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Los proveedores DDI son las entidades SIP que contactarán con la plataforma cuando alguien llame a uno de los DDIs de nuestros clientes.</p>
<p>Estos son los campos que definen un carrier:</p>
<div class="admonition hint">
<p class="first admonition-title">Consejo</p>
<p>Algunos campos descritos a continuación pueden no ser visibles dependiendo de las funcionalidades habilitadas.</p>
<dl class="last docutils">
<dt>Nombre</dt>
<dd><p class="first last">Usado para referenciar este Carrier.</p>
</dd>
<dt>Descripción</dt>
<dd><p class="first last">Campo opcional con cualquier información adicional requerida.</p>
</dd>
<dt>Transformación Numérica</dt>
<dd><p class="first last">Transformación que se aplicará al origen y destino de los números salientes que usan este Carrier (ver <a class="reference internal" href="index.html#numeric-transformations"><span class="std std-ref">Transformaciones numéricas</span></a>).</p>
</dd>
<dt>Socket local</dt>
<dd><p class="first last">La dirección seleccionada se usará como dirección de origen para la señalización con este proveedor DDI. El operador de la marca puede elegir entre las direcciones asignadas por el operador principal a través de <a class="reference internal" href="index.html#brands"><span class="std std-ref">Marcas</span></a>. Lea <a class="reference internal" href="index.html#proxy-trunks"><span class="std std-ref">Proxies de Salida</span></a> para más detalles.</p>
</dd>
<dt>Conjunto de retransmisión de medios</dt>
<dd><p class="first last">Los retransmisores de medios se pueden agrupar en conjuntos para reservar capacidades o con un propósito geográfico. El conjunto seleccionado se usará en llamadas a través de este proveedor DDI específico. Este campo solo lo ve el administrador global (también conocido como Dios).</p>
</dd>
</dl>
</div>
<div class="admonition hint">
<p class="first admonition-title">Consejo</p>
<p class="last">Si desea que los medios del lado del carrier sean manejados por el mismo conjunto de retransmisión de medios que el lado del cliente, seleccione &#8220;Predeterminado del cliente&#8221;.</p>
</div>
<div class="section" id="ddi-provider-addresses">
<h5>Direcciones del proveedor DDI<a class="headerlink" href="#ddi-provider-addresses" title="Enlazar permanentemente con este título">¶</a></h5>
<p>La plataforma reconocerá un proveedor DDI comparando la dirección de origen del mensaje SIP con las direcciones en esta lista:</p>
<blockquote>
<div><dl class="docutils">
<dt>Dirección IP</dt>
<dd><p class="first last">Usado para referenciar este Carrier.</p>
</dd>
<dt>Descripción</dt>
<dd><p class="first last">Campo opcional con cualquier información adicional requerida.</p>
</dd>
</dl>
</div></blockquote>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Una vez que se reconozca el proveedor DDI, se aplicarán sus transformaciones numéricas y se buscará el DDI.</p>
</div>
</div>
<div class="section" id="ddi-provider-registrations">
<h5>Registros del proveedor DDI<a class="headerlink" href="#ddi-provider-registrations" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Algunos proveedores DDI requieren un <a class="reference external" href="https://tools.ietf.org/html/rfc3261#section-10">Registro SIP</a> activo para recibir llamadas entrantes a nuestros DDIs. Algunos de ellos, incluso requieren este registro para procesar nuestras llamadas salientes a través de sus servicios.</p>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">IvozProvider admite cualquier tipo de <em>peering</em>, pero recomendamos encarecidamente <em>peer to peer peerings</em>: sin autenticación, sin registro y validado por IP. Esto evitará tráfico innecesario (autenticación en cada sesión y registros periódicos) y simplifica su configuración, dejando esta lista vacía.</p>
</div>
<p>Para definir un registro, se muestran estos campos:</p>
<blockquote>
<div><dl class="docutils">
<dt>Nombre de usuario</dt>
<dd><p class="first last">Número de cuenta o similar proporcionado por el proveedor que requiere registro SIP.</p>
</dd>
<dt>Dominio</dt>
<dd><p class="first last">Dominio o IP del servidor de registro. Generalmente el mismo que el proxy SIP del servidor Peer.</p>
</dd>
<dt>Contraseña</dt>
<dd><p class="first last">Contraseña utilizada en el proceso de autenticación.</p>
</dd>
<dt>Nombre de usuario de contacto aleatorio</dt>
<dd><p class="first last">Si se establece, no se necesitará un nombre de usuario de contacto ya que se usará una cadena aleatoria. Se supone que el proveedor DDI usará el DDI llamado en el R-URI en lugar de esta cadena aleatoria.</p>
</dd>
<dt>Nombre de usuario de contacto</dt>
<dd><p class="first last">Esto se usará en el encabezado de contacto del mensaje REGISTER, haciendo que el proveedor DDI nos contacte con esto en el R-URI.</p>
</dd>
<dt>Nombre de usuario de autenticación</dt>
<dd><p class="first last">Usuario de autenticación. La mayoría de las veces es el mismo que el nombre de usuario, por lo que se recomienda dejarlo vacío.</p>
</dd>
<dt>URI del servidor de registro</dt>
<dd><p class="first last">Generalmente esto se puede dejar vacío, ya que se puede obtener del Dominio. Si no es el caso, ingrese la dirección IP con el prefijo &#8216;sip:&#8217;.</p>
</dd>
<dt>Reino</dt>
<dd><p class="first last">Deje vacío para aceptar el reino de autenticación propuesto por el proveedor. Defina solo si está familiarizado con el mecanismo de autenticación utilizado en SIP.</p>
</dd>
<dt>Expirar</dt>
<dd><p class="first last">Tiempo de expiración de registro sugerido por defecto.</p>
</dd>
</dl>
</div></blockquote>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Similar a los servidores Carrier, hay muchos campos en la pantalla. Debe tener en cuenta que la mayoría de los proveedores no requieren registro, y aquellos que lo hacen, solo usarán usuario, dominio y contraseña.</p>
</div>
</div>
</div>
</div>
</div>
<span id="document-administration_portal/brand/routing/index"></span><div class="section" id="routing">
<h3>Enrutamiento<a class="headerlink" href="#routing" title="Enlazar permanentemente con este título">¶</a></h3>
<p>El enrutamiento es el proceso en el cual se elige un transportista para realizar una llamada saliente externa.</p>
<p>Todos estos conceptos se tienen en cuenta:</p>
<div class="toctree-wrapper compound">
<span id="document-administration_portal/brand/routing/outgoing_routings"></span><div class="section" id="outgoing-routings">
<span id="routes-weights"></span><span id="id1"></span><h4>Enrutamientos Salientes<a class="headerlink" href="#outgoing-routings" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Esta es la sección principal en la que se definen las políticas de enrutamiento.</p>
<p>Estos son los campos que definen un enrutamiento saliente:</p>
<blockquote>
<div><dl class="docutils">
<dt>Cliente</dt>
<dd><p class="first last">¿Debe esta ruta aplicarse a todos los clientes o solo a un cliente específico?</p>
</dd>
<dt>Etiqueta de Enrutamiento</dt>
<dd><p class="first last">Las etiquetas de enrutamiento permiten a los clientes llamar al mismo destino a través de diferentes transportistas. Este campo hace que la ruta sea válida para una sola etiqueta de enrutamiento (o para ninguna).</p>
</dd>
<dt>Destino de la llamada</dt>
<dd><p class="first last">Este grupo permite seleccionar si esta ruta se aplica solo a un patrón de destino, un grupo o faxes.</p>
</dd>
<dt>Tipo de ruta</dt>
<dd><p class="first last">Hay tres tipos de rutas: estática, LCR y bloque. En <em>estática</em>, solo se selecciona un transportista. En <em>LCR</em>, se pueden seleccionar varios transportistas. En <em>bloque</em>, no se selecciona ningún transportista ya que la llamada será rechazada.</p>
</dd>
<dt>Prioridad</dt>
<dd><p class="first last">Si una llamada coincide con varias rutas, se realizará utilizando la ruta saliente con menor prioridad, siempre que esté disponible.</p>
</dd>
<dt>Peso</dt>
<dd><p class="first last">Si una llamada coincide con varias rutas con igual prioridad, el peso determinará la proporción de llamadas que utilizarán una ruta u otra.</p>
</dd>
<dt>Detenedor</dt>
<dd><p class="first last">Si una llamada coincide con una ruta marcada como detenedor, se ignorarán las rutas coincidentes con mayor prioridad. <strong>Las rutas coincidentes con la MISMA prioridad SÍ se aplicarán</strong>.</p>
</dd>
</dl>
</div></blockquote>
<div class="section" id="routing-selection-logic">
<h5>Lógica de selección de enrutamiento<a class="headerlink" href="#routing-selection-logic" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Cuando un cliente A llama a un destino B:</p>
<ol class="arabic simple">
<li><p class="first">Se seleccionan rutas <em>Aplicar a todos los clientes</em> con el patrón de destino B.</p>
</li>
<li><p class="first">Se seleccionan rutas <em>Aplicar a todos los clientes</em> con grupo que contiene el destino B.</p>
</li>
<li><p class="first">Se seleccionan rutas <em>Específicas del cliente A</em> con el patrón de destino B.</p>
</li>
<li><p class="first">Se seleccionan rutas <em>Específicas del cliente A</em> con grupo que contiene el destino B.</p>
</li>
<li><p class="first">Todas estas rutas se ordenan utilizando <em>Prioridad</em> (se aplica primero la menor prioridad).</p>
</li>
<li><p class="first">Si se ha seleccionado alguna ruta de bloqueo, la llamada se rechaza.</p>
</li>
<li><p class="first">La ruta con menor prioridad (por ejemplo, prio Y) marcada como <em>Detenedor</em> (si la hay), provocará el descarte de rutas con prioridad mayor que Y+1.</p>
</li>
<li><p class="first">La llamada se enrutarán utilizando las rutas que queden después de este proceso, la prioridad determinará el proceso de conmutación por error, que determinará el equilibrio de carga (ver abajo).</p>
</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p>Como se describe arriba <strong>Todas las rutas de clientes se aplican a todos los clientes</strong>, incluso si tienen rutas coincidentes específicas:</p>
<ul class="last simple">
<li><p class="first">Utilice rutas de prioridad y detenedores para lograr la estrategia de enrutamiento <em>Clientes con rutas específicas no usan rutas de todos los clientes</em>.</p>
</li>
<li><p class="first">Si desea lograr la estrategia de enrutamiento <em>Fallback para todos los clientes</em>, asegúrese de usar valores de alta prioridad.</p>
</li>
</ul>
</div>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Las rutas específicas de fax se aplicarán primero tanto para los faxes enviados a través de fax virtual (ver <a class="reference internal" href="index.html#faxes"><span class="std std-ref">Faxes</span></a>) o dispositivos compatibles con T.38. Si no se encuentra una ruta específica de fax para un fax determinado, las rutas se aplicarán como para una llamada de voz normal a ese destino.</p>
</div>
<div class="section" id="load-balancing">
<h6>Equilibrio de carga<a class="headerlink" href="#load-balancing" title="Enlazar permanentemente con este título">¶</a></h6>
<p>La prioridad y el peso son parámetros clave para lograr dos características interesantes también: <strong>equilibrio de carga</strong> y <strong>rutas de conmutación por error</strong>.</p>
<p><em>Equilibrio de carga</em> nos permite distribuir llamadas que coinciden con el mismo patrón utilizando varias rutas salientes válidas.</p>
<ul class="simple">
<li><p class="first">Ejemplo 1</p>
<ul>
<li><p class="first">Ruta A: prioridad 1, peso 1</p>
</li>
<li><p class="first">Ruta B: prioridad 1, peso 1</p>
</li>
</ul>
</li>
</ul>
<p>Las llamadas que coincidan con estas rutas usarán la ruta A para el %50 de las llamadas y la ruta B para el %50 de las llamadas.</p>
<ul class="simple">
<li><p class="first">Ejemplo 2</p>
<ul>
<li><p class="first">Ruta A: prioridad 1, peso 1</p>
</li>
<li><p class="first">Ruta B: prioridad 1, peso 2</p>
</li>
</ul>
</li>
</ul>
<p>Las llamadas que coincidan con estas rutas usarán la ruta A para el %33 de las llamadas y la ruta B para el %66 de las llamadas.</p>
</div>
<div class="section" id="failover-routes">
<h6>Rutas de conmutación por error<a class="headerlink" href="#failover-routes" title="Enlazar permanentemente con este título">¶</a></h6>
<p>La ruta de conmutación por error nos permite usar otra ruta cuando la ruta principal falla.</p>
<ul class="simple">
<li><p class="first">Ejemplo</p>
<ul>
<li><p class="first">Ruta A: prioridad 1, peso 1</p>
</li>
<li><p class="first">Ruta B: prioridad 2, peso 1</p>
</li>
</ul>
</li>
</ul>
<p>Todas las llamadas que coincidan con estas rutas intentarán usar la ruta A. En caso de que la llamada falle, la llamada se realizará utilizando la ruta B.</p>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Aunque los ejemplos dados usan dos rutas, se pueden encadenar más rutas y se pueden combinar estrategias de conmutación por error y equilibrio de carga.</p>
</div>
</div>
</div>
<div class="section" id="lcr-routes">
<h5>Rutas LCR<a class="headerlink" href="#lcr-routes" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Las rutas LCR (<em>Enrutamiento de Menor Costo</em>) pueden seleccionar más de un transportista. Siempre que se use una ruta LCR, la plataforma calculará el costo de la llamada para ese destino dado (para una duración de 5 minutos) y los ordenará en orden ascendente.</p>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Los transportistas que no pueden calcular el costo para un destino dado son silenciosamente ignorados (no se utilizan).</p>
</div>
<div class="section" id="lcr-and-static-routes-combined">
<h6>Rutas LCR y estáticas combinadas<a class="headerlink" href="#lcr-and-static-routes-combined" title="Enlazar permanentemente con este título">¶</a></h6>
<p>El proceso de elección de transportista puede combinar rutas estáticas y LCR:</p>
<ol class="arabic simple">
<li><p class="first">Las rutas estáticas resultan en un transportista con la prioridad y el peso de la ruta.</p>
</li>
<li><p class="first">Las rutas LCR resultan en <em>n</em> transportistas, ordenados por costo de llamada, todos ellos con la prioridad y el peso de la ruta.</p>
</li>
<li><p class="first">Los transportistas se ordenan utilizando la prioridad (orden ascendente).</p>
</li>
<li><p class="first">El peso del transportista se utiliza para el equilibrio de carga entre transportistas con la misma prioridad.</p>
</li>
</ol>
</div>
</div>
<div class="section" id="blocking-routes">
<h5>Rutas de bloqueo<a class="headerlink" href="#blocking-routes" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Las rutas de bloqueo son rutas <em>Detenedor</em> ya que siempre que se apliquen, la llamada es rechazada y no se evalúa ninguna otra ruta.</p>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Usando estas rutas, es fácil hacer un grupo con prefijos de llamadas no deseadas y rechazar todas las llamadas a esos destinos para cada cliente (o para un cliente en particular).</p>
</div>
</div>
</div>
<span id="document-administration_portal/brand/routing/routing_patterns"></span><div class="section" id="id1">
<span id="routing-patterns"></span><span id="id2"></span><h4>Patrones de enrutamiento<a class="headerlink" href="#id1" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Cuando un usuario marca un número de teléfono externo, IvozProvider intenta categorizar esta llamada en uno de los patrones de enrutamiento definidos en esta sección. Una vez categorizado, el patrón se utilizará en el proceso de enrutamiento descrito en <a class="reference internal" href="index.html#outgoing-routings"><span class="std std-ref">Enrutamientos Salientes</span></a>.</p>
<p>Por lo general, será útil tener un patrón de enrutamiento para los países definidos en el <a class="reference external" href="https://en.wikipedia.org/wiki/ISO_3166">ISO 3166</a>. Es por eso que IvozProvider incluye automáticamente todos estos países y sus prefijos.</p>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">El operador de la marca puede elegir entre mantener este patrón de enrutamiento si lo encuentra útil o eliminarlos y crear los que se ajusten a sus necesidades.</p>
</div>
</div>
<span id="document-administration_portal/brand/routing/routing_patterns_groups"></span><div class="section" id="routing-pattern-groups">
<span id="id1"></span><h4>Grupos de patrones de enrutamiento<a class="headerlink" href="#routing-pattern-groups" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Como veremos en la sección <a class="reference internal" href="index.html#outgoing-routings"><span class="std std-ref">Enrutamientos Salientes</span></a>, cada patrón de enrutamiento estará vinculado a un Transportista.</p>
<p>Es por eso que puede ser útil agrupar los <a class="reference internal" href="index.html#id1"><span class="std std-ref">Patrones de enrutamiento</span></a> en <strong>grupos de patrones de enrutamiento</strong> para que podamos usar un grupo completo en una regla de enrutamiento.</p>
<p>Por defecto podemos ver los países agrupados en los continentes definidos en <a class="reference external" href="https://en.wikipedia.org/wiki/ISO_3166">ISO 3166</a>.</p>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">El operador de la marca puede elegir entre mantener estos grupos de patrones de enrutamiento si los encuentra útiles o eliminarlos y crear los que se ajusten a sus necesidades.</p>
</div>
</div>
<span id="document-administration_portal/brand/routing/routing_tags"></span><div class="section" id="routing-tags">
<h4>Etiquetas de enrutamiento<a class="headerlink" href="#routing-tags" title="Enlazar permanentemente con este título">¶</a></h4>
<p>En la mayoría de los casos, los administradores de Marcas son responsables de configurar <a class="reference internal" href="index.html#carriers"><span class="std std-ref">Carriers</span></a> y <a class="reference internal" href="index.html#outgoing-routings"><span class="std std-ref">Enrutamientos Salientes</span></a> para proporcionar conectividad a sus clientes. Pero en algunos casos, los clientes quieren elegir el enrutamiento saliente a utilizar por llamada.</p>
<p>Una etiqueta de enrutamiento es <strong>un código que antecederá al número de destino al realizar llamadas a IvozProvider</strong> y permitirá a los clientes elegir diferentes rutas para los mismos destinos.</p>
<div class="section" id="add-edit-delete-a-routing-tag">
<h5>Agregar/Editar/Eliminar una etiqueta de enrutamiento<a class="headerlink" href="#add-edit-delete-a-routing-tag" title="Enlazar permanentemente con este título">¶</a></h5>
<p>La definición de la etiqueta de enrutamiento solo implica estos dos campos:</p>
<blockquote>
<div><dl class="docutils">
<dt>Nombre</dt>
<dd><p class="first last">Nombre utilizado para referenciar (por ejemplo, &#8220;Premium&#8221;)</p>
</dd>
<dt>Etiqueta</dt>
<dd><p class="first last">El prefijo en sí</p>
</dd>
</dl>
</div></blockquote>
<div class="admonition important">
<p class="first admonition-title">Importante</p>
<p class="last">La etiqueta <strong>debe</strong> tener este formato: de 1 a 3 dígitos terminados con el símbolo #.</p>
</div>
</div>
<div class="section" id="using-routing-tags">
<h5>Usando etiquetas de enrutamiento<a class="headerlink" href="#using-routing-tags" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Una vez creadas, las etiquetas de enrutamiento se pueden usar en tres secciones diferentes:</p>
<ul class="simple">
<li><p class="first">En <strong>pantalla de edición del cliente</strong>, para permitir que un cliente use una etiqueta de enrutamiento.</p>
</li>
</ul>
<div class="admonition error">
<p class="first admonition-title">Error</p>
<p class="last">Usar una etiqueta de enrutamiento no habilitada hará que la llamada sea rechazada.</p>
</div>
<ul class="simple">
<li><p class="first">En <strong>Enrutamientos salientes</strong> para modificar la forma en que se enrutan esas llamadas.</p>
</li>
<li><p class="first">En <strong>asociación de cliente - perfiles de calificación</strong>, para que diferentes rutas impliquen diferentes facturaciones.</p>
</li>
</ul>
<div class="admonition important">
<p class="first admonition-title">Importante</p>
<p class="last">Las etiquetas de ruta solo están disponibles para clientes mayoristas y minoristas en este momento.</p>
</div>
</div>
</div>
</div>
</div>
<span id="document-administration_portal/brand/billing/index"></span><div class="section" id="billing">
<span id="id1"></span><h3>Tarificación<a class="headerlink" href="#billing" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Tarificar una llamada es la <strong>acción de establecer un precio</strong> a una llamada que implica un costo.</p>
<p>La tarificación de llamadas depende de un proceso automático:</p>
<ul class="simple">
<li><p class="first">Cuando una llamada está a punto de establecerse, IvozProvider verifica que podrá tarificarla.</p>
</li>
</ul>
<div class="admonition error">
<p class="first admonition-title">Error</p>
<p class="last">Si con la configuración actual (planes de tarifas activos y aplicables para un cliente determinado y para el destino específico) no es posible tarificar la llamada, IvozProvider evitará su establecimiento.</p>
</div>
<ul class="simple">
<li><p class="first">Una vez que una llamada que implica un costo se cuelga y se analiza mediante un proceso asincrónico, se lista en <a class="reference internal" href="index.html#id1"><span class="std std-ref">Llamadas externas</span></a>.</p>
</li>
</ul>
<div class="section" id="billing-methods">
<h4>Métodos de tarificación<a class="headerlink" href="#billing-methods" title="Enlazar permanentemente con este título">¶</a></h4>
<p>IvozProvider admite 3 métodos de tarificación diferentes. El método de tarificación se configura a nivel de cliente mediante el parámetro <em>Método de tarificación</em>.</p>
<div class="section" id="postpaid-billing">
<span id="id2"></span><h5>Tarificación postpago<a class="headerlink" href="#postpaid-billing" title="Enlazar permanentemente con este título">¶</a></h5>
<blockquote>
<div><ul class="simple">
<li><p class="first">La calificación de la llamada se realiza después de que la llamada termina.</p>
</li>
<li><p class="first">No hay límite configurable ni saldos involucrados.</p>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="prepaid-billing">
<span id="id3"></span><h5>Tarificación prepago<a class="headerlink" href="#prepaid-billing" title="Enlazar permanentemente con este título">¶</a></h5>
<blockquote>
<div><ul class="simple">
<li><p class="first">La calificación de la llamada se realiza durante la llamada.</p>
</li>
<li><p class="first">Los clientes con el método de tarificación prepago tienen un saldo preconfigurado que se decrementará durante la llamada.</p>
</li>
<li><p class="first">Cuando el saldo llegue a cero, todas las llamadas establecidas para el cliente se colgarán.</p>
</li>
<li><p class="first">Los clientes no pueden realizar nuevas llamadas con saldo cero o negativo.</p>
</li>
<li><p class="first">Se pueden configurar notificaciones por correo electrónico de saldo bajo.</p>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="pseudo-prepaid-billing">
<span id="id4"></span><h5>Tarificación pseudo-prepago<a class="headerlink" href="#pseudo-prepaid-billing" title="Enlazar permanentemente con este título">¶</a></h5>
<blockquote>
<div><ul class="simple">
<li><p class="first">La calificación de la llamada se realiza después de que la llamada termina.</p>
</li>
<li><p class="first">Los clientes con el método de tarificación pseudo-prepago tienen un saldo preconfigurado que se decrementará después de que la llamada termina.</p>
</li>
<li><p class="first">Los clientes no pueden realizar nuevas llamadas con saldo cero o negativo.</p>
</li>
<li><p class="first">Se pueden configurar notificaciones por correo electrónico de saldo bajo.</p>
</li>
</ul>
</div></blockquote>
<div class="admonition warning">
<p class="first admonition-title">Advertencia</p>
<p class="last">La duración de la llamada está limitada a la duración máxima posible con el saldo disponible en el momento del establecimiento de la llamada.</p>
</div>
</div>
</div>
<div class="section" id="price-and-cost">
<h4>Precio y costo<a class="headerlink" href="#price-and-cost" title="Enlazar permanentemente con este título">¶</a></h4>
<ul class="simple">
<li><p class="first">El <strong>precio</strong> de la llamada es la cantidad de dinero que el operador de la marca cobrará a su <strong>cliente</strong> por cada llamada.</p>
</li>
<li><p class="first">El <strong>costo</strong> de la llamada es la cantidad de dinero que el operador de la marca será cobrado por el <strong>operador</strong> por cada llamada.</p>
</li>
</ul>
<p><strong>El cálculo del costo de la llamada es opcional</strong>, ya que no todos los operadores tienen habilitada la configuración <em>¿Calcular costo?</em>. Por otro lado, <strong>el cálculo del precio de la llamada es obligatorio</strong> para cada llamada saliente.</p>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">El cálculo del costo de la llamada del operador, si está habilitado, siempre se realiza postpago. Se permiten operadores con saldo negativo y no se colgará ninguna llamada cuando el saldo del operador llegue a 0.</p>
</div>
</div>
<div class="section" id="concepts">
<h4>Conceptos<a class="headerlink" href="#concepts" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Este tema cubrirá todos los temas involucrados en el proceso de tarificación:</p>
<div class="toctree-wrapper compound">
<span id="document-administration_portal/brand/billing/rating_plans"></span><div class="section" id="rating-plans">
<span id="id1"></span><h5>Planes de tarifas<a class="headerlink" href="#rating-plans" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Los planes de tarifas describen cómo se califican las llamadas para diferentes destinos en diferentes momentos del día.</p>
<div class="section" id="rating-plan-definition">
<h6>Definición del plan de tarifas<a class="headerlink" href="#rating-plan-definition" title="Enlazar permanentemente con este título">¶</a></h6>
<p><a class="reference internal" href="index.html#destination-rates"><span class="std std-ref">Tarifas de Destino</span></a> se agrupan utilizando planes de tarifas. Esto ofrece la posibilidad de tener datos de precios base y personalizar algunos destinos con diferentes precios en diferentes momentos del día.</p>
<p>Estos son los campos que definen un plan de tarifas:</p>
<blockquote>
<div><dl class="docutils">
<dt>Nombre</dt>
<dd><p class="first last">Nombre que se utilizará para referenciar este plan de tarifas.</p>
</dd>
<dt>Descripción</dt>
<dd><p class="first last">Un campo para ingresar información adicional. No se usa en ningún lugar.</p>
</dd>
<dt>Moneda</dt>
<dd><p class="first last">Todas las tarifas de destino agrupadas deben usar esta moneda.</p>
</dd>
</dl>
</div></blockquote>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Los nombres de los planes de tarifas aparecen en las facturas de los clientes finales, elija algo con sentido comercial.</p>
</div>
</div>
<div class="section" id="adding-destination-rates-to-rating-plan">
<h6>Agregar tarifas de destino al plan de tarifas<a class="headerlink" href="#adding-destination-rates-to-rating-plan" title="Enlazar permanentemente con este título">¶</a></h6>
<p>Los planes de tarifas agrupan varias <a class="reference internal" href="index.html#destination-rates"><span class="std std-ref">Tarifas de Destino</span></a> para permitir una configuración flexible que califique los destinos de manera diferente en diferentes momentos del día (subsección <strong>Lista de tarifas de destino</strong>).</p>
<blockquote>
<div><dl class="docutils">
<dt>Tarifa de destino</dt>
<dd><p class="first last">Agrega la tarifa de destino seleccionada al plan de tarifas</p>
</dd>
<dt>Peso</dt>
<dd><p class="first last">Si una llamada determinada se puede facturar con más de una tarifa de destino dentro del plan de tarifas, se facturará utilizando la que tenga mayor peso.</p>
</dd>
<dt>Tipo de tiempo</dt>
<dd><p class="first last">¿Debe aplicarse esta asociación siempre o solo en determinados momentos de la semana?</p>
</dd>
</dl>
</div></blockquote>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">El peso permite tener una <em>tarifa de destino</em> general y concretar el precio de un destino específico en otra <em>tarifa de destino</em> con mayor peso (llamadas a teléfonos móviles gratuitas, por ejemplo).</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Advertencia</p>
<p class="last">Un plan de tarifas DEBE ser capaz de calificar llamadas 24x7. Agregar los horarios de todas las tarifas de destino en un plan de tarifas DEBE cubrir cada momento de la semana.</p>
</div>
<p class="rubric">Verificación de planes de tarifas</p>
<p>Para verificar la configuración hasta ahora, podemos <strong>Simular una llamada</strong> desde la lista de planes de tarifas.</p>
<p>Introducimos el número de destino en <a class="reference internal" href="index.html#e164"><span class="std std-ref">formato E.164</span></a>, y podemos verificar el precio que cada plan de tarifas en la lista cobrará por esa llamada.</p>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Los planes de tarifas pueden estar vinculados tanto a Clientes (para el cálculo del precio) como a Operadores (para el cálculo del costo).</p>
</div>
</div>
<div class="section" id="assigning-rating-plans-to-clients">
<span id="id2"></span><h6>Asignación de planes de tarifas a clientes<a class="headerlink" href="#assigning-rating-plans-to-clients" title="Enlazar permanentemente con este título">¶</a></h6>
<p>Un <strong>plan de tarifas</strong> específico puede estar vinculado a múltiples clientes.</p>
<p>En la sección <strong>Configuración de la marca</strong> &gt; <strong>PBX virtuales</strong> (<strong>Residencial</strong>, <strong>Minorista</strong> y <strong>Mayorista</strong>) seleccionamos la subsección <strong>Lista de planes de tarifas</strong>.</p>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Cada <strong>plan de tarifas</strong> tiene un tiempo de activación y solo uno puede estar activo para cada cliente en un momento específico (el que tenga el tiempo de activación más cercano en el pasado).</p>
</div>
<p class="rubric">Simulación de una llamada de un cliente específico</p>
<p>En esta lista también podemos simular una llamada para un cliente determinado como lo hicimos anteriormente en la lista de planes de tarifas y verificar el precio que implicará. De esta manera, podemos estar seguros de que la configuración es correcta.</p>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">El plan de tarifas activo de un cliente determinado se utilizará para establecer el precio de sus llamadas.</p>
</div>
</div>
<div class="section" id="assigning-rating-plans-to-carriers">
<span id="id3"></span><h6>Asignación de planes de tarifas a operadores<a class="headerlink" href="#assigning-rating-plans-to-carriers" title="Enlazar permanentemente con este título">¶</a></h6>
<p>Un <strong>plan de tarifas</strong> específico puede estar vinculado a múltiples operadores para calcular el costo de las llamadas (ver <a class="reference internal" href="index.html#cost-calculation"><span class="std std-ref">Cálculo de costos</span></a>).</p>
<p>En la sección <strong>Configuración de la marca</strong> &gt; <strong>Proveedores</strong> &gt; <strong>Operadores</strong> seleccionamos la subsección <strong>Lista de planes de tarifas</strong>.</p>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Cada <strong>plan de tarifas</strong> tiene un tiempo de activación y solo uno puede estar activo para cada cliente en un momento específico (el que tenga el tiempo de activación más cercano en el pasado).</p>
</div>
<p class="rubric">Simulación de una llamada de un operador específico</p>
<p>En esta lista también podemos simular una llamada para un operador determinado como lo hicimos anteriormente en la lista de planes de tarifas y verificar el precio que implicará. De esta manera, podemos estar seguros de que la configuración es correcta.</p>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">El plan de tarifas activo de un operador determinado se utilizará para establecer el costo de las llamadas establecidas utilizando dicho operador.</p>
</div>
</div>
</div>
<span id="document-administration_portal/brand/billing/destination_rates"></span><div class="section" id="destination-rates">
<span id="id1"></span><h5>Tarifas de Destino<a class="headerlink" href="#destination-rates" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Una <em>tarifa de destino</em> agrupa algunos prefijos con sus detalles de costo.</p>
<p>Solo tienen dos campos:</p>
<blockquote>
<div><dl class="docutils">
<dt>Nombre</dt>
<dd><p class="first last">Nombre para referenciar la tarifa de destino</p>
</dd>
<dt>Descripción</dt>
<dd><p class="first last">Detalles adicionales</p>
</dd>
<dt>Moneda</dt>
<dd><p class="first last">Todas las tarifas importadas/agregadas usarán esta moneda</p>
</dd>
<dt>Tarifa de Conexión Deducible</dt>
<dd><p class="first last">Configurar en &#8216;No&#8217; para la tarifa típica cobrada al establecer la llamada. Configurar en &#8216;Sí&#8217; para habilitar el comportamiento similar al costo mínimo (leer abajo).</p>
</dd>
</dl>
</div></blockquote>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Los nombres de las tarifas de destino no se muestran al cliente final, puedes usar lo que tenga sentido para ti.</p>
</div>
<div class="section" id="deductible-connection-fee-minimal-cost">
<h6>Tarifa de Conexión Deducible (Costo Mínimo)<a class="headerlink" href="#deductible-connection-fee-minimal-cost" title="Enlazar permanentemente con este título">¶</a></h6>
<p>Cuando la Tarifa de Destino tiene <em>Tarifa de Conexión Deducible</em> configurada en sí, todas las tarifas de Conexión se comportarán como Costo Mínimo.</p>
<p>Esta es la lógica subyacente:</p>
<ul>
<li><p class="first">Cuando se establece la llamada, se cobra la Tarifa de Conexión del prefijo coincidente.</p>
</li>
<li><p class="first">Cuando se cuelga la llamada:</p>
<ul>
<li><p class="first">Se calcula el costo total sin la tarifa de conexión (CostWithoutConnectionFee):</p>
<ul>
<li><p class="first">Si es mayor que la tarifa de conexión, la tarifa de conexión se resta del costo total.</p>
<blockquote>
<div><ul class="simple">
<li><p class="first">Tarifa de conexión final: 0</p>
</li>
<li><p class="first">Costo final: CostWithoutConnectionFee</p>
</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">Si es menor que la tarifa de conexión, la tarifa de conexión se ajusta para que el costo total sea igual a la tarifa de conexión.</p>
<blockquote>
<div><ul class="simple">
<li><p class="first">Tarifa de conexión final: ConnectionFee - CostWithoutConnectionFee</p>
</li>
<li><p class="first">Costo final: ConnectionFee</p>
</li>
</ul>
</div></blockquote>
</li>
</ul>
</li>
<li><p class="first">En ambos casos, la diferencia de costo se reembolsa a los saldos afectados.</p>
</li>
</ul>
</li>
</ul>
<p class="rubric">Tarifa de conexión 0.01 - Costo total 0.21</p>
<ul class="simple">
<li><p class="first">Costo sin tarifa de conexión: 0.20</p>
</li>
<li><p class="first">Como 0.20 &gt; 0.01:</p>
<ul>
<li><p class="first">El costo de la llamada se reduce a 0.20</p>
</li>
<li><p class="first">0.01 se reembolsa a los saldos afectados</p>
</li>
</ul>
</li>
</ul>
<p class="rubric">Tarifa de conexión 0.01 - Costo total 0.013</p>
<ul class="simple">
<li><p class="first">Costo sin tarifa de conexión: 0.003</p>
</li>
<li><p class="first">Como 0.003 &lt; 0.01:</p>
<ul>
<li><p class="first">El costo de la llamada se reduce a 0.01</p>
</li>
<li><p class="first">0.003 se reembolsa a los saldos afectados</p>
</li>
</ul>
</li>
</ul>
<p>Esta configuración garantiza un costo mínimo de 0.01.</p>
</div>
<div class="section" id="add-rates-manually">
<span id="id2"></span><h6>Agregar tarifas manualmente<a class="headerlink" href="#add-rates-manually" title="Enlazar permanentemente con este título">¶</a></h6>
<p>El operador de la marca puede agregar tarifas manualmente, llenando estos campos (<strong>Lista de tarifas</strong> subsección):</p>
<blockquote>
<div><dl class="docutils">
<dt>Destino</dt>
<dd><p class="first last">Destino pre-creado que especifica un prefijo concreto.</p>
</dd>
<dt>Cargo de conexión</dt>
<dd><p class="first last">La cantidad que se cobra solo por el establecimiento de la llamada.</p>
</dd>
<dt>Inicio del intervalo</dt>
<dd><p class="first last">Cuándo debe el motor de facturación comenzar a calificar las llamadas. Si lo configuras en 10, los primeros 10 segundos serán gratis.</p>
</dd>
<dt>Tarifa por minuto</dt>
<dd><p class="first last">Precio por minuto de conversación.</p>
</dd>
<dt>Período de cobro</dt>
<dd><p class="first last">¿Aumentar el costo cada segundos? ¿O en intervalos de 10 segundos? ¿O cada minuto?</p>
</dd>
</dl>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Una llamada con una duración menor a la definida en el inicio del intervalo tendrá el precio de la <strong>Tarifa de Conexión</strong>.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Advertencia</p>
<p class="last">Todos los decimales deben usar punto como delimitador decimal. Se usa una precisión de 4 decimales.</p>
</div>
<p class="rubric">Cómo funciona</p>
<p>El costo/precio de la llamada se incrementa en (<em>Tarifa por minuto</em> / 60 ) * <em>período de cobro</em> cada <em>período de cobro</em> segundos:</p>
<ul class="simple">
<li><p class="first">Si el <em>período de facturación</em> se establece en 1, cada segundo el precio se incrementará <em>precio por minuto</em> dividido por 60 (facturación por segundos).</p>
</li>
<li><p class="first">Si el <em>período de facturación</em> se establece en 60, cada minuto el precio se incrementará <em>precio por minuto</em> (facturación por minutos).</p>
</li>
</ul>
</div>
<div class="section" id="importing-a-csv-file">
<span id="id3"></span><h6>Importando un archivo CSV<a class="headerlink" href="#importing-a-csv-file" title="Enlazar permanentemente con este título">¶</a></h6>
<p>En este punto, el operador de la marca puede haber notado que agregar miles de tarifas sería una tarea realmente molesta y que consume mucho tiempo, ya que hay 254 países, cada uno con sus redes móviles, redes fijas, números de servicios especiales, etc.</p>
<p>Es por eso que la creación de tarifas de destino se realiza utilizando un archivo <a class="reference external" href="https://es.wikipedia.org/wiki/CSV">CSV</a>.</p>
<p>El primer paso es crear una <em>tarifa de destino</em> vacía para importar los precios y usar la opción <strong>Importar tarifas</strong>.</p>
<p>Podemos seleccionar qué columna contiene qué campo, en caso de que queramos importar un archivo <a class="reference external" href="https://es.wikipedia.org/wiki/CSV">CSV</a> en un formato no recomendado. También podemos decidir si importar la primera línea o descartarla ya que puede tener títulos en lugar de datos.</p>
<div class="admonition hint">
<p class="first admonition-title">Consejo</p>
<p class="last">El proceso de importación se realiza en segundo plano, permitiendo al operador de la marca continuar haciendo otras cosas mientras se termina.</p>
</div>
<div class="section" id="csv-format">
<h7>Formato CSV<a class="headerlink" href="#csv-format" title="Enlazar permanentemente con este título">¶</a></h7>
<p>Aunque la ventana de importación permite importar archivos CSV en formatos no recomendados, te recomendamos importar un archivo en el formato propuesto, ya que hará este proceso mucho más fácil:</p>
<div class="admonition error">
<p class="first admonition-title">Error</p>
<p class="last">La coma es el único carácter separador permitido.</p>
</div>
<div class="admonition error">
<p class="first admonition-title">Error</p>
<p class="last">Las comillas simples no son compatibles.</p>
</div>
<p>Puedes encontrar un CSV de muestra para importar <a class="reference external" href="https://raw.githubusercontent.com/irontec/ivozprovider/main/web/portal/brand/samples/billing/pricesSample.csv">aquí</a>.</p>
<p>El orden de las columnas debe ser:</p>
<ul class="simple">
<li><p class="first">Nombre del destino</p>
</li>
</ul>
<div class="admonition warning">
<p class="first admonition-title">Advertencia</p>
<p class="last">Si contienen alguna coma, DEBEN estar entre comillas dobles. De lo contrario, las comillas dobles son opcionales.</p>
</div>
<ul class="simple">
<li><p class="first">Prefijo del destino</p>
</li>
</ul>
<div class="admonition warning">
<p class="first admonition-title">Advertencia</p>
<p class="last">DEBE comenzar con el signo +.</p>
</div>
<div class="admonition error">
<p class="first admonition-title">Error</p>
<p class="last">Si el mismo prefijo se usa varias veces en el archivo CSV, el proceso de importación fallará.</p>
</div>
<ul class="simple">
<li><p class="first">Tarifa por minuto</p>
</li>
<li><p class="first">Cargo de conexión</p>
</li>
</ul>
<div class="admonition warning">
<p class="first admonition-title">Advertencia</p>
<p class="last">DEBE usar punto como separador decimal.</p>
</div>
<ul class="simple">
<li><p class="first">Período de cobro</p>
</li>
</ul>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Dado en segundos, solo se admiten enteros mayores o iguales a 1.</p>
</div>
<p>Una vez que el proceso de importación haya terminado, solo tenemos que incluir esta tarifa de destino en algún plan de tarifas y vincularlo a los clientes/carriers que queramos siguiendo el procedimiento explicado en <a class="reference internal" href="index.html#rating-plans"><span class="std std-ref">Planes de tarifas</span></a>.</p>
</div>
</div>
<div class="section" id="re-importing-a-csv-file">
<h6>Reimportando un archivo CSV<a class="headerlink" href="#re-importing-a-csv-file" title="Enlazar permanentemente con este título">¶</a></h6>
<p>Una vez que un CSV (first.csv) se importa en una fila de tarifas de destino vacía, puedes <strong>importar otro CSV</strong> (second.csv).</p>
<p>Sin embargo, es <strong>importante entender lo que sucede</strong> cuando lo haces:</p>
<ul class="simple">
<li><p class="first">Los prefijos en ambos CSV tendrán su tarifa <strong>actualizada</strong> con la del segundo CSV.</p>
</li>
<li><p class="first">Los prefijos que existen solo en el primer archivo CSV se <strong>mantendrán</strong>.</p>
</li>
<li><p class="first">Los prefijos que existen solo en el segundo archivo CSV se <strong>agregarán</strong>.</p>
</li>
</ul>
<div class="admonition error">
<p class="first admonition-title">Error</p>
<p class="last">Descargar CSV usando la opción <em>Archivo importado</em> siempre descargará <strong>el último archivo CSV importado</strong> (no la combinación de ambos como se describe arriba).</p>
</div>
<p>Ten en cuenta que si tanto <em>first.csv</em> como <em>second.csv</em> contienen exactamente los mismos prefijos, la tarifa de destino resultante será como si solo hubiéramos importado <em>second.csv</em>. Y descargar <em>Archivo importado</em> descargará <em>second.csv</em>, que es exactamente el estado actual de la tarifa de destino.</p>
</div>
</div>
<span id="document-administration_portal/brand/billing/destinations"></span><div class="section" id="destinations">
<h5>Destinos<a class="headerlink" href="#destinations" title="Enlazar permanentemente con este título">¶</a></h5>
<p>La sección <em>Destinos</em> vincula prefijos (siempre comenzando con +) con nombres.</p>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Estos nombres se utilizarán en las facturas para identificar los destinos correspondientes.</p>
</div>
<p>Agregar destinos manualmente solo es necesario si desea agregar <em>tarifas de destino</em> manualmente como se explica en <a class="reference internal" href="index.html#add-rates-manually"><span class="std std-ref">Agregar tarifas manualmente</span></a>.</p>
<p>Todos los prefijos inexistentes encontrados en el proceso de importación de CSV descrito en <a class="reference internal" href="index.html#importing-a-csv-file"><span class="std std-ref">Importando un archivo CSV</span></a> se agregarán a esta lista automáticamente.</p>
</div>
<span id="document-administration_portal/brand/billing/prepaid_balances"></span><div class="section" id="prepaid-balances">
<h5>Saldos prepago<a class="headerlink" href="#prepaid-balances" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Esta sección muestra el estado del saldo para clientes con <a class="reference internal" href="index.html#prepaid-billing"><span class="std std-ref">Tarificación prepago</span></a> y <a class="reference internal" href="index.html#pseudo-prepaid-billing"><span class="std std-ref">Tarificación pseudo-prepago</span></a>.</p>
<p>Las siguientes opciones están disponibles para cada cliente:</p>
<div class="section" id="balance-operations">
<h6>Operaciones de saldo<a class="headerlink" href="#balance-operations" title="Enlazar permanentemente con este título">¶</a></h6>
<p>Los administradores de la marca aumentan/disminuyen el saldo de un cliente determinado utilizando esta opción.</p>
</div>
<div class="section" id="balance-movements-list">
<h6>Lista de movimientos de saldo<a class="headerlink" href="#balance-movements-list" title="Enlazar permanentemente con este título">¶</a></h6>
<p>Los administradores de la marca pueden rastrear los movimientos de saldo (aumento o disminución) en esta cuenta y su estado después del movimiento.</p>
</div>
<div class="section" id="balance-notifications">
<h6>Notificaciones de saldo<a class="headerlink" href="#balance-notifications" title="Enlazar permanentemente con este título">¶</a></h6>
<p>Los administradores de la marca pueden configurar notificaciones por correo electrónico cuando el saldo esté por debajo de un umbral determinado. Consulte <a class="reference internal" href="index.html#id1"><span class="std std-ref">Plantillas de Notificación</span></a> para personalizar el correo electrónico enviado.</p>
</div>
</div>
<span id="document-administration_portal/brand/billing/current_day_usages"></span><div class="section" id="current-day-usages">
<span id="id1"></span><h5>Usos del día actual<a class="headerlink" href="#current-day-usages" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Esta sección lista el uso del día actual para cada cliente en la marca:</p>
<blockquote>
<div><dl class="docutils">
<dt>Tipo</dt>
<dd><p class="first last">Tipo de cliente (vPBX, minorista, residencial o mayorista).</p>
</dd>
<dt>Nombre</dt>
<dd><p class="first last">Nombre del cliente.</p>
</dd>
<dt>Uso de hoy</dt>
<dd><p class="first last">Cantidad de dinero gastado en las llamadas externas de hoy.</p>
</dd>
<dt>Uso diario máximo</dt>
<dd><p class="first last">Cuando se alcanza este umbral, la cuenta se desactiva. A medianoche, se volverá a habilitar.</p>
</dd>
<dt>Estado</dt>
<dd><p class="first last">Si la cuenta ha sido desactivada o no.</p>
</dd>
</dl>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">El uso diario máximo del cliente se configura en <strong>Configuración de clientes</strong> con el parámetro <strong>Uso diario máximo</strong>.</p>
</div>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Si una cuenta está desactivada, aumentar su contador por encima de los usos del día actual la vuelve a habilitar. De lo contrario, se volverá a habilitar a medianoche.</p>
</div>
<div class="admonition error">
<p class="first admonition-title">Error</p>
<p class="last">Este es uno de los principales mecanismos de <a class="reference internal" href="index.html#security"><span class="std std-ref">Seguridad</span></a> disponibles en IvozProvider. Úselo para evitar llamadas de fraude de peaje (ver <a class="reference internal" href="index.html#current-day-max-usage"><span class="std std-ref">Uso máximo del día actual</span></a>).</p>
</div>
<p>Esta sección muestra el valor en tiempo de ejecución obtenido al preguntar a CGRateS (valor que realmente se aplica) que debe ser igual al establecido al editar el propio cliente. Si los datos se muestran en rojo, estos valores difieren.</p>
</div>
</div>
</div>
</div>
<span id="document-administration_portal/brand/invoicing/index"></span><div class="section" id="invoicing">
<h3>Facturación<a class="headerlink" href="#invoicing" title="Enlazar permanentemente con este título">¶</a></h3>
<p>El objetivo final de esta sección es generar facturas con las llamadas que implican costo de un cliente dado.</p>
<p>Se cubrirán estos temas:</p>
<div class="toctree-wrapper compound">
<span id="document-administration_portal/brand/invoicing/invoices"></span><div class="section" id="invoices">
<span id="id1"></span><h4>Facturas<a class="headerlink" href="#invoices" title="Enlazar permanentemente con este título">¶</a></h4>
<p>La sección de <strong>Facturas</strong> permite al <strong>operador de la marca</strong> generar facturas para emitir a sus clientes y listar todas las facturas de todos los clientes, sin importar si fueron generadas automáticamente o manualmente.</p>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Los administradores de la marca también pueden habilitar el modo de vista en esta sección para sus clientes. Consulte la sección de configuración de datos de facturas del cliente para más información.</p>
</div>
<div class="section" id="generating-a-new-invoice">
<h5>Generando una nueva factura<a class="headerlink" href="#generating-a-new-invoice" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Estos son los campos que se muestran cuando se usa la opción <em>Agregar Factura</em>:</p>
<blockquote>
<div><dl class="docutils">
<dt>Secuencia de número de factura</dt>
<dd><p class="first last">Usar el siguiente número de una secuencia predefinida o usar un número personalizado</p>
</dd>
<dt>Número</dt>
<dd><p class="first last">Solo se muestra si no se usa un número de secuencia, permite al operador de la marca introducir un número personalizado</p>
</dd>
<dt>Cliente</dt>
<dd><p class="first last">El cliente cuyas llamadas serán facturadas</p>
</dd>
<dt>Plantilla</dt>
<dd><p class="first last">Plantilla de factura que se usará para generar el archivo PDF de la factura</p>
</dd>
<dt>Fecha de entrada/salida</dt>
<dd><p class="first last">El período de tiempo de las llamadas que serán facturadas</p>
</dd>
<dt>Descuento de llamadas</dt>
<dd><p class="first last">Porcentaje para descontar llamadas, antes del cálculo de la tasa de impuestos. Sin efecto en conceptos fijos.</p>
</dd>
<dt>Tasa de impuestos</dt>
<dd><p class="first last">Impuestos a añadir al costo final (por ejemplo, IVA)</p>
</dd>
</dl>
</div></blockquote>
<p>Una vez guardado, se pueden añadir algunos <a class="reference internal" href="index.html#fixed-costs"><span class="std std-ref">Costos fijos</span></a> antes de generar la factura final. Esto se logra con la subsección de <strong>Costos fijos</strong>, que permite añadir varios conceptos positivos a la factura:</p>
<blockquote>
<div><dl class="docutils">
<dt>Costo fijo</dt>
<dd><p class="first last">Elegir un costo predefinido</p>
</dd>
<dt>Cantidad</dt>
<dd><p class="first last">Cuántos de estos deben ser incluidos</p>
</dd>
</dl>
</div></blockquote>
<p>El último paso es presionar la subopción <strong>Generar factura</strong> para crear el PDF final. Después, podemos ver qué llamadas se han incluido en una factura particular con la opción <strong>Lista de Llamadas Externas</strong> o descargar el archivo PDF.</p>
<div class="admonition warning">
<p class="first admonition-title">Advertencia</p>
<p class="last">Solo las llamadas externas salientes se incluyen en las facturas</p>
</div>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">La columna <strong>Estado</strong> muestra si la tarea de generación de PDF está esperando por el trabajador asíncrono (<em>esperando</em>), en proceso (<em>procesando</em>), terminó con errores (<em>fallido</em>) o terminó exitosamente (<em>creado</em>). En blanco, se debe presionar <em>Generar factura</em>.</p>
</div>
<div class="section" id="rules">
<h6>Reglas<a class="headerlink" href="#rules" title="Enlazar permanentemente con este título">¶</a></h6>
<p>El subsistema de facturación aplica varias reglas antes de generar una nueva factura:</p>
<ul class="simple">
<li><p class="first"><strong>Intervalo de fechas adecuado</strong>: la <em>fecha de salida</em> debe ser mayor (después) que la <em>fecha de entrada</em>.</p>
</li>
<li><p class="first"><strong>La fecha de salida debe ser anterior a hoy</strong>: No se pueden facturar fechas futuras o las llamadas de hoy.</p>
</li>
<li><p class="first"><strong>Una llamada, una factura:</strong> Todas las llamadas en el intervalo de tiempo no pueden ser incluidas en ninguna otra factura.</p>
</li>
<li><p class="first"><strong>Todas las llamadas en el intervalo deben ser facturadas</strong>.</p>
</li>
</ul>
<div class="admonition warning">
<p class="first admonition-title">Advertencia</p>
<p class="last">Si alguna de estas reglas no se cumple, la factura no se creará y el sistema advertirá.</p>
</div>
</div>
<div class="section" id="timezones">
<h6>Zonas horarias<a class="headerlink" href="#timezones" title="Enlazar permanentemente con este título">¶</a></h6>
<p>La <em>fecha de entrada</em> y la <em>fecha de salida</em> se interpretarán usando la zona horaria de la marca. Por otro lado, los tiempos de las llamadas en las facturas se convierten a la zona horaria del cliente, llevando a situaciones como esta:</p>
<ul class="simple">
<li><p class="first"><em>Fecha de entrada</em>: 01/10/2018 00:00:00</p>
</li>
<li><p class="first"><em>Fecha de salida</em>: 31/10/2018 23:59:59</p>
</li>
<li><p class="first">Zona horaria de la marca: UTC + 1</p>
</li>
<li><p class="first">Zona horaria del cliente: UTC - 1</p>
</li>
<li><p class="first">Intervalo de tiempo en la zona horaria de la marca: 01/10/2018 00:00 - 31/10/2018 23:59:59</p>
</li>
<li><p class="first">Intervalo de tiempo en la zona horaria del cliente: 30/09/2018 22:00 - 31/10/2018 21:59:59</p>
</li>
</ul>
<p>La factura generada para el cliente tendrá llamadas desde el 30 de septiembre a las 22:00 hasta el 31 de octubre a las 21:59:59, lo que puede parecer extraño para el cliente.</p>
</div>
</div>
<div class="section" id="regenerating-an-existing-invoice">
<h5>Regenerando una factura existente<a class="headerlink" href="#regenerating-an-existing-invoice" title="Enlazar permanentemente con este título">¶</a></h5>
<p>El operador de la marca puede editar cualquier parámetro de la factura (siempre que se cumplan las reglas anteriores), añadir/eliminar conceptos fijos, etc. y presionar <strong>Generar factura</strong> nuevamente.</p>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Cada vez que se realice un cambio, la columna <em>Estado</em> cambiará a blanco para mostrar que se debe presionar <em>Generar factura</em>.</p>
</div>
<div class="section" id="generate-invoice-for-rerated-calls">
<h6>Generar factura para llamadas revaloradas<a class="headerlink" href="#generate-invoice-for-rerated-calls" title="Enlazar permanentemente con este título">¶</a></h6>
<p>Si la valoración de alguna llamada incluida en una factura es incorrecta, la sección <a class="reference internal" href="index.html#external-calls"><span class="std std-ref">Llamadas externas</span></a> permite revalorarla, siempre que la factura que incluye la llamada se elimine previamente.</p>
<p>Una vez eliminada y revalorada, se puede añadir una nueva fila en la sección <em>Facturas</em> para incluir las llamadas revaloradas.</p>
</div>
</div>
<div class="section" id="list-of-external-calls">
<h5>Lista de llamadas externas<a class="headerlink" href="#list-of-external-calls" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Puede ver las llamadas de una factura dada usando esta opción. Verá los mismos campos que en <a class="reference internal" href="index.html#external-calls"><span class="std std-ref">Llamadas externas</span></a>.</p>
<div class="admonition error">
<p class="first admonition-title">Error</p>
<p class="last">Es obligatorio tener <strong>una URL de marca válida</strong> para usar la función <em>Exportar a CSV</em> en esta subsección.</p>
</div>
</div>
</div>
<span id="document-administration_portal/brand/invoicing/invoice_schedulers"></span><div class="section" id="invoice-schedulers">
<span id="id1"></span><h4>Programadores de facturas<a class="headerlink" href="#invoice-schedulers" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Esta sección permite programar la creación automática y periódica de facturas.</p>
<p>Al agregar una nueva definición, se muestran estos campos:</p>
<blockquote>
<div><dl class="docutils">
<dt>Nombre</dt>
<dd><p class="first last">Nombre de la factura programada</p>
</dd>
<dt>Cliente</dt>
<dd><p class="first last">Qué llamadas de clientes deben ser incluidas</p>
</dd>
<dt>Correo electrónico</dt>
<dd><p class="first last">Enviar facturas generadas por correo electrónico. Vacío si no se desea correo automático.</p>
</dd>
<dt>Frecuencia/Unidad</dt>
<dd><p class="first last">Define la frecuencia (una vez al mes, cada 7 días, etc.) de la tarea programada</p>
</dd>
<dt>Secuencia de número de factura</dt>
<dd><p class="first last">Las facturas programadas usarán el siguiente número de factura disponible en una secuencia predefinida</p>
</dd>
<dt>Descuento de llamadas</dt>
<dd><p class="first last">Porcentaje para descontar llamadas, antes del cálculo de la tasa de impuestos. Sin efecto en conceptos fijos.</p>
</dd>
<dt>Tasa de impuestos</dt>
<dd><p class="first last">Impuestos a añadir al costo final (por ejemplo, IVA)</p>
</dd>
</dl>
</div></blockquote>
<p>Las facturas generadas debido a una programación se pueden ver de dos maneras:</p>
<ul class="simple">
<li><p class="first">En cada fila de la sección <em>Programadores de facturas</em>, opción <strong>Lista de Facturas</strong>.</p>
</li>
<li><p class="first">En la sección <em>Facturas</em>, indistinguibles de las facturas generadas manualmente.</p>
</li>
</ul>
<div class="section" id="fixed-costs">
<h5>Costos fijos<a class="headerlink" href="#fixed-costs" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Al definir una factura programada, puede agregar costos fijos de manera estática o dinámica:</p>
<ul class="simple">
<li><p class="first">El tipo <strong>&#8216;estático&#8217;</strong> se usa para cantidades fijas.</p>
</li>
<li><p class="first">El tipo <strong>&#8216;Máximo de llamadas&#8217;</strong> establece la cantidad en el momento de la creación de la factura al valor de &#8220;Máximo de llamadas&#8221; del cliente en ese momento específico.</p>
</li>
<li><p class="first">El tipo <strong>&#8216;DDIs&#8217;</strong> establece la cantidad en el momento de la creación de la factura al número de DDIs que cumplen con los criterios (todos, nacionales, internacionales o pertenecientes a un país específico) en el cliente en ese momento específico.</p>
</li>
</ul>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Los valores no estáticos se recuperan de la configuración del cliente en la fecha especificada en &#8220;Próxima ejecución&#8221;. Regenerar la factura más tarde no modificará el valor asignado, pero puede adaptarlo manualmente al valor deseado editando el costo fijo en la sección de Facturas y regenerando la factura.</p>
</div>
</div>
<div class="section" id="frequency-definition">
<h5>Definición de frecuencia<a class="headerlink" href="#frequency-definition" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Es interesante entender cómo los campos <em>Frecuencia</em> y <em>Unidad</em> definen la tarea periódica:</p>
<ul class="simple">
<li><p class="first">Las facturas se programan a las 08:00:00 por defecto los lunes, el 1er día del mes o el 1 de enero (dependiendo del valor de la Unidad).</p>
</li>
<li><p class="first">Una vez creado un nuevo horario, <strong>Próxima ejecución</strong> muestra cuándo ocurrirá la próxima generación de facturas.</p>
</li>
</ul>
<p>El valor de <strong>Próxima ejecución</strong> puede ser manipulado, pero la factura generada siempre:</p>
<ul class="simple">
<li><p class="first">Descartar el día actual (2018/11/01 08:00:00 establecerá 2018/10/31 23:59:59 como <em>Fecha de salida</em>).</p>
</li>
<li><p class="first"><em>Fecha de entrada</em> será <em>fecha de salida</em> menos X semana(s), X mes(es) o X año(s) (X igual al valor de <em>Frecuencia</em>) + 1 segundo.</p>
</li>
</ul>
<p class="rubric">Ejemplo 1: Unidad: semana - Frecuencia 2</p>
<p>La próxima ejecución se establecerá para el próximo lunes a las 08:00 y las facturas incluirán llamadas de las últimas 2 semanas.</p>
<p class="rubric">Ejemplo 1: Unidad: mes - Frecuencia 3</p>
<p>La próxima ejecución se establecerá para el próximo 1er día del mes a las 08:00 y las facturas incluirán llamadas de los últimos 3 meses.</p>
<p class="rubric">Ejemplo 1: Unidad: mes - Frecuencia 1 - Manipulación de próxima ejecución</p>
<p>La próxima ejecución se establecerá para el próximo 1er día del mes a las 08:00 pero la manipulamos al 3er día del mes a las 10:00:00.</p>
<p>La factura incluirá llamadas desde el 3er día del mes anterior a las 00:00:00 hasta el 2do día del mes actual a las 23:59:59.</p>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last"><em>Última ejecución</em> muestra la fecha de la última ejecución y su resultado (éxito/error).</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Tanto <em>próxima ejecución</em> como <em>última ejecución</em> se muestran usando la zona horaria de la marca.</p>
</div>
</div>
</div>
<span id="document-administration_portal/brand/invoicing/invoice_number_sequences"></span><div class="section" id="invoice-number-sequences">
<h4>Secuencias de números de factura<a class="headerlink" href="#invoice-number-sequences" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Para permitir la programación de la generación automática de facturas usando la sección <a class="reference internal" href="index.html#invoice-schedulers"><span class="std std-ref">Programadores de facturas</span></a>, los números de factura deben crearse usando una secuencia de números definida.</p>
<p>Esta sección permite al operador de la marca crear tantas secuencias como sea necesario llenando estos campos:</p>
<blockquote>
<div><dl class="docutils">
<dt>Nombre</dt>
<dd><p class="first last">Usado para referenciar esta secuencia en la ventana de generación de facturas.</p>
</dd>
<dt>Prefijo</dt>
<dd><p class="first last">Precedido en cualquier número generado por esta secuencia.</p>
</dd>
<dt>Longitud de la secuencia</dt>
<dd><p class="first last">Se añadirán ceros para cumplir con esta longitud.</p>
</dd>
<dt>Incremento</dt>
<dd><p class="first last">Unidades entre números de factura consecutivos.</p>
</dd>
</dl>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Las secuencias de números de factura son obligatorias para las facturas programadas y opcionales para las facturas manuales.</p>
</div>
<p class="rubric">Ejemplo (prefijo: TEST, longitud de secuencia: 4, incremento: 1)</p>
<p>Los números de secuencia generados serán: TEST0001, TEST0002, TEST0003 y así sucesivamente.</p>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">El campo <strong>Último valor</strong> muestra el valor del último número de factura que usó una secuencia dada.</p>
</div>
</div>
<span id="document-administration_portal/brand/invoicing/fixed_costs"></span><div class="section" id="fixed-costs">
<span id="id1"></span><h4>Costos fijos<a class="headerlink" href="#fixed-costs" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Los costos fijos son conceptos positivos que se pueden añadir a las facturas antes de generar el PDF final.</p>
<p>Puede ser útil para servicios con costo fijo (por ejemplo, FTTH 100 Mbps) de ciertos clientes.</p>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Use plantillas de factura que muestren una tabla personalizada para estos conceptos si su factura tendrá algún costo fijo.</p>
</div>
</div>
<span id="document-administration_portal/brand/invoicing/invoice_templates"></span><div class="section" id="invoice-templates">
<h4>Plantillas de facturas<a class="headerlink" href="#invoice-templates" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Antes de generar una factura de ejemplo, es importante entender que el proceso de creación de facturas utiliza plantillas.</p>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">De esta manera, cada <strong>operador de la marca</strong> puede adaptar qué información se muestra y cómo se muestra esta información, añadir logotipos, gráficos, etc.</p>
</div>
<p>Las plantillas son analizadas por <a class="reference external" href="https://github.com/XaminProject/handlebars.php">handlebars</a> y renderizadas usando la biblioteca <a class="reference external" href="https://wkhtmltopdf.org/">wkhtmltopdf</a>.</p>
<p>El asistente en la sección <strong>Configuración de la marca</strong> &gt; <strong>Plantillas de facturas</strong> incluye una explicación resumida de la creación de plantillas. En el <a class="reference external" href="https://wkhtmltopdf.org/usage/wkhtmltopdf.txt">sitio oficial de wkhtmltopdf</a> hay mucha información adicional. También puede profundizar en las expresiones de plantillas <a class="reference external" href="http://handlebarsjs.com/expressions.html">aquí</a>.</p>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Use la opción <em>Prueba de plantilla</em> para ver una factura de demostración para cada plantilla.</p>
</div>
</div>
</div>
</div>
<span id="document-administration_portal/brand/calls/index"></span><div class="section" id="calls">
<h3>Llamadas<a class="headerlink" href="#calls" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Este grupo muestra listas de llamadas y permite al operador de la marca realizar algunas operaciones sobre ellas:</p>
<div class="toctree-wrapper compound">
<span id="document-administration_portal/brand/calls/active_calls"></span><div class="section" id="active-calls">
<h4>Llamadas activas<a class="headerlink" href="#active-calls" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Esta sección permite al operador principal y al operador de marca ver <strong>llamadas externas activas actuales</strong>.</p>
<div class="admonition warning">
<p class="first admonition-title">Advertencia</p>
<p class="last">Las llamadas internas no se listarán.</p>
</div>
<p>Estas son las columnas mostradas:</p>
<blockquote>
<div><dl class="docutils">
<dt>Duración</dt>
<dd><p class="first last">Muestra la duración del establecimiento de la llamada durante el establecimiento y la duración de la llamada during ongoing call. También muestra la dirección (entrante/saliente) y la información del estado de la llamada, como se explica a continuación.</p>
</dd>
<dt>Marca</dt>
<dd><p class="first last">Marca que realiza una llamada dada (solo se muestra en el nivel dios).</p>
</dd>
<dt>Cliente</dt>
<dd><p class="first last">Cliente que realiza una llamada dada.</p>
</dd>
<dt>Llamante</dt>
<dd><p class="first last">Número de origen de la llamada en E.164.</p>
</dd>
<dt>Llamado</dt>
<dd><p class="first last">Número de destino de la llamada en E.164.</p>
</dd>
<dt>Carrier</dt>
<dd><p class="first last">Carrier/Proveedor de DDI utilizado en la llamada dada.</p>
</dd>
</dl>
</div></blockquote>
<div class="section" id="call-state">
<h5>Estado de la llamada<a class="headerlink" href="#call-state" title="Enlazar permanentemente con este título">¶</a></h5>
<p>El estado de la llamada sigue la <a class="reference external" href="https://tools.ietf.org/html/rfc4235#section-3.7.1">Máquina de Estado de Diálogo propuesta en RFC4235</a>:</p>
<ul>
<li><p class="first"><strong>Intentando</strong></p>
<blockquote>
<div><ul class="simple">
<li><p class="first">INVITE enviado, alguien está intentando hacer una nueva llamada.</p>
</li>
<li><p class="first">Mostrado como <em>Configuración de llamada</em> en esta sección.</p>
</li>
</ul>
</div></blockquote>
</li>
<li><p class="first"><strong>Procediendo</strong></p>
<blockquote>
<div><ul class="simple">
<li><p class="first">Respuesta provisional de los proxies intermedios recibida (generalmente 100 Trying).</p>
</li>
<li><p class="first">Este estado se ignora en esta sección.</p>
</li>
</ul>
</div></blockquote>
</li>
<li><p class="first"><strong>Temprano</strong></p>
<blockquote>
<div><ul class="simple">
<li><p class="first">Respuesta provisional de la parte final recibida (generalmente 180 Ringing).</p>
</li>
<li><p class="first">Mostrado como <em>Sonando</em> en esta sección.</p>
</li>
</ul>
</div></blockquote>
</li>
<li><p class="first"><strong>Confirmado</strong></p>
<blockquote>
<div><ul class="simple">
<li><p class="first">200 OK recibido, llamada confirmada, partes hablando.</p>
</li>
<li><p class="first">Mostrado como <em>En llamada</em> en esta sección.</p>
</li>
</ul>
</div></blockquote>
</li>
<li><p class="first"><strong>Terminado</strong></p>
<blockquote>
<div><ul class="simple">
<li><p class="first">BYE/CANCEL/respuesta de error (&gt;300) recibida, llamada terminada.</p>
</li>
<li><p class="first">La llamada desaparece para mostrar este estado.</p>
</li>
</ul>
</div></blockquote>
</li>
</ul>
<p class="rubric">Ejemplo 1: Llamada exitosa</p>
<p>Una llamada exitosa atraviesa estos estados:</p>
<ul class="simple">
<li><p class="first">Intentando -&gt; Procediendo (opcional) -&gt; Temprano (opcional) -&gt; Confirmado -&gt; Terminado</p>
</li>
</ul>
<p>Eso se codificará en esta sección como:</p>
<ul class="simple">
<li><p class="first">Configuración de llamada -&gt; Sonando (opcional) -&gt; En llamada -&gt; La llamada desaparece</p>
</li>
</ul>
<p class="rubric">Ejemplo 2: Llamada no exitosa</p>
<p>Una llamada no exitosa atraviesa estos estados:</p>
<ul class="simple">
<li><p class="first">Intentando -&gt; Procediendo (opcional) -&gt; Temprano (opcional) -&gt; Terminado</p>
</li>
</ul>
<p>Eso se mostrará en esta sección como:</p>
<ul class="simple">
<li><p class="first">Configuración de llamada -&gt; Sonando (opcional) -&gt; La llamada desaparece</p>
</li>
</ul>
</div>
</div>
<span id="document-administration_portal/brand/calls/external_calls"></span><div class="section" id="external-calls">
<h4>Llamadas externas<a class="headerlink" href="#external-calls" title="Enlazar permanentemente con este título">¶</a></h4>
<p>La sección de <strong>Llamadas externas</strong> lista <strong>tanto las llamadas externas entrantes como salientes</strong>.</p>
<p>Esta sección se muestra en diferentes niveles:</p>
<ul class="simple">
<li><p class="first">Nivel principal (nivel dios)</p>
</li>
<li><p class="first">Nivel de marca (filtrado para la marca emulada/registrada).</p>
</li>
<li><p class="first">Nivel de cliente (filtrado para el cliente emulado/registrado).</p>
</li>
</ul>
<p>Cada entrada muestra esta información:</p>
<blockquote>
<div><dl class="docutils">
<dt>Hora de inicio</dt>
<dd><p class="first last">Fecha y hora del establecimiento de la llamada.</p>
</dd>
<dt>Marca</dt>
<dd><p class="first last">Solo visible para <em>dios</em>, muestra la marca de cada llamada.</p>
</dd>
<dt>Cliente</dt>
<dd><p class="first last">Visible para <em>dios</em> y <em>operador de marca</em>, muestra el cliente de cada llamada.</p>
</dd>
<dt>Llamante</dt>
<dd><p class="first last">DDI presentado para la llamada saliente.</p>
</dd>
<dt>Llamado</dt>
<dd><p class="first last">Número externo marcado.</p>
</dd>
<dt>Duración</dt>
<dd><p class="first last">Muestra cuánto duró la llamada.</p>
</dd>
<dt>Precio</dt>
<dd><p class="first last">La cantidad de dinero para el cliente. Visible para <em>dios</em> y <em>operador de marca</em> y <em>Administrador del cliente</em> si <em>Mostrar detalles de facturación al cliente</em> está habilitado.</p>
</dd>
<dt>Costo</dt>
<dd><p class="first last">Visible para <em>dios</em> y <em>operador de marca</em>, la cantidad de dinero para la marca (el dinero que el carrier facturará por la llamada).</p>
</dd>
<dt>Plan de tarifas</dt>
<dd><p class="first last">Plan de tarifas utilizado para establecer el precio de la llamada. Visible para <em>dios</em> y <em>operador de marca</em> y <em>Administrador del cliente</em> si <em>Mostrar detalles de facturación al cliente</em> está habilitado.</p>
</dd>
<dt>Destino</dt>
<dd><p class="first last">Destino que coincidió con la llamada para la facturación. Visible para <em>dios</em> y <em>operador de marca</em> y <em>Administrador del cliente</em> si <em>Mostrar detalles de facturación al cliente</em> está habilitado.</p>
</dd>
<dt>Carrier</dt>
<dd><p class="first last">Visible para <em>dios</em> y <em>operador de marca</em>, muestra qué <a class="reference internal" href="index.html#carriers"><span class="std std-ref">Carrier</span></a> se utilizó para cada llamada saliente.</p>
</dd>
<dt>Proveedor DDI</dt>
<dd><p class="first last">Visible para <em>dios</em> y <em>operador de marca</em>, muestra qué <a class="reference internal" href="index.html#ddi-providers"><span class="std std-ref">Proveedor DDI</span></a> se utilizó para cada llamada entrante.</p>
</dd>
<dt>Factura</dt>
<dd><p class="first last">Visible para <em>dios</em> y <em>operador de marca</em>, muestra si una llamada ya está incluida en alguna <a class="reference internal" href="index.html#invoices"><span class="std std-ref">Factura</span></a>.</p>
</dd>
<dt>ID de llamada</dt>
<dd><p class="first last">Muestra el ID de la llamada para la resolución de problemas y exportación CSV.</p>
</dd>
<dt>Tipo de punto final</dt>
<dd><p class="first last">Valores posibles: RetailAccount, ResidentialDevice, User, Fax, Friend.</p>
</dd>
<dt>ID del punto final</dt>
<dd><p class="first last">ID interno del punto final específico (solo cuando <em>endpointType</em> no está vacío).</p>
</dd>
<dt>Nombre del punto final</dt>
<dd><p class="first last">Extensión de usuario, nombre de amigo, nombre de fax, nombre de cuenta minorista o nombre de dispositivo residencial (solo cuando <em>endpointId</em> no está vacío).</p>
</dd>
</dl>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Un proceso asincrónico analiza cada llamada externa y la agrega a esta lista unos minutos después de colgar la llamada. Los campos relacionados con la facturación, como costo y precio, estarán vacíos para las llamadas entrantes externas.</p>
</div>
<div class="section" id="call-rerating">
<h5>Recalificación de llamada<a class="headerlink" href="#call-rerating" title="Enlazar permanentemente con este título">¶</a></h5>
<p>En el <strong>nivel de marca</strong>, hay una operación adicional disponible para llamadas salientes: <strong>Recalificar llamada</strong>. Esta opción permite llamar al motor de calificación nuevamente para una llamada o un grupo de llamadas.</p>
<p>Notas sobre este proceso de recalificación:</p>
<ul class="simple">
<li><p class="first">Si una llamada está en una factura, no se puede recalificar. La factura debe eliminarse primero.</p>
</li>
<li><p class="first">La llamada se recalificará con la <em>Hora de inicio</em> de la llamada (no con los planes de tarifas activos actuales, sino con los planes de tarifas activos en el momento de la llamada).</p>
</li>
<li><p class="first">Tanto <em>Precio</em> como <em>Costo</em> se recalcularán. Esto puede implicar actualizar <em>plan de tarifas</em> y <em>destino</em> también.</p>
</li>
</ul>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Cuando una llamada se recalifica, el costo y el precio se vacían hasta la siguiente iteración de la tarea asincrónica.</p>
</div>
</div>
</div>
<span id="document-administration_portal/brand/calls/call_csv_schedulers"></span><div class="section" id="call-csv-schedulers">
<span id="id1"></span><h4>Programadores de CSV de llamadas<a class="headerlink" href="#call-csv-schedulers" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Esta sección permite programar informes CSV periódicos automáticos para los operadores de marca.</p>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Esta sección es casi idéntica a <a class="reference internal" href="index.html#invoice-schedulers"><span class="std std-ref">Programadores de facturas</span></a> excepto por los campos que no se aplican a los CSV (secuencia de número de factura, tasa de impuesto...)</p>
</div>
<p>Al agregar una nueva definición, se muestran estos campos:</p>
<blockquote>
<div><dl class="docutils">
<dt>Nombre</dt>
<dd><p class="first last">Nombre del CSV de llamadas programado</p>
</dd>
<dt>Correo electrónico</dt>
<dd><p class="first last">Enviar el CSV de llamadas generado por correo electrónico. Vacío si no se desea correo automático.</p>
</dd>
<dt>Tipo de cliente</dt>
<dd><p class="first last">Seleccionar <em>Todos</em> generará un CSV que contiene llamadas de todos los clientes. Seleccionar un tipo de cliente permitirá seleccionar un cliente específico de ese tipo.</p>
</dd>
<dt>Plantilla de notificación</dt>
<dd><p class="first last">Utilizado en notificaciones por correo electrónico para programadores que contienen llamadas de todos los clientes. En programadores específicos de clientes, se utilizará la plantilla de notificación asignada al cliente específico.</p>
</dd>
<dt>Frecuencia/Unidad</dt>
<dd><p class="first last">Define la frecuencia (una vez al mes, cada 7 días, etc.) de la tarea programada</p>
</dd>
<dt>Dirección</dt>
<dd><p class="first last">Define qué llamadas deben incluirse según su dirección (entrante, saliente, ambas).</p>
</dd>
<dt>Carrier</dt>
<dd><p class="first last">Solo para informes de <em>Dirección: saliente</em>, permite filtrar llamadas de un carrier específico.</p>
</dd>
<dt>Cliente</dt>
<dd><p class="first last">Solo para <em>Tipo de cliente</em> diferente de <em>Todos</em>, permite seleccionar un cliente específico del tipo elegido.</p>
</dd>
<dt>DDI</dt>
<dd><p class="first last">Lista todos los DDI del cliente elegido para obtener solo llamadas desde/hacia ese DDI específico.</p>
</dd>
<dt>Tipo de punto final</dt>
<dd><p class="first last">Permite seleccionar un tipo de punto final específico del cliente elegido. Dependiendo del tipo de cliente, se listarán diferentes valores.</p>
</dd>
<dt>Dispositivo residencial</dt>
<dd><p class="first last">Solo para <em>Tipo de cliente: residencial</em> y <em>Tipo de punto final: dispositivo residencial</em>, permite seleccionar un dispositivo residencial específico del cliente elegido.</p>
</dd>
<dt>Cuenta minorista</dt>
<dd><p class="first last">Solo para <em>Tipo de cliente: minorista</em>, permite seleccionar una cuenta minorista específica del cliente elegido.</p>
</dd>
<dt>Usuario</dt>
<dd><p class="first last">Solo para <em>Tipo de cliente: vpbx</em> y <em>Tipo de punto final: usuario</em>, permite seleccionar un usuario específico del cliente elegido.</p>
</dd>
<dt>Fax</dt>
<dd><p class="first last">Solo para <em>Tipo de cliente: vpbx/residencial</em> y <em>Tipo de punto final: fax</em>, permite seleccionar un fax específico del cliente elegido.</p>
</dd>
<dt>Amigo</dt>
<dd><p class="first last">Solo para <em>Tipo de cliente: vpbx</em> y <em>Tipo de punto final: amigo</em>, permite seleccionar un amigo específico del cliente elegido.</p>
</dd>
</dl>
</div></blockquote>
<p>Una vez creado, algunos campos y subsecciones nuevos son accesibles:</p>
<blockquote>
<div><dl class="docutils">
<dt>Próxima ejecución</dt>
<dd><p class="first last">Muestra la fecha de la próxima ejecución</p>
</dd>
<dt>Última ejecución</dt>
<dd><p class="first last">Muestra la última ejecución y su resultado.</p>
</dd>
</dl>
</div></blockquote>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Modificar el valor de <em>Próxima ejecución</em> permite forzar ejecuciones específicas. Por ejemplo, configurar <em>Próxima ejecución</em> al primer día del mes actual creará nuevamente el informe CSV del mes pasado (para un programador mensual).</p>
</div>
<p>Los CSV generados de cada programador se pueden acceder en la subsección <strong>Lista de informes CSV de llamadas</strong>.</p>
<div class="section" id="csv-fields">
<h5>Campos CSV<a class="headerlink" href="#csv-fields" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Estos son los campos de los archivos CSV generados:</p>
<blockquote>
<div><dl class="docutils">
<dt>callid</dt>
<dd><p class="first last">Call-ID del diálogo SIP</p>
</dd>
<dt>Hora de inicio</dt>
<dd><p class="first last">Hora y fecha del establecimiento de la llamada</p>
</dd>
<dt>duración</dt>
<dd><p class="first last">Duración de la llamada en segundos</p>
</dd>
<dt>llamante</dt>
<dd><p class="first last">Número del llamante en formato E.164 (con &#8216;+&#8217;)</p>
</dd>
<dt>llamado</dt>
<dd><p class="first last">Número del llamado en formato E.164 (con &#8216;+&#8217;)</p>
</dd>
<dt>costo</dt>
<dd><p class="first last">Costo calculado para la llamada dada</p>
</dd>
<dt>precio</dt>
<dd><p class="first last">Precio calculado para la llamada dada</p>
</dd>
<dt>tipo de punto final</dt>
<dd><p class="first last">Valores posibles: RetailAccount, ResidentialDevice, User, Fax, Friend.</p>
</dd>
<dt>ID del punto final</dt>
<dd><p class="first last">ID interno del punto final específico (solo cuando <em>endpointType</em> no está vacío).</p>
</dd>
<dt>Nombre del punto final</dt>
<dd><p class="first last">Extensión de usuario, nombre del amigo, nombre del fax, nombre de la cuenta minorista o nombre del dispositivo residencial (solo cuando <em>endpointId</em> no está vacío).</p>
</dd>
<dt>dirección</dt>
<dd><p class="first last">Valores posibles: entrante, saliente.</p>
</dd>
<dt>ID de la empresa</dt>
<dd><p class="first last">ID del cliente</p>
</dd>
<dt>ID del carrier</dt>
<dd><p class="first last">Solo para llamadas salientes, ID interno del carrier utilizado</p>
</dd>
<dt>ID del proveedor de DDI</dt>
<dd><p class="first last">Solo para llamadas entrantes, ID interno del proveedor de DDI utilizado</p>
</dd>
<dt>ID del DDI</dt>
<dd><p class="first last">DDI del cliente al que se asignará la llamada (llamado para llamadas entrantes, llamante para llamadas salientes). Vacío para clientes mayoristas.</p>
</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="ddi-provider-detection">
<h5>Detección del proveedor de DDI<a class="headerlink" href="#ddi-provider-detection" title="Enlazar permanentemente con este título">¶</a></h5>
<p>La detección del proveedor de DDI merece una explicación más profunda ya que no es tan inequívoca como el Carrier (el carrier es el elegido por la lógica de enrutamiento, no hay duda aquí).</p>
<p>La lógica de detección del proveedor de DDI está directamente relacionada con la lógica de detección de DDI subyacente.</p>
<p>Cuando IvozProvider recibe una INVITACIÓN a KamTrunks de una entidad externa:</p>
<ol class="arabic">
<li><p class="first">La IP de origen se compara con todas las direcciones de los proveedores de DDI (de todas las marcas).</p>
<blockquote>
<div><ul class="simple">
<li><p class="first">Si ninguno coincide, la llamada es rechazada.</p>
</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">El DDI se transforma en un bucle utilizando las reglas de transformación de los proveedores de DDI coincidentes (el id más bajo, el primero).</p>
</li>
<li><p class="first">Tan pronto como el DDI transformado coincide con un DDI (en E.164) dentro de la misma marca, el bucle termina y la llamada es aceptada.</p>
<blockquote>
<div><ul class="simple">
<li><p class="first">Si el bucle termina sin ninguna coincidencia, la llamada es rechazada.</p>
</li>
</ul>
</div></blockquote>
</li>
</ol>
<p>El proveedor de DDI que permitió esa coincidencia se guarda como proveedor de DDI para esa llamada entrante, excepto:</p>
<ul class="simple">
<li><p class="first">El DDI coincidente está vinculado a otro proveedor de DDI que también coincide con la dirección IP de origen. Si esto sucede, el proveedor de DDI vinculado se guarda en su lugar.</p>
</li>
</ul>
</div>
<div class="section" id="using-csv-scheduler-as-a-one-shot-csv-generator">
<h5>Usar el programador de CSV como un generador de CSV de una sola vez<a class="headerlink" href="#using-csv-scheduler-as-a-one-shot-csv-generator" title="Enlazar permanentemente con este título">¶</a></h5>
<p>La sección <em>Llamadas externas</em> puede filtrar la lista y exportar las filas resultantes a CSV, pero los criterios de filtrado son mucho más poderosos en la sección <em>Programadores de CSV de llamadas</em>.</p>
<p>Es por eso que <strong>podría ser útil usar esta sección incluso si no estamos interesados en programar ningún CSV recurrente</strong>.</p>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Programar un CSV para generar solo un CSV podría ser útil ya que <em>Programadores de CSV de llamadas</em> tienen más criterios de filtrado que la sección <em>Llamadas externas</em>.</p>
</div>
<p>Imagina que necesitas:</p>
<ul class="simple">
<li><p class="first">Fecha de inicio: 2020/06/02 (incluida)</p>
</li>
<li><p class="first">Fecha de finalización: 2020/06/14 (incluida)</p>
</li>
<li><p class="first">Cliente: XXX (vpbx)</p>
</li>
<li><p class="first">Llamadas entrantes al DDI YYY respondidas por el usuario ZZZ</p>
</li>
</ul>
<p>Para lograr un CSV así usando la sección de programadores, <strong>crearíamos un programador</strong> con estos datos:</p>
<ul class="simple">
<li><p class="first">Tipo de cliente: vpbx</p>
</li>
<li><p class="first">Cliente: XXX</p>
</li>
<li>DDI: YYY</li>
<li><p class="first">Tipo de punto final: usuario</p>
</li>
<li><p class="first">Usuario: ZZZ</p>
</li>
<li><p class="first">Dirección: entrante.</p>
</li>
<li><p class="first">Unidad: días.</p>
</li>
<li><p class="first">Frecuencia: 13</p>
</li>
</ul>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Asegúrate de configurar <em>Unidad</em> en días y <em>Frecuencia</em> en la cantidad de días deseados en el CSV resultante. En el ejemplo, del 2 de junio al 14, ambos incluidos, tenemos 13 días.</p>
</div>
<p>Una vez generado, <strong>editaríamos la hora de la próxima ejecución</strong> de la fecha de mañana a 2020/06/15, dejando la hora sin cambios.</p>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Asegúrate de modificar <em>Próxima ejecución</em> al primer día no deseado en el CSV resultante.</p>
</div>
<p>Luego <strong>esperaremos unos minutos</strong> hasta que el programador genere nuestro CSV, <strong>lo descargaremos</strong> y <strong>eliminaremos la fila para evitar la generación recurrente de CSV</strong>.</p>
</div>
</div>
</div>
</div>
<span id="document-administration_portal/brand/settings/index"></span><div class="section" id="settings">
<h3>Configuraciones<a class="headerlink" href="#settings" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Este grupo contiene dos tipos de secciones:</p>
<ul class="simple">
<li><p class="first">Configuración global de la marca</p>
</li>
<li><p class="first">Valores predeterminados de la marca para nuevos clientes</p>
</li>
</ul>
<p>Estos serán los temas cubiertos:</p>
<div class="toctree-wrapper compound">
<span id="document-administration_portal/brand/settings/client_portals"></span><div class="section" id="id1">
<span id="client-portals"></span><span id="id2"></span><h4>Portales de Clientes<a class="headerlink" href="#id1" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Esta sección permite la configuración de portales de clientes:</p>
<blockquote>
<div><ul class="simple">
<li><p class="first"><strong>Cliente</strong>: Portal de administración para todos los tipos de clientes</p>
</li>
<li><p class="first"><strong>Usuario</strong>: Portal especial para usuarios de PBXs Virtuales</p>
</li>
</ul>
</div></blockquote>
<div class="admonition warning">
<p class="first admonition-title">Advertencia</p>
<ul class="last simple">
<li><p class="first">Las URLs DEBEN ser HTTPS</p>
</li>
<li><p class="first">Las URLs NO DEBEN terminar con una barra /</p>
</li>
</ul>
</div>
<p>Cada URL también puede configurar un logo por URL, un tema y una frase para usar como título del portal, permitiendo la creación de portales corporativos por cliente.</p>
</div>
<span id="document-administration_portal/brand/settings/special_numbers"></span><div class="section" id="special-numbers">
<span id="id1"></span><h4>Números Especiales<a class="headerlink" href="#special-numbers" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Esta sección permite agregar números especiales a nivel de marca. Los números agregados aquí se manejarán como se explica en <a class="reference internal" href="index.html#global-special-numbers"><span class="std std-ref">Números Especiales Globales</span></a> sólo para esa marca.</p>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Los números listados en <a class="reference internal" href="index.html#global-special-numbers"><span class="std std-ref">Números Especiales Globales</span></a> también se manejarán de manera diferente.</p>
</div>
</div>
<span id="document-administration_portal/brand/settings/numeric_transformations"></span><div class="section" id="transformaciones-numericas">
<span id="numeric-transformations"></span><span id="transformations"></span><span id="id1"></span><h4>Transformaciones numéricas<a class="headerlink" href="#transformaciones-numericas" title="Enlazar permanentemente con este título">¶</a></h4>
<p><strong>IvozProvider</strong> está diseñado para proporcionar servicio <strong>en cualquier lugar del planeta</strong>, no solo en el país original donde se instaló la plataforma.</p>
<p>Un concepto muy importante para lograr este objetivo es la transformación numérica, que <strong>adapta los diferentes sistemas de formato de números de los países del mundo</strong> definidos en <a class="reference external" href="https://www.itu.int/rec/T-REC-E.164/es">E.164</a> <strong>a un formato neutral</strong>.</p>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Los <em>conjuntos</em> de transformación numérica deben asignarse a <a class="reference internal" href="index.html#carriers"><span class="std std-ref">Carriers</span></a>, <a class="reference internal" href="index.html#ddi-providers"><span class="std std-ref">Proveedores DDI</span></a>, <strong>Clientes</strong> y <strong>Puntos finales de usuario</strong> (Usuarios, Amigos, cuentas minoristas, dispositivos residenciales, etc.) para definir la forma en que cada entidad se comunica con IvozProvider.</p>
</div>
<p>Hay dos escenarios de transformación diferentes:</p>
<div class="section" id="incoming-transformations">
<h5>Transformaciones entrantes<a class="headerlink" href="#incoming-transformations" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Cuando se recibe una nueva llamada en IvozProvider que coincide con un proveedor que ha sido configurado para <em>peering</em>, debemos adaptar los números que hacen referencia a:</p>
<ul class="simple">
<li><p class="first">Origen de la llamada</p>
</li>
<li><p class="first">Destino de la llamada</p>
</li>
</ul>
<p>Dependiendo del país del proveedor, los números internacionales tendrán un formato u otro. En este caso, el proveedor español usará, por ejemplo:</p>
<ul class="simple">
<li><p class="first">00 + 33 + número perteneciente a Francia</p>
</li>
<li><p class="first">Es posible que los números internacionales vengan sin el código 00.</p>
</li>
<li><p class="first">Es posible que, si la llamada proviene del mismo país que el proveedor, el número venga sin el código de llamada (911234567 en lugar de 00 + 34 + 911234567 para España).</p>
</li>
</ul>
<p>Para un proveedor ucraniano, que no usa el 00 como código internacional:</p>
<ul class="simple">
<li><p class="first">Usará 810 + 33 + número perteneciente a Francia.</p>
</li>
<li><p class="first">Es posible que incluso parte del código internacional (00 en la mayoría de los países del mundo) el proveedor use códigos específicos como prefijo.</p>
</li>
</ul>
<p>El objetivo de la transformación entrante es que, sin importar qué sistema numérico use el proveedor, el número termine en un formato general y común.</p>
<div class="admonition important" id="e164">
<p class="first admonition-title">Importante</p>
<p class="last">Este formato común generalmente se llama E.164 y muestra los números sin código internacional, pero con el código de país: es decir, +34911234567</p>
</div>
</div>
<div class="section" id="outgoing-transformations">
<h5>Transformaciones salientes<a class="headerlink" href="#outgoing-transformations" title="Enlazar permanentemente con este título">¶</a></h5>
<p>De la misma manera que el origen y el destino deben adaptar los números entrantes, será necesario adaptar los números marcados salientes para que funcionen correctamente con cada uno de los proveedores que enrutarán nuestra llamada.</p>
<p>Por ejemplo, para un número con sistema numérico español:</p>
<ul class="simple">
<li><p class="first"><em>Proveedor español</em>: El destino vendrá en E164 (+34911234567) y para este proveedor, podemos eliminar el código de llamada (entenderá que pertenece a su país), por lo que el número enviado será 911234567.</p>
</li>
<li><p class="first"><em>Proveedor francés</em>: El destino vendrá en E164 (+34911234567) y debemos agregar el código internacional para Francia, por lo que el número enviado será 0034911234567.</p>
</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">En resumen, nuestro objetivo es enviar el origen y el destino en el formato que el proveedor espera.</p>
</div>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">La transformación numérica utiliza <a class="reference external" href="https://es.wikipedia.org/wiki/Expresi%C3%B3n_regular">expresiones regulares simples</a> para describir los cambios realizados a los números. Puedes encontrar múltiples tutoriales en la red con el formato básico de expresiones regulares.</p>
</div>
<div class="section" id="add-a-new-transformation-set">
<h6>Agregar un nuevo conjunto de transformaciones<a class="headerlink" href="#add-a-new-transformation-set" title="Enlazar permanentemente con este título">¶</a></h6>
<p>IvozProvider viene con un generador automático de reglas de transformación que se adapta a la mayoría de los países.</p>
<p>Para crear un nuevo conjunto de transformaciones, usa <strong>Agregar transformaciones numéricas</strong>:</p>
<blockquote>
<div><dl class="docutils">
<dt>Nombre</dt>
<dd><p class="first last">Usar para referenciar este conjunto de transformaciones numéricas</p>
</dd>
<dt>Descripción</dt>
<dd><p class="first last">Información adicional para cada conjunto</p>
</dd>
<dt>Creación automática de reglas</dt>
<dd><p class="first last">Si se establece, los campos de <em>Configuración Geográfica</em> se usarán para configurar automáticamente las reglas del conjunto.</p>
</dd>
<dt>Configuración Geográfica</dt>
<dd><p class="first last">Código Internacional del país, código de país, prefijo de troncal si lo hay, código de área si lo hay y longitud del número de suscriptor nacional</p>
</dd>
</dl>
</div></blockquote>
<div class="section" id="example-for-spain">
<h7>Ejemplo para España<a class="headerlink" href="#example-for-spain" title="Enlazar permanentemente con este título">¶</a></h7>
<p>Cumpliendo con la Configuración Geográfica con:</p>
<ul class="simple">
<li><p class="first">Código Internacional: 00</p>
</li>
<li><p class="first">Código de País: +34</p>
</li>
<li><p class="first">Prefijo de Troncal: &lt;vacío&gt;</p>
</li>
<li><p class="first">Código de Área: &lt;vacío&gt;</p>
</li>
<li><p class="first">Longitud del número nacional: 9</p>
</li>
</ul>
<p>Las reglas creadas automáticamente transformarán los números para los proveedores españoles que sigan estas reglas:</p>
<ul class="simple">
<li><p class="first">Un número español: Ni código internacional ni código de llamada (34).</p>
</li>
<li><p class="first">No es un número español: Código internacional (00) y código de llamada (34).</p>
</li>
</ul>
<p>Vamos a revisar este <em>conjunto</em> para entender qué hace la regla de transformación:</p>
<div class="admonition attention">
<p class="first admonition-title">Atención</p>
<p class="last">La generación automática de reglas creará 8 reglas comunes basadas en los parámetros dados. Estas reglas se pueden editar más tarde para cumplir con los requisitos del proveedor.</p>
</div>
</div>
</div>
</div>
<div class="section" id="spanish-incoming-transformation">
<h5>Transformación entrante española<a class="headerlink" href="#spanish-incoming-transformation" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Mostrado en azul en la imagen anterior:</p>
<ul class="simple">
<li><p class="first">Llamado/destino a la izquierda</p>
</li>
<li><p class="first">Llamado/origen a la derecha</p>
</li>
</ul>
<p>Las mismas reglas se aplicarán para el origen y el destino:</p>
<ul>
<li><p class="first">El campo <strong>métrica</strong> se usará para ordenar las reglas (las más pequeñas primero).</p>
<blockquote>
<div><ul class="simple">
<li><p class="first">Si una regla no <em>coincide</em>, se evalúa la siguiente regla.</p>
</li>
<li><p class="first">Si una regla <em>coincide</em>, no se evalúan más reglas.</p>
</li>
<li><p class="first">Si ninguna regla <em>coincide</em>, no se aplica ningún cambio.</p>
</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">El campo <strong>Buscar</strong> se evalúa contra el número (dependiendo del tipo de transformación será destino u origen).</p>
</li>
<li><p class="first">El campo <strong>Reemplazar</strong> usará los grupos de captura que coincidieron con el campo Buscar (mostrados entre corchetes, 1 para el primero, 2 para el segundo, y así sucesivamente) para determinar cómo terminará el número.</p>
</li>
</ul>
</div>
<div class="section" id="spanish-outgoing-transformation">
<h5>Transformación saliente española<a class="headerlink" href="#spanish-outgoing-transformation" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Siguiendo la misma lógica, estas 2 reglas realizan el cambio de los números de destino externos salientes.</p>
<div class="admonition attention">
<p class="first admonition-title">Atención</p>
<p class="last"><strong>En resumen</strong>: la transformación numérica puede adaptar los números de origen y destino a E.164 para la plataforma, y a los formatos esperados por los proveedores, basado en expresiones regulares y métricas que se pueden agrupar en <em>conjuntos</em> para ser compartidos entre múltiples <strong>Operadores</strong>.</p>
</div>
<div class="section" id="conclusion">
<h6>Conclusión<a class="headerlink" href="#conclusion" title="Enlazar permanentemente con este título">¶</a></h6>
<p>Esta es una sección clave que permite crear conjuntos que permitirán a IvozProvider realizar las traducciones numéricas necesarias para &#8216;hablar&#8217; con todas las entidades externas:</p>
<ul class="simple">
<li><p class="first">Proveedores (operadores y proveedores DDI)</p>
</li>
<li><p class="first">Puntos finales del cliente (Usuarios, Amigos, Cuentas minoristas, Cuentas residenciales, Clientes mayoristas)</p>
</li>
</ul>
<p>Esos conjuntos:</p>
<ul class="simple">
<li><p class="first">Convertirán el formato externo personalizado a E.164 para uso interno.</p>
</li>
<li><p class="first">Convertirán E.164 a formato externo personalizado para uso externo.</p>
</li>
</ul>
<p>Encabezados SIP convertidos:</p>
<ul class="simple">
<li><p class="first">Encabezados de destino (R-URI/To/Refer-To)</p>
</li>
<li><p class="first">Encabezados de origen (From/RPID/PAI/Diversion)</p>
</li>
</ul>
<p>Para todas estas transformaciones se necesita conocimiento de <a class="reference external" href="http://php.net/manual/en/reference.pcre.pattern.syntax.php">Expresiones Regulares</a>, a menos que las reglas creadas automáticamente funcionen de inmediato.</p>
</div>
</div>
</div>
<span id="document-administration_portal/brand/settings/notification_templates"></span><div class="section" id="id1">
<span id="notification-templates"></span><span id="id2"></span><h4>Plantillas de Notificación<a class="headerlink" href="#id1" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Los administradores de la marca pueden configurar las notificaciones enviadas por IvozProvider:</p>
<ul class="simple">
<li><p class="first">Correo electrónico enviado cuando se recibe un nuevo buzón de voz</p>
</li>
<li><p class="first">Correo electrónico enviado cuando se recibe un nuevo fax</p>
</li>
<li><p class="first">Correo electrónico enviado cuando el saldo está por debajo del umbral configurado</p>
</li>
<li><p class="first">Correo electrónico enviado cuando se genera una factura automática</p>
</li>
<li><p class="first">Correo electrónico enviado cuando se generan CSVs de CDR programados</p>
</li>
<li><p class="first">Correo electrónico enviado cuando se alcanza el uso máximo diario</p>
</li>
<li><p class="first">Correo electrónico enviado con credenciales de acceso</p>
</li>
</ul>
<div class="admonition hint">
<p class="first admonition-title">Consejo</p>
<p class="last">Cuando no se configura una notificación personalizada, se usarán las predeterminadas</p>
</div>
<p>Las notificaciones se crean en dos pasos: Crear un tipo de notificación y agregar contenido a la notificación para cada idioma requerido.</p>
<div class="section" id="creating-a-new-notification">
<h5>Creando una nueva notificación<a class="headerlink" href="#creating-a-new-notification" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Los administradores de la marca pueden crear nuevas plantillas de notificación en <strong>Configuración de la marca</strong> &gt; <strong>Plantillas de notificación</strong>:</p>
<p>Los campos son casi autoexplicativos:</p>
<blockquote>
<div><dl class="docutils">
<dt>Nombre</dt>
<dd><p class="first last">Usado para identificar esta plantilla de notificación</p>
</dd>
<dt>Tipo</dt>
<dd><p class="first last">Determina el tipo de notificación. Cada tipo de notificación tiene sus propias variables de sustitución disponibles para reemplazar el contenido del asunto y el cuerpo.</p>
</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="adding-notification-contents">
<h5>Agregando contenido de notificación<a class="headerlink" href="#adding-notification-contents" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Una vez que se ha creado la notificación, puedes agregar contenido en diferentes idiomas. IvozProvider usará automáticamente el idioma adecuado según el destino:</p>
<blockquote>
<div><ul class="simple">
<li><p class="first">Para los buzones de voz, se usará el idioma del usuario</p>
</li>
<li><p class="first">Para los faxes, se usará el idioma del cliente.</p>
</li>
</ul>
</div></blockquote>
<p>Campos configurables de cada contenido:</p>
<blockquote>
<div><dl class="docutils">
<dt>Idioma</dt>
<dd><p class="first last">Idioma del contenido.</p>
</dd>
<dt>Nombre del remitente</dt>
<dd><p class="first last">El nombre del remitente utilizado al enviar correos electrónicos (p.e. Notificaciones de Buzón de Voz de IvozProvider)</p>
</dd>
<dt>Dirección del remitente</dt>
<dd><p class="first last">La dirección del remitente utilizada al enviar correos electrónicos (p.e. <a class="reference external" href="mailto:no-reply&#37;&#52;&#48;ivozprovider&#46;com">no-reply<span>&#64;</span>ivozprovider<span>&#46;</span>com</a>)</p>
</dd>
<dt>Variables de sustitución</dt>
<dd><p class="first last">Variables disponibles que se pueden usar en el asunto y el cuerpo que serán reemplazadas antes de enviar el correo electrónico. Cada tipo de notificación tiene sus propias variables.</p>
</dd>
<dt>Asunto</dt>
<dd><p class="first last">Asunto del correo electrónico a enviar. Puedes incluir variables de sustitución aquí.</p>
</dd>
<dt>Tipo de cuerpo</dt>
<dd><p class="first last">El cuerpo del correo puede ser tanto texto plano como html.</p>
</dd>
<dt>Cuerpo</dt>
<dd><p class="first last">Cuerpo del correo electrónico a enviar. Puedes incluir variables de sustitución aquí.</p>
</dd>
</dl>
</div></blockquote>
<div class="admonition hint">
<p class="first admonition-title">Consejo</p>
<p class="last">No es necesario crear todos los idiomas del contenido. Si la notificación personalizada no tiene algunos idiomas definidos, se usarán los contenidos predeterminados para ese tipo de notificación.</p>
</div>
</div>
<div class="section" id="using-variables-in-notification-contents">
<h5>Agregando contenido de notificación<a class="headerlink" href="#using-variables-in-notification-contents" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Puedes usar variables en el asunto y el cuerpo del correo electrónico. Cada tipo de notificación tiene su propio conjunto de variables que se pueden usar. Las variables se reemplazan con el valor correspondiente antes de enviar la notificación por correo electrónico.</p>
<ul>
<li><p class="first"><strong>Notificaciones de Buzón de Voz</strong></p>
<blockquote>
<div><table border="1" class="colwidths-given docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">${VM_NAME}</span></code></td>
<td><p class="first last">Nombre del usuario del buzón de voz</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">${VM_DATE}</span></code></td>
<td><p class="first last">Fecha de recepción</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">${VM_DUR}</span></code></td>
<td><p class="first last">Duración del buzón de voz</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">${VM_CIDNAME}</span></code></td>
<td><p class="first last">Nombre del llamante</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">${VM_CIDNUM}</span></code></td>
<td><p class="first last">Número del llamante</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">${VM_MSGNUM}</span></code></td>
<td><p class="first last">Número del buzón de voz</p>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
</li>
<li><p class="first"><strong>Notificaciones de Fax</strong></p>
<blockquote>
<div><table border="1" class="colwidths-given docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">${FAX_NAME}</span></code></td>
<td><p class="first last">Nombre del fax virtual</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">${FAX_PDFNAME}</span></code></td>
<td><p class="first last">Nombre del archivo PDF del fax</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">${FAX_PAGES}</span></code></td>
<td><p class="first last">Número de páginas del PDF del fax</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">${FAX_SRC}</span></code></td>
<td><p class="first last">Número de origen</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">${FAX_DST}</span></code></td>
<td><p class="first last">Número DDI recibido</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">${FAX_DATE}</span></code></td>
<td><p class="first last">Fecha de recepción</p>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
</li>
<li><p class="first"><strong>Notificaciones de Factura</strong></p>
<blockquote>
<div><table border="1" class="colwidths-given docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">${INVOICE_COMPANY}</span></code></td>
<td><p class="first last">Nombre de la empresa</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">${INVOICE_DATE_IN}</span></code></td>
<td><p class="first last">Fecha de inicio</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">${INVOICE_DATE_OUT}</span></code></td>
<td><p class="first last">Fecha de fin</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">${INVOICE_AMOUNT}</span></code></td>
<td><p class="first last">Monto total con impuestos</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">${INVOICE_CURRENCY}</span></code></td>
<td><p class="first last">Moneda</p>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
</li>
<li><p class="first"><strong>Notificaciones de Saldo Bajo</strong></p>
<blockquote>
<div><table border="1" class="colwidths-given docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">${BALANCE_NAME}</span></code></td>
<td><p class="first last">Nombre de la empresa o del operador</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">${BALANCE_AMOUNT}</span></code></td>
<td><p class="first last">Monto actual del saldo</p>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
</li>
<li><p class="first"><strong>Notificaciones de CSV de Llamadas</strong></p>
<blockquote>
<div><table border="1" class="colwidths-given docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">${CALLCSV_COMPANY}</span></code></td>
<td><p class="first last">Nombre de la empresa</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">${CALLCSV_DATE_IN}</span></code></td>
<td><p class="first last">Fecha de inicio</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">${CALLCSV_DATE_OUT}</span></code></td>
<td><p class="first last">Fecha de fin</p>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
</li>
<li><p class="first"><strong>Notificaciones de Uso Máximo Diario</strong></p>
<blockquote>
<div><table border="1" class="colwidths-given docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">${MAXDAILYUSAGE_COMPANY}</span></code></td>
<td><p class="first last">Nombre de la empresa</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">${MAXDAILYUSAGE_AMOUNT}</span></code></td>
<td><p class="first last">Uso máximo diario de la empresa</p>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="assigning-templates-to-clients">
<h5>Asignando plantillas a clientes<a class="headerlink" href="#assigning-templates-to-clients" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Una vez que la notificación ha sido configurada para los idiomas deseados, el administrador de la marca puede asignarla al cliente que la usará. Esto se puede hacer en la sección de configuración de notificaciones de cada cliente. Si el cliente no tiene una notificación configurada, se usarán las notificaciones de la marca para ese cliente. Si la marca no tiene una notificación configurada, se usarán las notificaciones predeterminadas.</p>
</div>
</div>
<span id="document-administration_portal/brand/settings/generic_music_on_hold"></span><div class="section" id="generic-music-on-hold">
<h4>Música en Espera Genérica<a class="headerlink" href="#generic-music-on-hold" title="Enlazar permanentemente con este título">¶</a></h4>
<p><a class="reference internal" href="index.html#music-on-hold"><span class="std std-ref">Música en Espera</span></a> se reproducirá cuando el usuario ponga la llamada en espera y el otro miembro espere hasta que se reanude la llamada.</p>
<p>Si un cliente vPBX ha definido una música en espera, se reproducirá. De lo contrario, se reproducirá la definida por el administrador de la marca en esta sección. Si nada de esto está configurado, se reproducirá una música global.</p>
<p>Se pueden agregar múltiples archivos para reproducir como Música en Espera. El sistema los elegirá aleatoriamente para cada llamada.</p>
<div class="admonition warning">
<p class="first admonition-title">Advertencia</p>
<p class="last">IvozProvider reproducirá MOH solo para clientes vPBX y Residenciales. Los tipos de clientes restantes no tienen capacidades de MOH ya que sus llamadas no atraviesan ningún Servidor de Aplicaciones.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">El cliente residencial escucha la MOH definida por el operador de la marca en esta sección. Si no se configura ninguna, se reproducirá una música global.</p>
</div>
</div>
<span id="document-administration_portal/brand/settings/generic_services"></span><div class="section" id="generic-services">
<span id="brand-services"></span><h4>Servicios Genéricos<a class="headerlink" href="#generic-services" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Esta sección permite al operador de la marca cambiar los servicios predeterminados y los códigos de servicio predeterminados para nuevos clientes.</p>
<p>Por defecto, esta lista tiene todos los servicios y códigos de la sección <strong>Servicio</strong> del nivel superior.</p>
<div class="admonition warning">
<p class="first admonition-title">Advertencia</p>
<p class="last">Cambiar/eliminar el código predeterminado en esta sección solo afectará a los nuevos clientes creados. Los códigos de los clientes existentes no se modificarán.</p>
</div>
<div class="section" id="call-forward-services">
<span id="id1"></span><h5>Servicios de desvío de llamadas<a class="headerlink" href="#call-forward-services" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Los servicios de desvío de llamadas (incondicional, sin respuesta, ocupado e inalcanzable) <strong>solo están disponibles para clientes residenciales</strong> y permiten agregar <strong>desvío de llamadas a números de teléfono nacionales y al buzón de voz</strong>.</p>
<p>Todos los <strong>clientes residenciales dentro de una marca usan los mismos códigos</strong> para acceder a esta función, los definidos en esta sección.</p>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">El desvío de llamadas a números fuera del país de la empresa no es compatible usando códigos de servicios. Use el portal web en su lugar.</p>
</div>
<p class="rubric">Habilitar una configuración de desvío de llamadas</p>
<p>Para habilitar un desvío de llamadas de un tipo dado a un número nacional, el dispositivo residencial debe llamar al código de servicio definido seguido del número de destino. Esto creará y habilitará (o modificará si ya existe uno) un desvío de llamadas del tipo dado a ese número nacional.</p>
<p>Para habilitar un desvío de llamadas de un tipo dado al buzón de voz, el dispositivo residencial debe llamar al código de servicio definido seguido de &#8216;*&#8217;. Esto creará y habilitará (o modificará si ya existe uno) un desvío de llamadas del tipo dado al buzón de voz.</p>
<p class="rubric">Deshabilitar una configuración de desvío de llamadas</p>
<p>Llamar al código sin ningún número adicional eliminará todas las configuraciones de desvío de llamadas activas de ese tipo.</p>
</div>
</div>
<span id="document-administration_portal/brand/settings/generic_match_lists"></span><div class="section" id="generic-match-lists">
<span id="brand-match-lists"></span><h4>Listas de coincidencias genéricas<a class="headerlink" href="#generic-match-lists" title="Enlazar permanentemente con este título">¶</a></h4>
<p><a class="reference internal" href="index.html#id1"><span class="std std-ref">Listas de coincidencia</span></a> están diseñadas para agrupar números o patrones bien conocidos con el fin de utilizarlos en tratamientos específicos.</p>
<p>Los administradores de la marca pueden crear listas de coincidencias genéricas para tenerlas disponibles para nuevos clientes.</p>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Las listas de coincidencias existentes se copiarán para los nuevos clientes de vPBX. Los clientes ya existentes no se verán afectados en absoluto por los cambios realizados aquí.</p>
</div>
</div>
<span id="document-administration_portal/brand/settings/corporations"></span><div class="section" id="corporations">
<span id="id1"></span><h4>Corporaciones<a class="headerlink" href="#corporations" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Las corporaciones permiten agrupar a los clientes en una sola entidad:</p>
<blockquote>
<div><ul class="simple">
<li><p class="first">Permite a <a class="reference internal" href="index.html#internal-friends"><span class="std std-ref">Amigos Inter VPBX</span></a> llamar a la extensión de otro vPBX de la misma Corporación</p>
</li>
</ul>
</div></blockquote>
<p>Estos son los campos que se muestran para nuevas corporaciones:</p>
<blockquote>
<div><dl class="docutils">
<dt>Nombre</dt>
<dd><p class="first last">Usado para referenciar esta corporación</p>
</dd>
<dt>Descripción</dt>
<dd><p class="first last">Información adicional</p>
</dd>
</dl>
</div></blockquote>
<p>La corporación se puede asignar en la pantalla de edición del cliente.</p>
</div>
</div>
</div>
<span id="document-administration_portal/brand/views/index"></span><div class="section" id="views">
<h3>Vistas<a class="headerlink" href="#views" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Las secciones de este grupo enumeran información útil de solo lectura para los operadores de la marca:</p>
<div class="toctree-wrapper compound">
<span id="document-administration_portal/brand/views/ddis"></span><div class="section" id="ddis">
<span id="id1"></span><h4>DDIs<a class="headerlink" href="#ddis" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Esta sección enumera <strong>todos los DDIs configurados</strong> en todos los clientes de la marca.</p>
<p>Facilita responder a estas preguntas:</p>
<ul class="simple">
<li><p class="first">¿Este DDI es de uno de mis clientes? Si es así, ¿de quién?</p>
</li>
<li><p class="first">¿Qué proveedor de DDI lo proporciona?</p>
</li>
<li><p class="first">¿Cuántos DDIs del país X tiene el cliente Y?</p>
</li>
<li>Etc.</li>
</ul>
</div>
<span id="document-administration_portal/brand/views/retail_accounts"></span><div class="section" id="retail-accounts">
<h4>Cuentas minoristas<a class="headerlink" href="#retail-accounts" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Esta sección lista <strong>todas las cuentas minoristas existentes</strong> de cada cliente minorista de la marca.</p>
<p>Como todas las cuentas minoristas de todos los clientes minoristas usan el mismo dominio SIP (dominio SIP de la marca), se debe evitar la colisión usando algún tipo de secuencia numérica. Esta sección puede ser útil para este propósito.</p>
</div>
<span id="document-administration_portal/brand/views/residential_devices"></span><div class="section" id="residential-devices">
<h4>Dispositivos residenciales<a class="headerlink" href="#residential-devices" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Esta sección lista <strong>todos los dispositivos residenciales existentes</strong> de cada cliente residencial de la marca.</p>
<p>Como todos los dispositivos residenciales de todos los clientes residenciales usan el mismo dominio SIP (dominio SIP de la marca), se debe evitar la colisión usando algún tipo de secuencia numérica. Esta sección puede ser útil para este propósito.</p>
</div>
<span id="document-administration_portal/brand/views/users"></span><div class="section" id="users">
<h4>Usuarios<a class="headerlink" href="#users" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Esta sección lista <strong>todos los usuarios de vpbx</strong> en todos los clientes de la marca.</p>
<p>Facilita responder a estas preguntas:</p>
<ul class="simple">
<li><p class="first">¿Qué usuario tiene este correo electrónico?</p>
</li>
<li><p class="first">¿Está registrado el terminal X?</p>
</li>
<li>Etc.</li>
</ul>
</div>
<span id="document-administration_portal/brand/views/ipfilter_blocked_addresses"></span><div class="section" id="ip-filter-blocked-addresses">
<span id="id1"></span><h4>Direcciones bloqueadas por filtro IP<a class="headerlink" href="#ip-filter-blocked-addresses" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Las direcciones listadas aquí han sido bloqueadas al menos una vez por el mecanismo de seguridad <em>filtro IP</em>.</p>
<div class="admonition warning">
<p class="first admonition-title">Advertencia</p>
<p class="last"><strong>Las IPs se bloquean por solicitud, no permanentemente</strong>. Vea <em>Última vez bloqueada</em> para buscar direcciones bloqueadas recientemente y agregarlas a <a class="reference internal" href="index.html#authorized-ip-ranges"><span class="std std-ref">Rangos de IP autorizados</span></a> si son fuentes legítimas.</p>
</div>
</div>
<span id="document-administration_portal/brand/views/bruteforce_attacks"></span><div class="section" id="brute-force-attacks">
<span id="id1"></span><h4>Ataques de fuerza bruta<a class="headerlink" href="#brute-force-attacks" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Las combinaciones de <em>dirección SIP + dirección IP</em> enumeradas aquí han sido bloqueadas (por 12 horas) por el mecanismo de <em>Anti fuerza bruta</em>. El User-Agent puede mostrarse en la columna <em>Descripción</em>.</p>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Puedes desbloquear cualquier fuente usando el botón de bandera verde de cada fila.</p>
</div>
<p>Consulta <a class="reference internal" href="index.html#anti-brute-force-attacks"><span class="std std-ref">Ataques anti fuerza bruta</span></a> para más información.</p>
</div>
</div>
</div>
</div>
</div>
<span id="document-administration_portal/client/index"></span><div class="section" id="client-configuration">
<h2>Configuración del Cliente<a class="headerlink" href="#client-configuration" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Actualmente, hay 4 tipos diferentes de clientes en IvozProvider.</p>
<p>Cada uno de ellos se describe detalladamente en las siguientes secciones:</p>
<div class="toctree-wrapper compound">
<span id="document-administration_portal/client/vpbx/index"></span><div class="section" id="clientes-vpbx">
<span id="vpbx-clients"></span><span id="id1"></span><h3>Clientes vPBX<a class="headerlink" href="#clientes-vpbx" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Esta sección explicará todos estos temas relacionados con el tipo de cliente más completo en IvozProvider:</p>
<div class="toctree-wrapper compound">
<span id="document-administration_portal/client/vpbx/users"></span><div class="section" id="users">
<span id="id1"></span><h4>Usuarios<a class="headerlink" href="#users" title="Enlazar permanentemente con este título">¶</a></h4>
<p>El proceso de instalación crea usuarios <em>Alice</em> y <em>Bob</em>, lo que nos permite probar llamadas internas entre ellos sin mucho esfuerzo.</p>
<p>Omitimos la mayoría de las configuraciones en la configuración de <strong>Usuarios</strong> que describiremos en esta sección.</p>
<div class="section" id="personal-data">
<h5>Datos personales<a class="headerlink" href="#personal-data" title="Enlazar permanentemente con este título">¶</a></h5>
<blockquote>
<div><dl class="docutils">
<dt>Nombre</dt>
<dd><p class="first last">Se utiliza para identificar a este usuario en la mayoría de las pantallas. Este también es el nombre que se mostrará en las llamadas internas realizadas desde este usuario.</p>
</dd>
<dt>Apellido</dt>
<dd><p class="first last">La mayoría de las veces se usa para completar el campo anterior.</p>
</dd>
<dt>Correo electrónico</dt>
<dd><p class="first last">Correo electrónico utilizado para enviar los buzones de voz recibidos del usuario. Esto también se usa para identificar al usuario en su portal.</p>
</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="geographic-configuration">
<h5>Configuración geográfica<a class="headerlink" href="#geographic-configuration" title="Enlazar permanentemente con este título">¶</a></h5>
<dl class="glossary docutils">
<dt id="term-language">Idioma</dt>
<dd><p class="first last">Cuando se reproduce una locución a este usuario, se utiliza este idioma.</p>
</dd>
<dt id="term-timezone">Zona horaria</dt>
<dd><p class="first last">Los tiempos de la lista de llamadas del portal del usuario utilizarán esta zona horaria.</p>
</dd>
<dt id="term-numeric-transformation">Transformación numérica</dt>
<dd><p class="first last">Define cómo se convierten los números del formato de usuario a E.164 y viceversa.</p>
</dd>
<dt id="term-location">Ubicación</dt>
<dd><p class="first last">Ubicación geográfica del usuario donde el usuario está trabajando.</p>
</dd>
</dl>
</div>
<div class="section" id="login-info">
<h5>Información de inicio de sesión<a class="headerlink" href="#login-info" title="Enlazar permanentemente con este título">¶</a></h5>
<blockquote>
<div><dl class="docutils">
<dt>Activo</dt>
<dd><p class="first last">Permite a los administradores otorgar o deshabilitar el acceso del usuario al <a class="reference internal" href="index.html#userportal"><span class="std std-ref">portal del usuario</span></a>.</p>
</dd>
<dt>Contraseña</dt>
<dd><p class="first last">Contraseña utilizada para acceder al <a class="reference internal" href="index.html#userportal"><span class="std std-ref">portal del usuario</span></a>.</p>
</dd>
<dt>Código QR</dt>
<dd><p class="first last">Si está habilitado, se mostrará un código QR para la configuración del softphone Grandstream Wave.</p>
</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="boss-assistant">
<h5>Jefe-Asistente<a class="headerlink" href="#boss-assistant" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Esta función convertirá al usuario en un jefe que solo puede ser llamado directamente por:</p>
<ul class="simple">
<li><p class="first">El asistente seleccionado.</p>
</li>
<li><p class="first">Cualquier origen que coincida con la lista blanca.</p>
</li>
</ul>
<p>El resto de las llamadas a <em>un jefe</em> serán redirigidas al asistente.</p>
<blockquote>
<div><dl class="docutils">
<dt>Es jefe</dt>
<dd><p class="first last">Determina si este usuario es un jefe.</p>
</dd>
<dt>Asistente</dt>
<dd><p class="first last">Quién recibirá las llamadas redirigidas de este jefe.</p>
</dd>
<dt>Lista blanca</dt>
<dd><p class="first last"><a class="reference internal" href="index.html#match-lists"><span class="std std-ref">Listas de coincidencia</span></a> con orígenes que están permitidos para llamar directamente al jefe.</p>
</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="basic-configuration">
<h5>Configuración básica<a class="headerlink" href="#basic-configuration" title="Enlazar permanentemente con este título">¶</a></h5>
<blockquote>
<div><dl class="docutils">
<dt>Terminal</dt>
<dd><p class="first last">Los terminales disponibles creados en <a class="reference internal" href="index.html#terminals"><span class="std std-ref">Terminales</span></a> se enumeran aquí para su asignación.</p>
</dd>
<dt>Extensión de pantalla</dt>
<dd><p class="first last">Una de las <a class="reference internal" href="index.html#extensions"><span class="std std-ref">Extensiones</span></a> disponibles que este usuario mostrará cuando realice llamadas internas. Aunque se pueden enrutar múltiples extensiones al usuario, solo una de ellas se presentará cuando el usuario llame.</p>
</dd>
<dt>DDI saliente</dt>
<dd><p class="first last">Como se describe en <a class="reference internal" href="index.html#external-ddi"><span class="std std-ref">Configuración de DDI saliente</span></a>, determina el número que se presentará al realizar llamadas salientes externas.</p>
</dd>
<dt>Reglas de DDI saliente</dt>
<dd><p class="first last">Gestiona excepciones a la configuración anterior. Lea <a class="reference internal" href="index.html#outgoingddi-rules"><span class="std std-ref">Reglas DDI de salida</span></a> para más información.</p>
</dd>
<dt>ACL de llamadas</dt>
<dd><p class="first last">Uno de los grupos de <a class="reference internal" href="index.html#call-permissions"><span class="std std-ref">ACL de llamadas</span></a> creados, descrito en las secciones anteriores.</p>
</dd>
<dt>No molestar</dt>
<dd><p class="first last">Cuando esta configuración está habilitada, el usuario no recibirá ninguna llamada pero aún puede realizar llamadas.</p>
</dd>
<dt>Llamada en espera</dt>
<dd><p class="first last">Limita las llamadas recibidas cuando ya se está manejando este número de llamadas. Establezca 0 para ilimitado.</p>
</dd>
<dt>Llamadas desde IPs no autorizadas</dt>
<dd><p class="first last">Habilitar llamadas desde direcciones IP no autorizadas para este usuario. Limita el número de llamadas salientes para evitar el fraude de peaje. El valor &#8216;Ninguno&#8217; hace que las llamadas salientes sean ilimitadas siempre que se cumpla la política de IP del cliente. Lea <a class="reference internal" href="index.html#roadwarrior-users"><span class="std std-ref">Usuarios itinerantes</span></a> para más información.</p>
</dd>
<dt>Contacto múltiple</dt>
<dd><p class="first last">Las mismas credenciales SIP se pueden configurar en múltiples dispositivos SIP. En ese caso, todos los dispositivos suenan simultáneamente al recibir una llamada. Configurar este conmutador en &#8216;No&#8217; limita este comportamiento para que solo suene el último dispositivo SIP registrado.</p>
</dd>
<dt>Método de rechazo de llamadas</dt>
<dd><p class="first last">Esta configuración permite configurar un comportamiento en el rechazo de llamadas para usuarios con varios dispositivos SIP (Contacto múltiple: sí). En tales escenarios, todos los dispositivos suenan simultáneamente y el rechazo de llamadas debe elegir si rechazar la llamada solo en el dispositivo que la rechazó o en todos los dispositivos que están sonando. El comportamiento predeterminado es cancelar la llamada en todos los dispositivos para los códigos de respuesta 600/603 y solo en el dispositivo actual para 480/486. Elija si desea forzar un comportamiento u otro sin importar qué código de respuesta envíe su dispositivo SIP al rechazar la llamada.</p>
</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="group-configuration">
<h5>Configuración de grupo<a class="headerlink" href="#group-configuration" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Como se describe en las secciones <a class="reference internal" href="index.html#huntgroups"><span class="std std-ref">Grupos de búsqueda</span></a> y <a class="reference internal" href="index.html#capture-groups"><span class="std std-ref">Grupos de captura</span></a>, el usuario puede ser parte de uno o más grupos de búsqueda y grupos de captura.</p>
<p>Esos grupos se pueden configurar desde las secciones <a class="reference internal" href="index.html#huntgroups"><span class="std std-ref">Grupos de búsqueda</span></a> y <a class="reference internal" href="index.html#capture-groups"><span class="std std-ref">Grupos de captura</span></a> o desde la pantalla del usuario si los grupos ya existen.</p>
<p>También puede configurar los <strong>grupos de búsqueda</strong> del usuario desde el icono en cada línea de usuario de la lista de usuarios.</p>
</div>
<div class="section" id="user-call-forward">
<h5>Desvío de llamadas del usuario<a class="headerlink" href="#user-call-forward" title="Enlazar permanentemente con este título">¶</a></h5>
<p>El desvío de llamadas del usuario se puede configurar con el botón <strong>Lista de configuraciones de desvío de llamadas</strong>.</p>
<p>Estos son los campos y valores disponibles:</p>
<blockquote>
<div><dl class="docutils">
<dt>Activo</dt>
<dd><p class="first last">Permite habilitar o deshabilitar este desvío de llamadas.</p>
</dd>
<dt>Tipo de llamada</dt>
<dd><p class="first last">Determina si el desvío debe aplicarse a llamadas externas, internas o cualquier tipo de llamada.</p>
</dd>
<dt>Tipo de desvío</dt>
<dd><dl class="first last docutils">
<dt>Cuándo debe aplicarse este desvío:</dt>
<dd><ul class="first last simple">
<li><p class="first">Incondicional: siempre</p>
</li>
<li><p class="first">Sin respuesta: cuando la llamada no se responde en X segundos</p>
</li>
<li><p class="first">Ocupado: Cuando el usuario está hablando con alguien (y la llamada en espera está deshabilitada), cuando <em>No molestar</em> está habilitado o cuando el usuario rechaza una llamada entrante.</p>
</li>
<li><p class="first">No registrado: cuando el terminal SIP del usuario no está registrado contra IvozProvider.</p>
</li>
</ul>
</dd>
</dl>
</dd>
<dt>Tipo de destino</dt>
<dd><dl class="first last docutils">
<dt>Qué ruta utilizará la llamada desviada.</dt>
<dd><ul class="first last simple">
<li><p class="first">Buzón de voz</p>
</li>
<li><p class="first">Número (externo)</p>
</li>
<li><p class="first">Extensión (interna)</p>
</li>
</ul>
</dd>
</dl>
</dd>
</dl>
</div></blockquote>
<div class="admonition hint">
<p class="first admonition-title">Consejo</p>
<p class="last">Si queremos desviar a otro proceso, podemos crear una extensión enrutada a ese objeto y usar el tipo de destino <em>Extensión</em>.</p>
</div>
</div>
</div>
<span id="document-administration_portal/client/vpbx/terminals"></span><div class="section" id="terminals">
<span id="id1"></span><h4>Terminales<a class="headerlink" href="#terminals" title="Enlazar permanentemente con este título">¶</a></h4>
<p>La sección <strong>Configuración del cliente</strong> &gt; <strong>Terminales</strong> permite crear nuevas credenciales SIP que pueden ser utilizadas por múltiples dispositivos SIP para realizar y recibir llamadas desde IvozProvider.</p>
<p>La mejor manera de entender esta sección es creando un nuevo elemento y viendo los campos que deben ser completados.</p>
<div class="section" id="login-information">
<h5>Información de inicio de sesión<a class="headerlink" href="#login-information" title="Enlazar permanentemente con este título">¶</a></h5>
<blockquote>
<div><dl class="docutils">
<dt>Nombre</dt>
<dd><p class="first last">Nombre de usuario que utilizará el terminal durante la fase de autenticación SIP con IvozProvider.</p>
</dd>
<dt>Contraseña</dt>
<dd><p class="first last">Contraseña que utilizará el terminal para responder al desafío de autenticación SIP. Puede usar el generador automático de contraseñas para cumplir con los requisitos de contraseña segura.</p>
</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="connection-configuration">
<h5>Configuración de conexión<a class="headerlink" href="#connection-configuration" title="Enlazar permanentemente con este título">¶</a></h5>
<blockquote>
<div><dl class="docutils">
<dt>Codecs permitidos/rechazados</dt>
<dd><p class="first last">Determina qué codecs de audio y video se utilizarán con el terminal.</p>
</dd>
<dt>Modo actualización</dt>
<dd><p class="first last">Elija el método SIP que el terminal prefiere para recibir la información de actualización de la sesión: INVITE o UPDATE. La pista de ayuda puede usarse como guía para configurar diferentes fabricantes de terminales. Use <em>INVITE</em> en caso de duda.</p>
</dd>
<dt>Habilitar pasarela T.38</dt>
<dd><p class="first last">Si se establece en &#8216;sí&#8217;, este punto final SIP debe ser un <strong>fax capaz de T.38 emisor/receptor</strong>. IvozProvider actuará como una pasarela T.38, conectando llamadas de fax de un operador compatible con T.38 y un dispositivo compatible con T.38.</p>
</dd>
<dt>Cifrar RTP</dt>
<dd><p class="first last">Si se establece en &#8216;sí&#8217;, la llamada no se establecerá a menos que sea posible cifrar su audio. Si se establece en &#8216;no&#8217;, el audio no se cifrará.</p>
</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="provisioning">
<h5>Provisioning<a class="headerlink" href="#provisioning" title="Enlazar permanentemente con este título">¶</a></h5>
<blockquote>
<div><dl class="docutils">
<dt>Modelo de Terminales</dt>
<dd><p class="first last">Determina el tipo de aprovisionamiento que recibirá este terminal. La sección <a class="reference internal" href="index.html#provisioning"><span class="std std-ref">provisionamiento de terminales</span></a> explicará en profundidad los diferentes modelos para el aprovisionamiento automático. Si su dispositivo no requiere aprovisionamiento, simplemente seleccione <em>Genérico</em>.</p>
</dd>
<dt>MAC</dt>
<dd><p class="first last">Campo opcional que solo es necesario si planea usar el <a class="reference internal" href="index.html#provisioning"><span class="std std-ref">provisionamiento de terminales</span></a> de IvozProvider. Esta es la <a class="reference external" href="https://wikipedia.org/wiki/MAC_Address">dirección física</a> del adaptador de red del dispositivo SIP.</p>
</dd>
</dl>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Para <strong>la mayoría de los dispositivos</strong> que no requieren aprovisionamiento, solo completar <strong>nombre de usuario</strong> y <strong>contraseña</strong> será suficiente.</p>
</div>
<div class="admonition hint">
<p class="first admonition-title">Consejo</p>
<p class="last">Una vez que se haya creado el terminal, la mayoría de los dispositivos solo requerirán el nombre, la contraseña y el <a class="reference internal" href="index.html#domain-per-client"><span class="std std-ref">dominio SIP del cliente</span></a> para realizar llamadas.</p>
</div>
</div>
</div>
<span id="document-administration_portal/client/vpbx/extensions"></span><div class="section" id="extensions">
<span id="id1"></span><h4>Extensiones<a class="headerlink" href="#extensions" title="Enlazar permanentemente con este título">¶</a></h4>
<p><strong>Una extensión es</strong>, por definición, <strong>un número interno con una lógica asignada</strong>. Las llamadas de usuarios internos a los números listados en esta sección no atraviesan las lógicas de permisos de llamada: <strong>todos los usuarios/friends pueden llamar a cualquier número listado aquí</strong>.</p>
<p class="rubric">Crear una nueva extensión</p>
<dl class="docutils">
<dt>Número</dt>
<dd><p class="first last">El número que debe marcar el usuario interno que activará la lógica configurada. Debe tener una longitud mínima de 2 y debe ser un número.</p>
</dd>
<dt>Ruta</dt>
<dd><p class="first last">Esta selección nos permitirá elegir la lógica que usará esta extensión cuando sea marcada por un usuario interno. Dependiendo de la ruta seleccionada, se mostrará una selección o entrada adicional para seleccionar el grupo de salto, sala de conferencias, usuario, etc.</p>
</dd>
</dl>
<div class="admonition warning">
<p class="first admonition-title">Advertencia</p>
<p class="last">Si una extensión tiene un número que entra en conflicto con un número externo, este número externo será enmascarado y, en la práctica, estará indisponible para todo el cliente.</p>
</div>
<div class="section" id="route-options">
<h5>Opciones de ruta<a class="headerlink" href="#route-options" title="Enlazar permanentemente con este título">¶</a></h5>
<blockquote>
<div><dl class="docutils">
<dt>No asignado</dt>
<dd><p class="first last">Las llamadas a esta extensión serán colgadas.</p>
</dd>
<dt>Usuario</dt>
<dd><p class="first last">Se llamará al <a class="reference internal" href="index.html#users"><span class="std std-ref">usuario</span></a> seleccionado.</p>
</dd>
<dt>IVR</dt>
<dd><p class="first last">Se llamará a la lógica del <a class="reference internal" href="index.html#ivrs"><span class="std std-ref">IVR</span></a> seleccionado.</p>
</dd>
<dt>Grupo de salto</dt>
<dd><p class="first last">Se llamará al <a class="reference internal" href="index.html#huntgroups"><span class="std std-ref">grupo de salto</span></a> seleccionado.</p>
</dd>
<dt>Número</dt>
<dd><p class="first last">Llamar a esta extensión generará una llamada externa saliente al número introducido.</p>
</dd>
<dt>Friend</dt>
<dd><p class="first last">Las llamadas a esta extensión evaluarán la lógica de <a class="reference internal" href="index.html#friends"><span class="std std-ref">friends</span></a>.</p>
</dd>
<dt>Cola</dt>
<dd><p class="first last">La llamada será entregada a la <a class="reference internal" href="index.html#queues"><span class="std std-ref">cola</span></a> seleccionada.</p>
</dd>
<dt>Ruta condicional</dt>
<dd><p class="first last">La llamada será entregada a la <a class="reference internal" href="index.html#id1"><span class="std std-ref">ruta condicional</span></a> seleccionada.</p>
</dd>
<dt>Buzón de voz</dt>
<dd><p class="first last">Las llamadas serán entregadas al <a class="reference internal" href="index.html#voicemails"><span class="std std-ref">buzón de voz</span></a> seleccionado.</p>
</dd>
</dl>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Cualquier usuario interno puede generar una llamada externa saliente a través de una <strong>Extensión enrutada a Número</strong> incluso si sus <em>Permisos de llamada</em> no permiten llamar a ese destino directamente.</p>
</div>
</div>
<div class="section" id="import-aliases">
<h5>Importar alias<a class="headerlink" href="#import-aliases" title="Enlazar permanentemente con este título">¶</a></h5>
<p><em>Extensiones a números</em> son útiles para llamar fácilmente a los números más marcados. Como cada cliente suele tener una lista con números frecuentes, el botón <strong>Importar alias</strong> permite importarlos a través de un archivo CSV.</p>
<p class="rubric">Archivo de importación de ejemplo</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>Extension,CountryPrefix,Number,CountryCode
200,+34,944048184,ES
201,+34,944048185,ES
202,+34,944048186
203,+1,944048187
204,+1,944048188,US
</pre></div>
</div>
<p>Los números se importarán de forma sincrónica siguiendo estas reglas:</p>
<ul class="simple">
<li><p class="first">Si la extensión dada ya existe y apunta a un número: el número se actualiza.</p>
</li>
<li><p class="first">Si la extensión dada ya existe y no apunta a un número: error.</p>
</li>
<li><p class="first">Si el prefijo del país dado no existe: error.</p>
</li>
<li><p class="first">Si el código del país dado no existe: error.</p>
</li>
<li><p class="first">Si la combinación de prefijo y código de país dada no existe: error.</p>
</li>
<li><p class="first">El código de país es opcional: si el prefijo del país dado se usa en múltiples países y no se da el código de país, se selecciona el primer país.</p>
</li>
</ul>
</div>
</div>
<span id="document-administration_portal/client/vpbx/ddis"></span><div class="section" id="ddis">
<span id="pbx-ddis"></span><h4>DDIs<a class="headerlink" href="#ddis" title="Enlazar permanentemente con este título">¶</a></h4>
<div class="section" id="number-data">
<h5>Datos del número<a class="headerlink" href="#number-data" title="Enlazar permanentemente con este título">¶</a></h5>
<blockquote>
<div><dl class="docutils">
<dt>País</dt>
<dd><p class="first last">El país del nuevo DDI creado. Usado para la estandarización E164.</p>
</dd>
<dt>DDI</dt>
<dd><p class="first last">El número, sin código de país.</p>
</dd>
<dt>Nombre en pantalla</dt>
<dd><p class="first last">Este valor se mostrará en los terminales llamados.</p>
</dd>
</dl>
<p>Idioma</p>
<p>Descripción</p>
<dl class="docutils">
<dt>Tipo</dt>
<dd><p class="first last">Elija &#8216;Entrante y saliente&#8217; para un DDI normal que se puede usar tanto como DDI saliente como DDI entrante desde un <a class="reference internal" href="index.html#ddi-providers"><span class="std std-ref">Proveedor DDI</span></a>. Elija &#8216;Solo saliente&#8217; para un DDI que no nos llegará desde un <a class="reference internal" href="index.html#ddi-providers"><span class="std std-ref">Proveedor DDI</span></a> y solo se usará como DDI saliente.</p>
</dd>
<dt>Proveedor DDI</dt>
<dd><p class="first last">El <a class="reference internal" href="index.html#ddi-providers"><span class="std std-ref">Proveedor DDI</span></a> que proporciona este número. Esta relación no tiene un propósito funcional, es solo para la navegación Proveedor &lt;-&gt; DDI en algunas secciones a nivel de marca.</p>
</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="filters-data">
<h5>Datos de filtros<a class="headerlink" href="#filters-data" title="Enlazar permanentemente con este título">¶</a></h5>
<blockquote>
<div><dl class="docutils">
<dt>Filtro de llamada externa</dt>
<dd><p class="first last">Permite la configuración basada en Calendarios y Programadores como se muestra en <a class="reference internal" href="index.html#external-call-filters"><span class="std std-ref">Filtros de llamadas externas</span></a>. Dejar vacío si no necesita aplicar ningún tipo de filtro.</p>
</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="routing-configuration">
<h5>Configuración de enrutamiento<a class="headerlink" href="#routing-configuration" title="Enlazar permanentemente con este título">¶</a></h5>
<blockquote>
<div><dl class="docutils">
<dt>Tipo de ruta</dt>
<dd><p class="first last">Un DDI puede tener diferentes <a class="reference internal" href="#routing-logics"><span class="std std-ref">tratamientos</span></a>. Para nuestro objetivo actual, configure la ruta al usuario y seleccione <em>Alice</em>.</p>
</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="recording-data">
<h5>Datos de grabación<a class="headerlink" href="#recording-data" title="Enlazar permanentemente con este título">¶</a></h5>
<blockquote>
<div><dl class="docutils">
<dt>Grabar llamadas</dt>
<dd><p class="first last">Se puede usar para grabar llamadas externas (ver <a class="reference internal" href="index.html#call-recordings"><span class="std std-ref">Grabaciones de llamadas</span></a>).</p>
</dd>
<dt>Tarificar llamadas entrantes</dt>
<dd><p class="first last">Esta configuración requiere el módulo de tarificación externa y permite la tarificación en números especiales. Este módulo no es estándar, así que no dude en <a class="reference internal" href="index.html#getting-help"><span class="std std-ref">contactarnos</span></a> si está interesado.</p>
</dd>
</dl>
</div></blockquote>
<div class="admonition hint">
<p class="first admonition-title">Consejo</p>
<p class="last">Las llamadas recibidas de un <a class="reference internal" href="index.html#ddi-providers"><span class="std std-ref">Proveedor DDI</span></a> a un DDI &#8216;Solo saliente&#8217; serán rechazadas.</p>
</div>
<div class="admonition hint">
<p class="first admonition-title">Consejo</p>
<p class="last">Las llamadas desde dentro de la plataforma a DDIs &#8216;Entrante y saliente&#8217; no llegarán a ningún operador, se enrutarán internamente.</p>
</div>
</div>
<div class="section" id="ddi-external-filters">
<h5>Filtros externos de DDI<a class="headerlink" href="#ddi-external-filters" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Podemos asignar un <strong>filtro de llamada externa</strong> configurado en <a class="reference internal" href="index.html#external-call-filters"><span class="std std-ref">Filtros de llamadas externas</span></a>.</p>
</div>
<div class="section" id="ddi-routes">
<span id="routing-logics"></span><h5>Rutas DDI<a class="headerlink" href="#ddi-routes" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Una vez que la llamada ha pasado todas las verificaciones en el filtro (horarios y calendarios) y después de que se haya reproducido la locución de bienvenida (si hay alguna configurada), podemos enrutar la llamada a los siguientes procesos:</p>
<ul class="simple">
<li><p class="first"><a class="reference internal" href="index.html#users"><span class="std std-ref">Usuarios</span></a></p>
</li>
<li><p class="first"><a class="reference internal" href="index.html#huntgroups"><span class="std std-ref">Grupos de búsqueda</span></a></p>
</li>
<li><p class="first"><a class="reference internal" href="index.html#ivrs"><span class="std std-ref">IVRs</span></a></p>
</li>
<li><p class="first"><a class="reference internal" href="index.html#conference-rooms"><span class="std std-ref">Salas de conferencias</span></a></p>
</li>
<li><p class="first"><a class="reference internal" href="index.html#conditional-routes"><span class="std std-ref">Rutas condicionales</span></a></p>
</li>
<li><p class="first"><a class="reference internal" href="index.html#queues"><span class="std std-ref">Colas</span></a></p>
</li>
<li><p class="first"><a class="reference internal" href="index.html#friends"><span class="std std-ref">Friends</span></a></p>
</li>
</ul>
<div class="admonition hint">
<p class="first admonition-title">Consejo</p>
<p class="last">También podemos enrutar el DDI a un <a class="reference internal" href="index.html#faxing-system"><span class="std std-ref">Fax Virtual</span></a>, pero esto es algo que explicaremos en el siguiente bloque.</p>
</div>
</div>
</div>
<span id="document-administration_portal/client/vpbx/routing_endpoints/index"></span><div class="section" id="routing-endpoints">
<h4>Items enrutables<a class="headerlink" href="#routing-endpoints" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Los elementos de este grupo se pueden seleccionar como una opción de ruta para DDIs externos y extensiones internas:</p>
<div class="toctree-wrapper compound">
<span id="document-administration_portal/client/vpbx/routing_endpoints/ivrs"></span><div class="section" id="interactive-voice-responses-ivrs">
<h5>Respuestas de Voz Interactivas (IVRs)<a class="headerlink" href="#interactive-voice-responses-ivrs" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Los IVRs son la forma más común de hacer <strong>menús de audio</strong> donde el llamante debe elegir el destino de la llamada <strong>presionando códigos</strong> basados en las instrucciones de las locuciones que se reproducirán.</p>
<div class="section" id="ivrs">
<span id="id1"></span><h6>IVRs<a class="headerlink" href="#ivrs" title="Enlazar permanentemente con este título">¶</a></h6>
<p>Los IVRs admiten especificar acciones para los dígitos marcados, pero también pueden usarse para enrutar cualquier extensión de cliente existente.</p>
<p>Los IVRs tienen los siguientes campos:</p>
</div>
<div class="section" id="basic-configuration">
<h6>Configuración básica<a class="headerlink" href="#basic-configuration" title="Enlazar permanentemente con este título">¶</a></h6>
<blockquote>
<div><dl class="docutils">
<dt>Nombre</dt>
<dd><p class="first last">Nombre descriptivo del IVR que se utilizará en otras secciones.</p>
</dd>
<dt>Tiempo de espera</dt>
<dd><p class="first last">Tiempo que tiene el llamante para ingresar los dígitos de la extensión de destino.</p>
</dd>
<dt>Máximo de dígitos</dt>
<dd><p class="first last">Número máximo de dígitos permitidos en este IVR.</p>
</dd>
<dt>Locución de bienvenida</dt>
<dd><p class="first last">Esta locución se reproducirá tan pronto como el llamante ingrese al IVR.</p>
</dd>
<dt>Locución de éxito</dt>
<dd><p class="first last">En caso de que el número marcado coincida con una de las entradas del IVR o la extensión exista en el cliente (y permitir extensiones esté habilitado), se reproducirá esta locución (generalmente algo como &#8216;Conectando, por favor espere...&#8217;).</p>
</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="dialing-extensions">
<h6>Marcando extensiones<a class="headerlink" href="#dialing-extensions" title="Enlazar permanentemente con este título">¶</a></h6>
<blockquote>
<div><dl class="docutils">
<dt>Permitir marcar extensiones</dt>
<dd><p class="first last">Cuando esta configuración está habilitada, el llamante puede presionar directamente la extensión que debe conocer previamente (o la locución de bienvenida sugiere) y el sistema se conectará automáticamente con esa extensión.</p>
</dd>
<dt>Extensiones excluidas</dt>
<dd><p class="first last">Cuando Permitir extensiones está habilitado, puedes excluir algunas extensiones para que se marquen directamente agregándolas a la lista de exclusión.</p>
</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="no-input-configuration">
<h6>Configuración sin entrada<a class="headerlink" href="#no-input-configuration" title="Enlazar permanentemente con este título">¶</a></h6>
<blockquote>
<div><p>Si el llamante no ingresa ningún dígito en el valor de tiempo de espera, se activará el proceso sin entrada, reproduciendo la locución configurada y redirigiendo a otro número, extensión o buzón de voz.</p>
<dl class="docutils">
<dt>Locución sin entrada</dt>
<dd><p class="first last">Locución que se reproducirá.</p>
</dd>
<dt>Destino sin entrada</dt>
<dd><p class="first last">Número, extensión o buzón de voz al que redirigir después de que se reproduzca la locución. Se requieren campos adicionales dependiendo del valor seleccionado.</p>
</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="error-configuration">
<h6>Configuración de error<a class="headerlink" href="#error-configuration" title="Enlazar permanentemente con este título">¶</a></h6>
<blockquote>
<div><p>Si la extensión marcada no coincide con ninguna entrada del IVR, ninguna extensión de cliente (cuando permitir extensiones está habilitado), o coincide con una de las extensiones en la lista de extensiones excluidas, se activará el proceso de error, reproduciendo la locución configurada y redirigiendo la llamada a otro número, extensión o buzón de voz.</p>
<dl class="docutils">
<dt>Locución</dt>
<dd><p class="first last">Locución que se reproducirá en caso de error.</p>
</dd>
<dt>Destino de error</dt>
<dd><p class="first last">Número, extensión o buzón de voz al que redirigir después de que se reproduzca la locución. Se requieren campos adicionales dependiendo del valor seleccionado.</p>
</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="ivr-entries">
<h6>Entradas IVR<a class="headerlink" href="#ivr-entries" title="Enlazar permanentemente con este título">¶</a></h6>
<div class="admonition hint">
<p class="first admonition-title">Consejo</p>
<p class="last">El uso más común de los IVR es combinarlos con una locución de bienvenida que diga algo como &#8216;Presione 1 para contactar a XXX, Presione 2 para contactar a YYY, ...&#8221;</p>
</div>
<p>El proceso de cada entrada del IVR se puede definir en el siguiente botón:</p>
<p>En este ejemplo, el llamante puede marcar 1, 2 o 3 (el resto se considerará un error y activará el <strong>proceso de error</strong>):</p>
<ul class="simple">
<li><p class="first">1: Llamada a la extensión interna 200, creada en <a class="reference internal" href="index.html#huntgroups"><span class="std std-ref">sección anterior</span></a> que enruta al grupo de búsqueda <em>Recepción</em>.</p>
</li>
<li><p class="first">2: Llamada a la extensión interna 101.</p>
</li>
<li><p class="first">3: Enrutar esta llamada al número externo 676 676 676.</p>
</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Cada una de las entradas del IVR admite una locución que, si se establece, se reproducirá en lugar de la <strong>locución de éxito</strong> del IVR. De esta manera, puedes configurar una locución genérica (como &#8216;Conectando....&#8217;) o una personalizada para una entrada dada (como &#8216;Conectando con el departamento de recepción, por favor espere...&#8217;).</p>
</div>
<p class="rubric">Las entradas son expresiones regulares</p>
</div>
<div class="section" id="entry-information">
<h6>Información de entrada<a class="headerlink" href="#entry-information" title="Enlazar permanentemente con este título">¶</a></h6>
<p>Puedes especificar entradas IVR como Expresiones Regulares. Si la entrada es solo un valor numérico, se manejará como una secuencia de dígitos, de lo contrario se manejará como una expresión regular. Esto puede ser útil si tienes el mismo comportamiento para un grupo de números marcados.</p>
<blockquote>
<div><dl class="docutils">
<dt>Entrada</dt>
<dd><p class="first last">Expresión regular.</p>
</dd>
<dt>Locución de éxito</dt>
<dd><p class="first last">Locución que se reproducirá en caso de éxito.</p>
</dd>
<dt>Nombre para mostrar</dt>
<dd><p class="first last">Este valor se mostrará en los terminales llamados</p>
</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="routing-configuration">
<h6>Configuración de enrutamiento<a class="headerlink" href="#routing-configuration" title="Enlazar permanentemente con este título">¶</a></h6>
<blockquote>
<div><dl class="docutils">
<dt>Tipo de destino</dt>
<dd><p class="first last">Dependiendo del tipo elegido, se pueden requerir parámetros adicionales.</p>
</dd>
</dl>
</div></blockquote>
</div>
</div>
<span id="document-administration_portal/client/vpbx/routing_endpoints/hunt_groups"></span><div class="section" id="hunt-groups">
<span id="huntgroups"></span><h5>Grupos de búsqueda<a class="headerlink" href="#hunt-groups" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Los grupos de búsqueda permiten configurar un proceso de <em>llamada</em> más complejo que la tradicional <strong>llamada a un usuario</strong>.</p>
<p>Estos son los campos mostrados para nuevos grupos de búsqueda:</p>
<div class="section" id="basic-configuration">
<h6>Configuración básica<a class="headerlink" href="#basic-configuration" title="Enlazar permanentemente con este título">¶</a></h6>
<blockquote>
<div><dl class="docutils">
<dt>Nombre</dt>
<dd><p class="first last">Usado para referenciar este grupo de búsqueda</p>
</dd>
<dt>Descripción</dt>
<dd><p class="first last">Información adicional</p>
</dd>
<dt>Estrategia</dt>
<dd><p class="first last">Describe cómo se entregarán las llamadas. Ver detalles en el glosario a continuación.</p>
</dd>
<dt>Tiempo de espera de llamada a todos</dt>
<dd><p class="first last">Para la estrategia <em>Ringall</em>, define por cuánto tiempo serán llamados los miembros.</p>
</dd>
<dt>Prevenir llamadas perdidas</dt>
<dd><p class="first last">Cuando &#8216;Sí&#8217;, las llamadas nunca generarán una llamada perdida. Cuando &#8216;No&#8217;, las llamadas perdidas se evitarán solo para los grupos de búsqueda RingAll si alguien responde.</p>
</dd>
<dt>Permitir desvíos de llamadas</dt>
<dd><p class="first last">Cuando &#8216;No&#8217;, se ignorarán las configuraciones de desvío de llamadas del usuario (incluyendo DND y jefe/asistente) y las respuestas 3XX. De lo contrario, se seguirán.</p>
</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="no-answer-configuration">
<h6>Configuración de no respuesta<a class="headerlink" href="#no-answer-configuration" title="Enlazar permanentemente con este título">¶</a></h6>
<blockquote>
<div><p>Política cuando los miembros del grupo de búsqueda no responden la llamada después de los tiempos de espera definidos. Se puede configurar una locución y un destino.</p>
</div></blockquote>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p>Al configurar un grupo de búsqueda, puede evitar llamadas perdidas en los miembros llamados con la configuración <strong>Prevenir llamadas perdidas</strong>:</p>
<ul class="last simple">
<li><p class="first"><strong>Sí</strong>: las llamadas generadas por el grupo de búsqueda nunca generarán llamadas perdidas en los miembros llamados.</p>
</li>
<li><p class="first"><strong>No</strong>: El comportamiento de esta configuración depende del tipo de grupo de búsqueda:</p>
</li>
<li><p class="first"><strong>RingAll</strong>: las llamadas generadas por el grupo de búsqueda generarán llamadas perdidas en los miembros llamados solo si ninguno de ellos responde la llamada.</p>
</li>
<li><p class="first"><strong>Tipos restantes</strong>: las llamadas generadas por el grupo de búsqueda generarán llamadas perdidas en cada miembro llamado que no responda la llamada.</p>
</li>
</ul>
</div>
<div class="admonition warning">
<p class="first admonition-title">Advertencia</p>
<p>Habilitar <strong>Permitir desvíos de llamadas</strong> puede causar comportamientos no deseados:</p>
<ul class="simple">
<li><p class="first">Miembro no llamado porque tiene DND habilitado.</p>
</li>
<li><p class="first">Miembro marcado como jefe no llamado (se llamará al asistente en su lugar).</p>
</li>
<li><p class="first">La <em>Configuración de no respuesta</em> del grupo de búsqueda nunca se aplica (por ejemplo, tiempo de espera de no respuesta en el usuario llamado que se aplica antes que el tiempo de espera de Ringall).</p>
</li>
<li><p class="first">Los miembros del grupo de búsqueda no son llamados (por ejemplo, grupo de búsqueda secuencial, el primer miembro desvía la llamada a su teléfono móvil).</p>
</li>
</ul>
<p class="last"><strong>Use esta función con prudencia</strong>.</p>
</div>
<p>Hay 4 estrategias disponibles:</p>
<blockquote>
<div><dl class="docutils">
<dt>Ringall</dt>
<dd><p class="first last">La llamada hará sonar todos los terminales del grupo durante un tiempo predefinido.</p>
</dd>
<dt>Lineal</dt>
<dd><p class="first last">La llamada <em>saltará</em> de un usuario a otro en un orden predefinido sonando durante el tiempo configurado. Si la llamada no es respondida por ningún usuario del grupo, se colgará (o activará la lógica de no respuesta).</p>
</dd>
<dt>Round robin</dt>
<dd><p class="first last">La llamada <em>saltará</em> de un usuario a otro en un orden predefinido sonando durante el tiempo configurado. Si la llamada no es respondida por ningún usuario del grupo, la llamada <em>saltará</em> nuevamente al primer miembro del grupo y seguirá en bucle.</p>
</dd>
<dt>Aleatorio</dt>
<dd><p class="first last">La llamada <em>saltará</em> de un usuario a otro en un orden aleatorio, sonando durante el tiempo configurado. Si la llamada no es respondida por ningún usuario del grupo, se colgará (o activará la lógica de no respuesta).</p>
</dd>
</dl>
</div></blockquote>
<div class="section" id="adding-members-to-hunt-group">
<h7>Agregar miembros al grupo de búsqueda<a class="headerlink" href="#adding-members-to-hunt-group" title="Enlazar permanentemente con este título">¶</a></h7>
<p>La subsección <strong>Lista de miembros</strong> permite agregar usuarios o números externos a cada grupo:</p>
<ul class="simple">
<li><p class="first">Para los grupos de búsqueda <em>RingAll</em>, los miembros se agregarán sin ningún parámetro adicional.</p>
</li>
<li><p class="first">Para los grupos restantes, se especificarán la prioridad y el tiempo de espera para cada miembro. La prioridad determina el orden, el tiempo de espera la duración de la llamada para cada miembro.</p>
</li>
</ul>
<p>La sección <a class="reference internal" href="index.html#users"><span class="std std-ref">Usuarios</span></a> también permite agregar miembros a grupos de búsqueda existentes usando la opción <strong>Lista de grupos de búsqueda</strong>.</p>
</div>
</div>
</div>
<span id="document-administration_portal/client/vpbx/routing_endpoints/queues"></span><div class="section" id="queues">
<span id="id1"></span><h5>Colas<a class="headerlink" href="#queues" title="Enlazar permanentemente con este título">¶</a></h5>
<p>El comportamiento de colas fácil se incluyó en IvozProvider en la versión 1.3. Es un enfoque simple con <strong>el único objetivo de proporcionar la capacidad de manejar más llamadas que usuarios atendiéndolas</strong>.</p>
<div class="admonition warning">
<p class="first admonition-title">Advertencia</p>
<p class="last">Colas y callcenter son términos cercanos pero diferentes. <strong>IvozProvider no es un producto adecuado para callcenters</strong>, ya que no proporciona características avanzadas que son cruciales para ellos (informes, visualización en tiempo real, estadísticas relacionadas con colas, etc.).</p>
</div>
<p><strong>En instalaciones distribuidas</strong> el uso de Colas solo es compatible con una asignación estática o distribución &#8216;basada en hash&#8217; (ver <strong>Método de distribución</strong> <a class="reference internal" href="index.html#virtual-pbx"><span class="std std-ref">aquí</span></a>).</p>
<div class="admonition hint">
<p class="first admonition-title">Consejo</p>
<p class="last">Los operadores de marca pueden elegir qué Clientes tienen colas (ver <strong>Características</strong> en <a class="reference internal" href="index.html#brand-configuration"><span class="std std-ref">Configuración de Marca</span></a> y <a class="reference internal" href="index.html#client-configuration"><span class="std std-ref">Configuración del Cliente</span></a>).</p>
</div>
<div class="section" id="queue-configuration">
<h6>Configuración de la cola<a class="headerlink" href="#queue-configuration" title="Enlazar permanentemente con este título">¶</a></h6>
<p>Estos son los ajustes relacionados con una cola:</p>
<div class="section" id="basic-configuration">
<h7>Configuración básica<a class="headerlink" href="#basic-configuration" title="Enlazar permanentemente con este título">¶</a></h7>
<blockquote>
<div><dl class="docutils">
<dt>Nombre</dt>
<dd><p class="first last">Usar para referenciar esta cola. Caracteres permitidos: a-z, A-Z, 0-9, guion bajo y &#8216;-&#8216;.</p>
</dd>
<dt>Peso</dt>
<dd><p class="first last">Prioriza las llamadas a un agente que atiende llamadas en dos (o más) colas. Cuanto mayor sea, más priorizado será.</p>
</dd>
<dt>Estrategia</dt>
<dd><p class="first last">¿Cómo entregará la cola las llamadas? ¿Llamando a todos los agentes, llamando a uno aleatorio?</p>
</dd>
<dt>Nombre para mostrar</dt>
<dd><p class="first last">Este valor se mostrará en los terminales llamados</p>
</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="members-configuration">
<h7>Configuración de miembros<a class="headerlink" href="#members-configuration" title="Enlazar permanentemente con este título">¶</a></h7>
<blockquote>
<div><dl class="docutils">
<dt>Segundos de llamada del miembro</dt>
<dd><p class="first last">Define cuánto durará una llamada a un agente.</p>
</dd>
<dt>Segundos de descanso del miembro</dt>
<dd><p class="first last">Segundos entre llamadas para un agente.</p>
</dd>
<dt>Prevenir llamadas perdidas</dt>
<dd><p class="first last">Cuando &#8216;Sí&#8217;, las llamadas nunca generarán una llamada perdida. Cuando &#8216;No&#8217;, las llamadas perdidas se evitarán solo para colas RingAll si alguien responde.</p>
</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="announce">
<h7>Anunciar<a class="headerlink" href="#announce" title="Enlazar permanentemente con este título">¶</a></h7>
<blockquote>
<div><p>Seleccione una locución y su frecuencia. El llamante en espera escuchará esta locución.</p>
<dl class="docutils">
<dt>Locución de anuncio periódico</dt>
<dd><p class="first last">Locución reproducida periódicamente a las llamadas que están en cola.</p>
</dd>
<dt>Anunciar posición</dt>
<dd><p class="first last">Anunciar la posición en la cola a los usuarios en espera cuando ingresan a la cola y después de la frecuencia definida.</p>
</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="timeout-configuration">
<h7>Configuración de tiempo de espera<a class="headerlink" href="#timeout-configuration" title="Enlazar permanentemente con este título">¶</a></h7>
<blockquote>
<div><blockquote>
<div><p>Limita el tiempo que una llamada puede esperar en una cola y el comportamiento siguiente.</p>
</div></blockquote>
<dl class="docutils">
<dt>Tiempo máximo de espera</dt>
<dd><p class="first last">Si ningún miembro de la cola responde antes de estos segundos, se activará la lógica de tiempo de espera de la cola. Dejar vacío para desactivar.</p>
</dd>
</dl>
<p>Locución</p>
<dl class="docutils">
<dt>Configuración completa de la cola</dt>
<dd><p class="first last">Limita la cantidad de personas esperando en una llamada y el comportamiento cuando se alcanza este límite.</p>
</dd>
</dl>
</div></blockquote>
<p>Aparte de crear una cola, tienes que asignar usuarios a ella. Estos usuarios tendrán una <strong>penalización: un usuario no será seleccionado para entregar una llamada si cualquier usuario con una penalización menor está disponible</strong>.</p>
<div class="admonition hint">
<p class="first admonition-title">Consejo</p>
<p class="last">Una llamada puede ser enviada a una cola seleccionándola en los selectores de &#8220;Tipo de ruta&#8221; disponibles en múltiples secciones de IvozProvider (extensión a cola, DDI a cola, etc.)</p>
</div>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p>Al configurar una cola, puedes prevenir llamadas perdidas en los miembros llamados con la configuración <strong>Prevenir llamadas perdidas</strong>:</p>
<ul class="last simple">
<li><p class="first"><strong>Sí</strong>: las llamadas generadas por la cola nunca generarán llamadas perdidas en los miembros llamados.</p>
</li>
<li><p class="first"><strong>No</strong>: El comportamiento de esta configuración depende de la estrategia de la cola:</p>
</li>
<li><p class="first"><strong>RingAll</strong>: las llamadas generadas por la cola generarán llamadas perdidas en los miembros llamados solo si ninguno de ellos responde la llamada.</p>
</li>
<li><p class="first"><strong>Tipos restantes</strong>: las llamadas generadas por la cola generarán llamadas perdidas en cada miembro llamado que no responda la llamada.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="section" id="queue-strategy">
<h6>Estrategia de la cola<a class="headerlink" href="#queue-strategy" title="Enlazar permanentemente con este título">¶</a></h6>
<p>La estrategia de la cola <strong>siempre se aplica a los miembros con penalización actual</strong> comenzando con el valor de penalización más pequeño y solo pasando a la siguiente penalización si todos los miembros de la actual están ocupados o no disponibles.</p>
<blockquote>
<div><dl class="docutils">
<dt>Llamar a todos</dt>
<dd><p class="first last">La llamada hará que todos los miembros de la prioridad actual durante un tiempo predefinido.</p>
</dd>
<dt>Menos reciente</dt>
<dd><p class="first last">La llamada <em>saltará</em> de un miembro a otro en un orden predefinido basado en la última vez que el miembro atendió una llamada. Los miembros cuya última llamada sea más antigua serán llamados primero.</p>
</dd>
<dt>Menos llamadas</dt>
<dd><p class="first last">La llamada <em>saltará</em> de un miembro a otro en un orden predefinido basado en el número de llamadas atendidas. Los miembros que hayan atendido menos llamadas serán llamados primero.</p>
</dd>
<dt>Aleatorio</dt>
<dd><p class="first last">La llamada <em>saltará</em> de un miembro a otro en un orden aleatorio, sonando durante el tiempo configurado.</p>
</dd>
<dt>Memoria de Round Robin</dt>
<dd><p class="first last">La llamada <em>saltará</em> de un miembro a otro en un orden predefinido comenzando después del último miembro que atendió una llamada.</p>
</dd>
<dt>Lineal</dt>
<dd><p class="first last">La llamada <em>saltará</em> de un miembro a otro en un orden predefinido basado en el tiempo de creación del miembro.</p>
</dd>
</dl>
</div></blockquote>
<div class="admonition warning">
<p class="first admonition-title">Advertencia</p>
<p class="last">Una penalización dada nunca será llamada hasta que todos los usuarios con menor prioridad estén en llamada.</p>
</div>
<div class="admonition error">
<p class="first admonition-title">Error</p>
<p class="last">Las colas <em>lineales</em> son especiales: una cola no lineal no puede convertirse en lineal.</p>
</div>
</div>
</div>
<span id="document-administration_portal/client/vpbx/routing_endpoints/conditional_routes"></span><div class="section" id="id1">
<span id="conditional-routes"></span><span id="id2"></span><h5>Rutas condicionales<a class="headerlink" href="#id1" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Las rutas condicionales permiten cambiar la lógica de una llamada dependiendo de:</p>
<ul class="simple">
<li><p class="first">Quién está llamando.</p>
</li>
<li><p class="first">A qué hora está llamando.</p>
</li>
<li><p class="first">Qué día está llamando.</p>
</li>
<li><p class="first">Estado de los bloqueos de ruta seleccionados.</p>
</li>
</ul>
<p>Estas rutas son elegibles en tres secciones:</p>
<ul class="simple">
<li>DDIs</li>
<li><p class="first">Extensiones</p>
</li>
<li><p class="first">Opciones personalizadas de IVR</p>
</li>
</ul>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Las secciones restantes podrían usar rutas condicionales creando una extensión que apunte primero a una ruta condicional y enrutando a esta extensión.</p>
</div>
<div class="section" id="creating-a-conditional-route">
<h6>Creando una ruta condicional<a class="headerlink" href="#creating-a-conditional-route" title="Enlazar permanentemente con este título">¶</a></h6>
<p>Primero creamos una ruta condicional en la sección <strong>Rutas condicionales</strong>.</p>
<p>Al crearla definimos qué se debe hacer con una llamada que no cumpla con ninguna de las reglas agregadas a continuación.</p>
</div>
<div class="section" id="adding-rules">
<h6>Agregando reglas<a class="headerlink" href="#adding-rules" title="Enlazar permanentemente con este título">¶</a></h6>
<p>Una vez creada, necesitamos agregar reglas, por ejemplo:</p>
<ul class="simple">
<li><p class="first">Llamadas de Japón y Alemania recibidas por la mañana a un usuario específico</p>
</li>
<li><p class="first">Llamadas de Japón y Alemania recibidas por la tarde a otro usuario</p>
</li>
<li><p class="first">Anular el IVR de recepción para los días de verano</p>
</li>
</ul>
</div>
<div class="section" id="evaluating-conditional-routes">
<h6>Evaluando rutas condicionales<a class="headerlink" href="#evaluating-conditional-routes" title="Enlazar permanentemente con este título">¶</a></h6>
<ul class="simple">
<li><p class="first">Las reglas se evalúan siguiendo el parámetro métrico. Una vez que una regla coincide, se aplica su lógica.</p>
</li>
<li><p class="first">Las reglas pueden tener de 1 a 4 criterios:</p>
<ul>
<li><p class="first">Ninguna, una o más listas de coincidencia (pre-creadas, ver <a class="reference internal" href="index.html#match-lists"><span class="std std-ref">Listas de coincidencia</span></a>)</p>
</li>
<li><p class="first">Ninguna, uno o más horarios (pre-creados, ver <a class="reference internal" href="index.html#schedules"><span class="std std-ref">Horarios</span></a>)</p>
</li>
<li><p class="first">Ninguno, uno o más calendarios (pre-creados, ver <a class="reference internal" href="index.html#calendars"><span class="std std-ref">Calendarios</span></a>)</p>
</li>
<li><p class="first">Ninguno, uno o más bloqueos de ruta (pre-creados, ver <a class="reference internal" href="index.html#id1"><span class="std std-ref">Candados de ruta</span></a>)</p>
</li>
</ul>
</li>
<li><p class="first">Estos 4 criterios se combinan (aplicando una lógica AND).</p>
</li>
<li><p class="first">Si se cumplen todos los criterios utilizados en una regla, se aplica su lógica.</p>
</li>
</ul>
<p>Así es como se evalúa cada criterio:</p>
<blockquote>
<div><dl class="docutils">
<dt>Criterio de lista de coincidencia</dt>
<dd><p class="first last">Si el número del llamante coincide con alguna de las listas de coincidencia seleccionadas, este criterio se considera cumplido.</p>
</dd>
<dt>Criterio de horario</dt>
<dd><p class="first last">Si la hora actual está incluida en alguno de los horarios seleccionados, este criterio se considera cumplido.</p>
</dd>
<dt>Criterio de calendario</dt>
<dd><ul class="first last simple">
<li><p class="first">Si el día actual está marcado como festivo en alguno de los calendarios seleccionados, este criterio se considera cumplido.</p>
</li>
<li><p class="first">Si el día actual está marcado como festivo parcial en alguno de los calendarios seleccionados y la hora actual está incluida en su intervalo, este criterio se considera cumplido.</p>
</li>
</ul>
</dd>
<dt>Criterio de bloqueo</dt>
<dd><p class="first last">Si uno de los bloqueos de ruta seleccionados está abierto, este criterio se considera cumplido.</p>
</dd>
</dl>
</div></blockquote>
<div class="admonition warning">
<p class="first admonition-title">Advertencia</p>
<p class="last"><a class="reference internal" href="index.html#special-schedules"><span class="std std-ref">Horarios especiales</span></a> vinculados a los calendarios seleccionados no se tienen en cuenta.</p>
</div>
</div>
<div class="section" id="ddi-routed-to-a-conditional-route">
<h6>DDI enrutado a una ruta condicional<a class="headerlink" href="#ddi-routed-to-a-conditional-route" title="Enlazar permanentemente con este título">¶</a></h6>
<p>Imagina este escenario: el DDI tiene un filtro de llamadas externas y está enrutado a la nueva ruta condicional.</p>
<p>Cuando se recibe una llamada:</p>
<ul class="simple">
<li><p class="first">Se evalúa el filtro de llamadas externas:</p>
<ul>
<li><p class="first">Si el día actual está marcado en algún calendario, se aplica la lógica de festivo.</p>
</li>
<li><p class="first">Si la hora actual no está dentro de ningún intervalo de tiempo, se aplica la lógica fuera de horario.</p>
</li>
</ul>
</li>
<li><p class="first">Si no se han aplicado las lógicas del filtro de llamadas externas, se evalúa la ruta condicional.</p>
</li>
</ul>
<div class="admonition attention">
<p class="first admonition-title">Atención</p>
<p class="last">La ruta condicional no está destinada a reemplazar el filtro de llamadas externas. Primero se evalúa el filtro, luego la ruta condicional.</p>
</div>
</div>
</div>
<span id="document-administration_portal/client/vpbx/routing_endpoints/friends/index"></span><div class="section" id="friends">
<span id="id1"></span><h5>Friends<a class="headerlink" href="#friends" title="Enlazar permanentemente con este título">¶</a></h5>
<p>La sección <strong>Friends</strong> en la <strong>Configuración del cliente</strong> permite la interconexión de IvozProvider con otros sistemas PBX SIP a través de un SIP <em>trunk</em>. El caso de uso más típico es cuando un cliente tiene múltiples sistemas PBX que quieren integrarse en un solo flujo.</p>
<p>Desde la versión 2.10, <strong>Friends</strong> también permite a un cliente vPBX llamar a extensiones de otro cliente vPBX en la misma marca.</p>
<div class="admonition warning">
<p class="first admonition-title">Advertencia</p>
<p class="last">Es importante entender la diferencia entre <strong>Carrier</strong> definido por el <strong>operador de la marca</strong> para conectarse con la red pública y <strong>Friends</strong>, definido por los <strong>administradores del cliente</strong> para conectar el sistema con otros PBXs.</p>
</div>
<div class="admonition hint">
<p class="first admonition-title">Consejo</p>
<p class="last"><strong>Friends</strong> son tan similares a <strong>Usuarios</strong> que ambos hablan SIP con el <a class="reference internal" href="index.html#proxyusers"><span class="std std-ref">Proxies de Usuarios</span></a>.</p>
</div>
<div class="section" id="types-of-friends">
<h6>Tipos de Friends<a class="headerlink" href="#types-of-friends" title="Enlazar permanentemente con este título">¶</a></h6>
<p>Hay 2 tipos principales de Friends:</p>
<ul class="simple">
<li><p class="first"><strong>Friends remotos</strong>: SIP trunks a sistemas PBX SIP externos.</p>
</li>
<li><p class="first"><strong>Friends internos</strong>: conexión entre extensiones de dos clientes vPBX en la misma marca.</p>
</li>
</ul>
<div class="section" id="what-kind-of-calls-can-be-routed-through-an-internal-friend">
<h7>¿Qué tipo de llamadas se pueden enrutar a través de un <em>friend interno</em>?<a class="headerlink" href="#what-kind-of-calls-can-be-routed-through-an-internal-friend" title="Enlazar permanentemente con este título">¶</a></h7>
<p>IvozProvider enrutar una llamada recibida por un <a class="reference internal" href="index.html#users"><span class="std std-ref">usuario</span></a> o un <a class="reference internal" href="#friends"><span class="std std-ref">friend</span></a> siguiendo esta lógica:</p>
<ol class="arabic simple">
<li><p class="first">¿El destino coincide con una extensión existente de IvozProvider?</p>
</li>
<li><p class="first">Si no: ¿El destino coincide con alguna expresión regular de <em>friend</em> (para friends remotos) o extensiones (para los internos)? Ordenado por prioridad (el menor tiene precedencia).</p>
</li>
<li><p class="first">Si no: Esta es una llamada externa.</p>
</li>
</ol>
<p>Las siguientes secciones explican ambos tipos de friends:</p>
<div class="toctree-wrapper compound">
<span id="document-administration_portal/client/vpbx/routing_endpoints/friends/remote_friends"></span><div class="section" id="remote-friends">
<h8>Friends remotos<a class="headerlink" href="#remote-friends" title="Enlazar permanentemente con este título">¶</a></h8>
<p>Los friends remotos conectan un cliente vPBX con una entidad SIP externa.</p>
<div class="section" id="types-of-remote-friends">
<h9>Tipos de friends remotos<a class="headerlink" href="#types-of-remote-friends" title="Enlazar permanentemente con este título">¶</a></h9>
<p>Hay 2 tipos principales de PBX SIP que se pueden integrar con IvozProvider:</p>
<ul class="simple">
<li><p class="first"><strong>PBX de conexión directa</strong> (Modo de conectividad: directo): IvozProvider debe poder hablar SIP directamente con este tipo de friends simplemente redirigiendo el tráfico al puerto adecuado de la dirección IP pública del PBX.</p>
</li>
<li><p class="first"><strong>PBX detrás de NAT</strong> (Modo de conectividad: registrar): No accesible directamente. Este tipo de PBX debe registrarse en IvozProvider (al igual que todos los <a class="reference internal" href="index.html#terminals"><span class="std std-ref">Terminales</span></a>).</p>
</li>
</ul>
</div>
<div class="section" id="what-do-remote-friends-allow">
<h9>¿Qué permiten los friends remotos?<a class="headerlink" href="#what-do-remote-friends-allow" title="Enlazar permanentemente con este título">¶</a></h9>
<p>Esta sección permite no solo la comunicación entre usuarios en ambos extremos del SIP <em>trunk</em>, sino también:</p>
<ul class="simple">
<li><p class="first">Los usuarios &#8220;del otro lado&#8221; pueden llamar a la red pública igual que los <a class="reference internal" href="index.html#users"><span class="std std-ref">Usuarios</span></a> nativos de Ivozprovider.</p>
</li>
<li><p class="first">Las llamadas a la red pública pueden ser enrutadas al otro extremo del SIP <em>trunk</em>.</p>
</li>
</ul>
</div>
<div class="section" id="what-kind-of-calls-can-be-routed-through-a-remote-friend">
<h9>¿Qué tipo de llamadas se pueden enrutar a través de un <em>friend remoto</em>?<a class="headerlink" href="#what-kind-of-calls-can-be-routed-through-a-remote-friend" title="Enlazar permanentemente con este título">¶</a></h9>
<p>IvozProvider debe saber qué llamadas deben ser enrutadas a los diferentes <em>friends remotos</em> definidos. Para eso, el <strong>administrador del cliente</strong> configurará expresiones regulares que describan los números que <em>se pueden alcanzar</em> a través del <strong>friend</strong>.</p>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Las <a class="reference internal" href="index.html#extensions"><span class="std std-ref">extensiones</span></a> internas tienen prioridad sobre cualquier expresión definida en los <em>friends</em>.</p>
</div>
<div class="admonition important">
<p class="first admonition-title">Importante</p>
<p class="last">Evite las expresiones regulares PCRE en la configuración de friends: use [0-9] en lugar de \d.</p>
</div>
</div>
<div class="section" id="configuration-of-remote-friends">
<h9>Configuración de friends remotos<a class="headerlink" href="#configuration-of-remote-friends" title="Enlazar permanentemente con este título">¶</a></h9>
<p>La configuración de <strong>Friend</strong> es una combinación entre un <strong>Usuario</strong> y un <strong>Terminal</strong></p>
<p>Estos son los ajustes configurables de los <em>friends</em>:</p>
<blockquote>
<div><dl class="docutils">
<dt>Nombre</dt>
<dd><p class="first last">Nombre del <strong>friend</strong>, como en <strong>Terminales</strong>. Esto también se usará en mensajes SIP (enviados <strong>Desde Usuario</strong>).</p>
</dd>
<dt>Descripción</dt>
<dd><p class="first last">Opcional. Información adicional para este <strong>friend</strong>.</p>
</dd>
<dt>Prioridad</dt>
<dd><p class="first last">Se usa para resolver conflictos al enrutar llamadas a través de <strong>friends</strong>. Si un destino de llamada <strong>coincide</strong> con más de una expresión regular de friend, la llamada se enrutarán a través del friend con <strong>menor valor de prioridad</strong>.</p>
</dd>
<dt>Contraseña</dt>
<dd><p class="first last">Cuando el <em>friend</em> envía solicitudes, IvozProvider lo autentificará usando esta contraseña. <strong>Usar contraseña ES OBLIGATORIO en modo &#8220;Registrar&#8221;</strong>. En modo &#8220;Directo&#8221;, dejarlo en blanco desactiva la autenticación SIP y habilita la verificación de la fuente IP.</p>
</dd>
<dt>Modo de conectividad</dt>
<dd><p class="first last">Elija entre &#8220;Directo&#8221; y &#8220;Registrar&#8221; para un friend remoto.</p>
</dd>
<dt>ACL de llamada</dt>
<dd><p class="first last">Similar a <a class="reference internal" href="index.html#users"><span class="std std-ref">usuarios internos</span></a>, los friends pueden realizar llamadas internas del cliente sin restricciones (incluyendo Extensiones u otros Friends). Al llamar a números externos, se verificará esta ACL si está configurada.</p>
</dd>
<dt>DDI de salida de respaldo</dt>
<dd><p class="first last">Las llamadas externas de este <em>friend</em> se presentarán con este DDI, <strong>a menos que la fuente presentada por el friend sea un DDI que exista en la sección de DDIs</strong>.</p>
</dd>
<dt>Código de país y área</dt>
<dd><p class="first last">Se usa para la transformación de números desde y hacia este friend.</p>
</dd>
<dt>Codecs permitidos</dt>
<dd><p class="first last">Como un terminal, los <em>friends</em> hablarán el codec seleccionado.</p>
</dd>
<dt>Desde usuario</dt>
<dd><p class="first last">La solicitud de IvozProvider a este friend incluirá este usuario en el encabezado From.</p>
</dd>
<dt>Desde dominio</dt>
<dd><p class="first last">La solicitud de IvozProvider a este friend incluirá este dominio en el encabezado From.</p>
</dd>
<dt>DDI entrante</dt>
<dd><p class="first last">Si se establece en &#8216;Sí&#8217;, establezca el destino (R-URI y To) al DDI/número llamado cuando se llame a este punto final. Si se establece en &#8216;No&#8217;, se usará el nombre de usuario utilizado en el encabezado Contact de registro, como se especifica en el RFC SIP (se usará el nombre del friend para puntos finales con conectividad directa). Por defecto es &#8216;Sí&#8217;.</p>
</dd>
<dt>Habilitar paso a través de T.38</dt>
<dd><p class="first last">Si se establece en &#8216;sí&#8217;, este punto final SIP debe ser un <strong>emisor/receptor de fax compatible con T.38</strong>. IvozProvider actuará como una puerta de enlace T.38, conectando llamadas de fax de un operador compatible con T.38 y un dispositivo compatible con T.38.</p>
</dd>
<dt>Aplicar siempre transformaciones</dt>
<dd><p class="first last">Tanto los números listados en la sección de Extensiones como los números que coincidan con cualquier expresión regular de friend se considerarán internos y no atravesarán las reglas de transformación numérica. Habilite esta configuración para forzar las reglas de Transformación Numérica incluso en estos números.</p>
</dd>
<dt>Encriptación RTP</dt>
<dd><p class="first last">Si se establece en &#8216;sí&#8217;, la llamada no se establecerá a menos que sea posible encriptar su audio. Si se establece en &#8216;no&#8217;, el audio no se encriptará.</p>
</dd>
<dt>Contacto múltiple</dt>
<dd><p class="first last">Las mismas credenciales SIP se pueden configurar en múltiples dispositivos SIP. En ese caso, todos los dispositivos suenan simultáneamente al recibir una llamada. Configurar este interruptor en &#8216;No&#8217; limita este comportamiento para que solo suene el último dispositivo SIP registrado.</p>
</dd>
</dl>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Las llamadas a <em>friends</em> se consideran internas. Eso significa que no se verificarán las ACLs al llamar a un friend, sin importar si el origen de la llamada es un usuario u otro friend.</p>
</div>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Se puede contactar al friend debido a llamadas a varias extensiones/DDIs. La configuración de <em>DDI entrante</em> permite al punto final SIP remoto saber qué número causó cada llamada, estableciendo ese número como destino (encabezados R-URI y To). De esta manera, el friend puede manejar las llamadas de manera diferente.</p>
</div>
</div>
<div class="section" id="asterisk-as-a-remote-friend">
<h9>Asterisk como un friend remoto<a class="headerlink" href="#asterisk-as-a-remote-friend" title="Enlazar permanentemente con este título">¶</a></h9>
<p>En el otro extremo de un friend puede haber cualquier tipo de entidad SIP. Esta sección toma como ejemplo un sistema PBX Asterisk que usa el controlador de canal SIP que desea conectarse a IvozProvider.</p>
<p class="rubric">registrar</p>
<p>Si el sistema no se puede acceder directamente, Asterisk tendrá que registrarse en la plataforma (como lo haría un terminal).</p>
<p>La configuración será algo así:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>register =&gt; friendName:friendPassword@ivozprovider-client.sip-domain.com
</pre></div>
</div>
<p class="rubric">par</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[friendName]
type=peer
host=ivozprovider-client.sip-domain.com
context=XXXXXX
disallow=all
allow=alaw
defaultuser=friendName
secret=friendPassword
fromuser=friendName
fromdomain=ivozprovider-brand.sip-domain.com
insecure=port,invite
sendrpid=pai
directmedia=no
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Advertencia</p>
<p class="last"><em>Los friends</em>, como los terminales, NO DEBEN desafiar a IvozProvider. Por eso se usa la configuración <em>insegura</em> aquí.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Dado que el nombre de usuario From se usa para identificar al friend, se debe usar P-Asserted-Identity (o P-Preferred-Identity o Remote-Party-Id) para especificar el número del llamante. La prevalencia entre estos encabezados de origen es: PAI &gt; PPI &gt; RPID.</p>
</div>
</div>
<div class="section" id="summary-of-remote-friends">
<h9>Resumen de friends remotos<a class="headerlink" href="#summary-of-remote-friends" title="Enlazar permanentemente con este título">¶</a></h9>
<p>El punto clave es entender que un <em>friend remoto</em> tiene una relación directa con el trío extensión-usuario-terminal:</p>
<ul class="simple">
<li><p class="first">Puede realizar llamadas a todas las extensiones internas y otros friends.</p>
</li>
<li><p class="first">Puede realizar llamadas externas que su ACL permita</p>
</li>
<li><p class="first">Muestra su DDI de salida configurado al llamar a entidades externas</p>
</li>
<li><p class="first">Nunca desafíe las solicitudes de IvozProvider (no solicite autenticación en solicitudes recibidas)</p>
</li>
<li><p class="first">Responde a los desafíos de autenticación de IvozProvider (Todas las solicitudes de ellos a IvozProvider deben ser autenticadas por razones de seguridad)</p>
</li>
<li><p class="first">Solo se conecta con <em>Proxy SIP de Usuarios</em>, como terminales. De hecho, el tráfico SIP de friends es idéntico al tráfico de cualquier otro terminal de usuario en formato.</p>
</li>
</ul>
</div>
</div>
<span id="document-administration_portal/client/vpbx/routing_endpoints/friends/internal_friends"></span><div class="section" id="internal-friends">
<span id="id1"></span><h8>Friends internos<a class="headerlink" href="#internal-friends" title="Enlazar permanentemente con este título">¶</a></h8>
<p>Los friends internos permiten a un cliente vPBX llamar a <strong>Extensiones</strong> de otro cliente vPBX en la misma <a class="reference internal" href="index.html#corporations"><span class="std std-ref">Corporación</span></a>.</p>
<div class="admonition important">
<p class="first admonition-title">Importante</p>
<p class="last">Solo extensiones en la sección <a class="reference internal" href="index.html#extensions"><span class="std std-ref">Extensiones</span></a>.</p>
</div>
<p>Si llamar a una extensión en otro vPBX causa una llamada externa, está permitido:</p>
<ul class="simple">
<li><p class="first">Llamar a un usuario con configuraciones de desvío de llamadas externas.</p>
</li>
<li><p class="first">Llamar a una extensión enrutada a un número externo.</p>
</li>
<li><p class="first">Llamar a una extensión enrutada a un IVR con una opción que apunte a un número externo.</p>
</li>
<li>Etc.</li>
</ul>
<div class="section" id="what-kind-of-calls-can-be-routed-through-an-internal-friend">
<h9>¿Qué tipo de llamadas se pueden enrutar a través de un <em>friend interno</em>?<a class="headerlink" href="#what-kind-of-calls-can-be-routed-through-an-internal-friend" title="Enlazar permanentemente con este título">¶</a></h9>
<p>IvozProvider enrutar cualquier llamada que coincida con una Extensión en el cliente vpbx conectado por el friend interno.</p>
</div>
<div class="section" id="configuration-of-internal-friends">
<h9>Configuración de friends internos<a class="headerlink" href="#configuration-of-internal-friends" title="Enlazar permanentemente con este título">¶</a></h9>
<p>Estos son los ajustes configurables de <em>friends internos</em>:</p>
<blockquote>
<div><dl class="docutils">
<dt>Descripción</dt>
<dd><p class="first last">Opcional. Información adicional para este <strong>friend</strong>.</p>
</dd>
<dt>Prioridad</dt>
<dd><p class="first last">Se utiliza para resolver conflictos al enrutar llamadas a través de <strong>friends</strong>. Si un destino de llamada <strong>coincide</strong> con más de una expresión regular de friend, la llamada se enruta a través del friend con <strong>menor valor de prioridad</strong>.</p>
</dd>
<dt>Modo de conectividad</dt>
<dd><p class="first last">Elija &#8220;IntervPBX&#8221; para friends internos.</p>
</dd>
<dt>Cliente destino</dt>
<dd><p class="first last">Cliente vPBX dentro de la misma <a class="reference internal" href="index.html#corporations"><span class="std std-ref">corporación</span></a> que desea conectar.</p>
</dd>
<dt>DDI de salida alternativo</dt>
<dd><p class="first last">Si la extensión llamada causa una llamada externa, este DDI se utilizará como número de origen.</p>
</dd>
<dt>Aplicar siempre transformaciones</dt>
<dd><p class="first last">Los números listados en la sección de Extensiones tanto del cliente de origen como de destino se considerarán internos y no atravesarán las reglas de transformación numérica. Habilite esta configuración para forzar las reglas de Transformación Numérica incluso en estos números.</p>
</dd>
</dl>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Las llamadas a <em>friends</em> se consideran internas. Eso significa que no se verificarán las ACL al llamar a un friend, sin importar si el origen de la llamada es un usuario u otro friend.</p>
</div>
</div>
<div class="section" id="summary-of-internal-friends">
<h9>Resumen de friends internos<a class="headerlink" href="#summary-of-internal-friends" title="Enlazar permanentemente con este título">¶</a></h9>
<p>Estos son puntos clave para entender los <em>friends internos</em>:</p>
<ul class="simple">
<li><p class="first">Han sido diseñados para permitir que los usuarios de un vPBX llamen a extensiones (normalmente usuarios) de otro vPBX de la misma <a class="reference internal" href="index.html#corporations"><span class="std std-ref">corporación</span></a>.</p>
</li>
<li><p class="first">Normalmente permitirán llamadas de usuario a usuario.</p>
</li>
<li><p class="first">No puede usar un friend interno para generar llamadas externas pagadas por el otro cliente.</p>
</li>
<li><p class="first">Pero pueden ocurrir llamadas externas si las extensiones están apuntadas a números externos (llamadas externas controladas).</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="friend-call-forward">
<h5>Desvío de llamadas de friends<a class="headerlink" href="#friend-call-forward" title="Enlazar permanentemente con este título">¶</a></h5>
<p>El desvío de llamadas del friend se puede configurar con el botón <strong>Lista de configuraciones de desvío de llamadas</strong>.</p>
<p>Estos son los campos y valores disponibles:</p>
<dl class="glossary docutils">
<dt id="term-call-type">Tipo de llamada</dt>
<dd><p class="first last">Determina si el desvío debe aplicarse a llamadas externas, internas o cualquier tipo de llamada.</p>
</dd>
<dt id="term-forward-type">Tipo de desvío</dt>
<dd><dl class="first last docutils">
<dt>Cuándo debe aplicarse este desvío:</dt>
<dd><ul class="first last simple">
<li><p class="first">Incondicional: siempre</p>
</li>
<li><p class="first">Sin respuesta: cuando la llamada no se responde en X segundos</p>
</li>
<li><p class="first">Ocupado: Cuando el friend rechaza una llamada entrante.</p>
</li>
<li><p class="first">No registrado: cuando el friend no está registrado en IvozProvider.</p>
</li>
</ul>
</dd>
</dl>
</dd>
<dt id="term-target-type">Tipo de destino</dt>
<dd><dl class="first last docutils">
<dt>Qué ruta usará la llamada desviada.</dt>
<dd><ul class="first last simple">
<li><p class="first">Correo de voz</p>
</li>
<li><p class="first">Número (externo)</p>
</li>
<li><p class="first">Extensión (interna)</p>
</li>
</ul>
</dd>
</dl>
</dd>
</dl>
<div class="admonition hint">
<p class="first admonition-title">Consejo</p>
<p class="last">Si queremos desviar a otro proceso, podemos crear una extensión enrutada a ese objeto y usar el tipo de destino <em>Extensión</em>.</p>
</div>
</div>
<span id="document-administration_portal/client/vpbx/routing_endpoints/conference_rooms"></span><div class="section" id="conference-rooms">
<span id="id1"></span><h5>Salas de conferencias<a class="headerlink" href="#conference-rooms" title="Enlazar permanentemente con este título">¶</a></h5>
<p>IvozProvider soporta salas de conferencias que pueden configurarse en la sección <strong>Configuración del cliente</strong> &gt; <strong>Salas de conferencias</strong>.</p>
<p><strong>En instalaciones distribuidas</strong> el uso de conferencias solo es compatible con una asignación estática o distribución &#8216;basada en hash&#8217; (ver <strong>Método de distribución</strong> <a class="reference internal" href="index.html#virtual-pbx"><span class="std std-ref">aquí</span></a>).</p>
<div class="admonition hint">
<p class="first admonition-title">Consejo</p>
<p class="last">Los operadores de marca pueden elegir qué Clientes tienen conferencias (ver <strong>Características</strong> en <a class="reference internal" href="index.html#brand-configuration"><span class="std std-ref">Configuración de Marca</span></a> y <a class="reference internal" href="index.html#client-configuration"><span class="std std-ref">Configuración del Cliente</span></a>).</p>
</div>
<p class="rubric">Crear una nueva conferencia de audio</p>
<p>La siguiente imagen muestra el proceso de creación de una nueva sala de conferencias:</p>
<blockquote>
<div><dl class="docutils">
<dt>Nombre</dt>
<dd><p class="first last">Nombre que se utilizará para identificar esta sala de conferencias en otras secciones</p>
</dd>
<dt>Miembros máximos</dt>
<dd><p class="first last">Número máximo de participantes en la conferencia. Cuando se alcance este límite, las solicitudes de unión serán rechazadas.</p>
</dd>
<dt>Anunciar número de usuarios</dt>
<dd><p class="first last">Primer miembro o siempre. Reproducir una locución al unirse a una conferencia indicando cuántos usuarios ya están participando. Las opciones son: solo al primer miembro de la conferencia o a cualquiera que se una.</p>
</dd>
<dt>Protegido por pin</dt>
<dd><p class="first last">Las salas de conferencias pueden estar protegidas por pin. El pin se solicitará antes de entrar y debe ser numérico.</p>
</dd>
</dl>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">El límite de miembros puede deshabilitarse configurándolo en 0.</p>
</div>
<p class="rubric">Enrutar una extensión o DDI a la conferencia</p>
<p>Para ingresar a una conferencia debe haber un número que se enrute a ellas:</p>
<p>En la siguiente sección veremos cómo configurar un <a class="reference internal" href="index.html#ddis"><span class="std std-ref">DDI externo</span></a> a una sala de conferencias para que pueda ser utilizado por llamantes externos.</p>
<div class="admonition hint">
<p class="first admonition-title">Consejo</p>
<p class="last">Hay otras formas de hacer que los llamantes externos se unan a una sala de conferencias sin usar un DDI: se puede asignar a una Extensión. De esta manera, cualquier usuario puede transferir la llamada a la extensión de la conferencia, o puede ser enrutada, por ejemplo, usando una entrada IVR.</p>
</div>
</div>
</div>
</div>
<span id="document-administration_portal/client/vpbx/routing_tools/index"></span><div class="section" id="routing-tools">
<h4>Herramientas de encaminamiento<a class="headerlink" href="#routing-tools" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Las secciones de este grupo se utilizan para modificar la política de enrutamiento de llamadas:</p>
<div class="toctree-wrapper compound">
<span id="document-administration_portal/client/vpbx/routing_tools/external_call_filters"></span><div class="section" id="external-call-filters">
<span id="external-filters"></span><span id="id1"></span><h5>Filtros de llamadas externas<a class="headerlink" href="#external-call-filters" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Una de las tareas más comunes que realizará el administrador de un cliente es configurar horarios y calendarios para aplicarlos a los <a class="reference internal" href="index.html#ddis"><span class="std std-ref">DDIs</span></a> existentes.</p>
<p>Una vez que tengamos nuestros nuevos <a class="reference internal" href="index.html#schedules"><span class="std std-ref">Horarios</span></a> y <a class="reference internal" href="index.html#calendars"><span class="std std-ref">Calendarios</span></a> creados, es hora de aplicarlos en lo que llamamos <strong>Filtro de llamadas externas</strong>.</p>
<p>El administrador del cliente puede configurarlos en la siguiente pantalla:</p>
<div class="section" id="basic-info">
<h6>Información básica<a class="headerlink" href="#basic-info" title="Enlazar permanentemente con este título">¶</a></h6>
<blockquote>
<div><dl class="docutils">
<dt>Nombre</dt>
<dd><p class="first last">Nombre descriptivo que hará referencia a este filtro en la configuración de DDIs.</p>
</dd>
<dt>Locución de bienvenida</dt>
<dd><p class="first last">Esta locución se reproducirá si la llamada no va a ser desviada por filtros fuera de horario o festivos (en otras palabras, si se va a aplicar el enrutamiento normal del DDI).</p>
</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="filtering-info">
<h6>Información de filtrado<a class="headerlink" href="#filtering-info" title="Enlazar permanentemente con este título">¶</a></h6>
<blockquote>
<div><dl class="docutils">
<dt>Lista blanca</dt>
<dd><p class="first last">El origen externo se verificará contra las <a class="reference internal" href="index.html#match-lists"><span class="std std-ref">Listas de coincidencia</span></a> asociadas, si se encuentra una coincidencia, la llamada se enruta directamente al destino DDI, saltando el proceso de filtrado. Ten en cuenta que las listas negras se verifican antes que las listas blancas.</p>
</dd>
<dt>Lista negra</dt>
<dd><p class="first last">El origen externo se verificará contra las <a class="reference internal" href="index.html#match-lists"><span class="std std-ref">Listas de coincidencia</span></a> asociadas, si se encuentra una coincidencia, la llamada será rechazada inmediatamente.</p>
</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="holidays-configuration">
<h6>Configuración de festivos<a class="headerlink" href="#holidays-configuration" title="Enlazar permanentemente con este título">¶</a></h6>
<blockquote>
<div><dl class="docutils">
<dt>Festivos habilitados</dt>
<dd><p class="first last">Configura esto en no para ignorar completamente el filtrado de festivos.</p>
</dd>
<dt>Calendarios</dt>
<dd><p class="first last">Uno o más <a class="reference internal" href="index.html#calendars"><span class="std std-ref">Calendarios</span></a> pueden asociarse con el filtro. Se aplicará la combinación de todos los calendarios.</p>
</dd>
<dt>Locución de festivo</dt>
<dd><p class="first last">La locución se reproducirá cuando el día esté marcado como festivo en cualquiera de los calendarios asociados con el filtro <strong>si la entrada del calendario no tiene locución</strong> para ese día.</p>
</dd>
<dt>Tipo de destino festivo</dt>
<dd><p class="first last">Después de reproducir la locución anterior (si está configurada), la llamada puede ser desviada a un buzón de voz, número externo o extensión interna. Por ejemplo, el filtro de la imagen redirigirá las llamadas durante los festivos al número externo 676 676 676.</p>
</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="out-of-schedule-configuration">
<h6>Configuración fuera de horario<a class="headerlink" href="#out-of-schedule-configuration" title="Enlazar permanentemente con este título">¶</a></h6>
<blockquote>
<div><dl class="docutils">
<dt>Fuera de horario habilitado</dt>
<dd><p class="first last">Configura esto en no para ignorar completamente el filtrado fuera de horario.</p>
</dd>
<dt>Horarios</dt>
<dd><p class="first last">Se pueden aplicar uno o más <a class="reference internal" href="index.html#schedules"><span class="std std-ref">Horarios</span></a>. Se aplicará la combinación de todos los intervalos de tiempo definidos en los horarios.</p>
</dd>
<dt>Locución fuera de horario</dt>
<dd><p class="first last">La locución se reproducirá cuando, no siendo festivo, la hora actual no esté en ninguno de los intervalos de tiempo definidos en los horarios asignados al filtro.</p>
</dd>
<dt>Tipo de destino fuera de horario</dt>
<dd><p class="first last">Como en el desvío de festivos, pero para fuera de horario. La imagen anterior no aplicará ningún desvío (y la llamada se colgará).</p>
</dd>
</dl>
</div></blockquote>
<div class="admonition attention">
<p class="first admonition-title">Atención</p>
<p class="last">Los festivos se procesan <strong>antes</strong> de los eventos fuera de horario.</p>
</div>
<p>En la siguiente sección utilizaremos este nuevo filtro creado con <a class="reference internal" href="index.html#ddis"><span class="std std-ref">DDIs</span></a> para que podamos configurar una locución de bienvenida para los días normales, y comportamientos especiales para los festivos y eventos fuera de horario.</p>
</div>
</div>
<span id="document-administration_portal/client/vpbx/routing_tools/calendars"></span><div class="section" id="calendars">
<span id="id1"></span><h5>Calendarios<a class="headerlink" href="#calendars" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Los calendarios se utilizan para definir qué días se consideran festivos. Al igual que los horarios, se pueden combinar múltiples calendarios.</p>
<div class="section" id="calendar-holidays">
<h6>Festivos del calendario<a class="headerlink" href="#calendar-holidays" title="Enlazar permanentemente con este título">¶</a></h6>
<p>El proceso de creación del calendario solo requiere un nombre. Una vez creado, podemos agregar qué días serán festivos usando los botones en su fila:</p>
<blockquote>
<div><dl class="docutils">
<dt>Nombre</dt>
<dd><p class="first last">Nombre único para identificar esta fecha festiva</p>
</dd>
<dt>Locución</dt>
<dd><p class="first last">Sobrescribir la locución festiva predeterminada del filtro de llamadas externas</p>
</dd>
<dt>Fecha del evento</dt>
<dd><p class="first last">Día del calendario que se marcará como festivo</p>
</dd>
<dt>Evento de todo el día</dt>
<dd><p class="first last">Habilite esto para crear un evento que dure todo el día</p>
</dd>
<dt>Hora de inicio/fin</dt>
<dd><p class="first last">Para eventos que no duran todo el día, especifique el intervalo de tiempo en que el evento estará activo</p>
</dd>
<dt>Opciones de enrutamiento</dt>
<dd><p class="first last">Sobrescribir el enrutamiento festivo predeterminado del filtro de llamadas externas</p>
</dd>
</dl>
</div></blockquote>
<div class="admonition warning">
<p class="first admonition-title">Advertencia</p>
<p class="last">La lógica de los calendarios es opuesta a la de los horarios: Si un día no está definido como festivo en ninguno de los calendarios, se considerará un día normal y no se aplicará ningún filtro.</p>
</div>
<div class="admonition hint">
<p class="first admonition-title">Consejo</p>
<p class="last">Los festivos sin locuciones especiales aplicarán la locución festiva del filtro de llamadas externas.</p>
</div>
<div class="admonition hint">
<p class="first admonition-title">Consejo</p>
<p class="last">Los festivos sin enrutamiento especial aplicarán el enrutamiento festivo del filtro de llamadas externas.</p>
</div>
<div class="admonition hint">
<p class="first admonition-title">Consejo</p>
<p class="last">Además, una vez creada una fecha, existe la posibilidad de importar más fechas desde un archivo. Esta opción se encuentra en el menú de la lista de fechas y se llama <em>Importar desde CSV</em>. También se puede agregar un rango de fechas con la opción de menú <em>Agregar rango de fechas festivas</em>.</p>
</div>
<div class="section" id="csv-import-format">
<h7>Formato de importación CSV<a class="headerlink" href="#csv-import-format" title="Enlazar permanentemente con este título">¶</a></h7>
<p>Esta opción se encuentra en el menú de la lista de fechas y se llama <em>Importar desde CSV</em>.</p>
<p>El archivo CSV para importar los festivos debe contener las siguientes columnas (Campos marcados con * son requeridos):</p>
<blockquote>
<div><dl class="docutils">
<dt>Nombre*</dt>
<dd><p class="first last">Nombre del festivo</p>
</dd>
<dt>Fecha*</dt>
<dd><p class="first last">Fecha del evento en formato YYYY-MM-DD</p>
</dd>
</dl>
</div></blockquote>
<p>Las columnas deben estar separadas por puntos y comas (;) y las cadenas deben estar encerradas en comillas dobles (&#8220;&#8221;). El carácter de escape es la barra invertida (\).</p>
<p class="rubric">Ejemplo de fichero CSV</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>&quot;New Year&#39;s Eve&quot;,&quot;2024-12-31&quot;
&quot;New Year&#39;s Day&quot;,&quot;2025-01-01&quot;
&quot;Labor Day&quot;,&quot;2025-05-01&quot;
&quot;\&quot;Special\&quot; Holiday&quot;,&quot;2025-12-26&quot;
</pre></div>
</div>
</div>
</div>
<div class="section" id="special-schedules">
<span id="id2"></span><h6>Horarios especiales<a class="headerlink" href="#special-schedules" title="Enlazar permanentemente con este título">¶</a></h6>
<p>Los calendarios también se pueden usar para sobrescribir algunos períodos de tiempo con un horario diferente. Esto puede ser útil si vPBX tiene un horario de verano u otros tipos de eventos basados en horarios.</p>
<p>Los horarios especiales pueden definir un programador personalizado y sobrescribir las configuraciones de los filtros de llamadas externas:</p>
<blockquote>
<div><dl class="docutils">
<dt>Fecha de inicio</dt>
<dd><p class="first last">Desde cuándo los horarios sobrescribirán la configuración de los filtros</p>
</dd>
<dt>Fecha de fin</dt>
<dd><p class="first last">Último día del período (incluido)</p>
</dd>
<dt>Horarios</dt>
<dd><p class="first last">Horarios que se utilizarán en el período definido</p>
</dd>
<dt>Locución</dt>
<dd><p class="first last">En caso de fuera de horario, esta locución se reproducirá. Dejar vacío para usar la locución del filtro de llamadas externas.</p>
</dd>
<dt>Opciones de ruta</dt>
<dd><p class="first last">Sobrescribir las opciones predeterminadas del filtro de llamadas externas fuera de horario</p>
</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="difference-between-non-whole-day-event-and-special-schedules">
<h6>Diferencia entre evento de no todo el día y horarios especiales<a class="headerlink" href="#difference-between-non-whole-day-event-and-special-schedules" title="Enlazar permanentemente con este título">¶</a></h6>
<p>Para entender la diferencia entre estas dos características, es importante conocer el orden de la lógica del filtro de llamadas:</p>
<p><strong>1. ¿Está marcado el día actual como festivo?</strong></p>
<p>Aquí es donde se aplica el evento de no todo el día, haciendo que la respuesta a la pregunta anterior sea positiva durante el período definido.</p>
<blockquote>
<div><ul class="simple">
<li><p class="first">Sí: aplicar la lógica festiva definida en el evento del calendario o en el filtro de llamadas externas.</p>
</li>
<li><p class="first">No: proceder a la pregunta 2.</p>
</li>
</ul>
</div></blockquote>
<p><strong>2. ¿Está marcada la hora actual como fuera de horario?</strong></p>
<p>Aquí es donde se aplican los horarios especiales, sobrescribiendo los horarios del filtro de llamadas externas con el definido en el período del calendario.</p>
<blockquote>
<div><ul class="simple">
<li><p class="first">Sí: aplicar la lógica fuera de horario definida en los horarios especiales o en el filtro de llamadas externas.</p>
</li>
<li><p class="first">No: proceder con la lógica estándar.</p>
</li>
</ul>
</div></blockquote>
<p class="rubric">Ejemplo</p>
<p>Configuración de un día dado:</p>
<blockquote>
<div><ul class="simple">
<li><p class="first">Evento de no todo el día: 8:00-15:00</p>
</li>
<li><p class="first">Horario especial: 13:00-17:00</p>
</li>
</ul>
</div></blockquote>
<p>Casos:</p>
<blockquote>
<div><ul class="simple">
<li><p class="first">Llamada a las 7:00: fuera de horario debido a horario especial.</p>
</li>
<li><p class="first">Llamada a las 9:00: lógica festiva debido a evento de no todo el día.</p>
</li>
<li><p class="first">Llamada a las 14:00: lógica festiva debido a evento de no todo el día.</p>
</li>
<li><p class="first">Llamada a las 16:00: lógica normal.</p>
</li>
<li><p class="first">Llamada a las 18:00: fuera de horario debido a horario especial.</p>
</li>
</ul>
</div></blockquote>
</div>
</div>
<span id="document-administration_portal/client/vpbx/routing_tools/schedules"></span><div class="section" id="schedules">
<span id="id1"></span><h5>Horarios<a class="headerlink" href="#schedules" title="Enlazar permanentemente con este título">¶</a></h5>
<p>La sección <strong>Configuración del cliente</strong> &gt; <strong>Horario</strong> permite configurar diferentes intervalos de tiempo cuando un <a class="reference internal" href="index.html#ddis"><span class="std std-ref">DDI externo</span></a> estará disponible.</p>
<p>La pantalla mostrada al administrador del cliente se ve así:</p>
<p>Con la configuración anterior, hemos definido un horario matutino que se aplicará de lunes a jueves.</p>
<p>También podemos definir un horario de tarde para lunes a jueves:</p>
<p>Y aplicar un intervalo de tiempo diferente para los viernes:</p>
<p>Tenemos los siguientes intervalos de tiempo que combinados determinarán el horario de oficina de nuestro cliente.</p>
<div class="admonition warning">
<p class="first admonition-title">Advertencia</p>
<p class="last">El horario se definirá combinando los intervalos de tiempo activos: Cualquier tiempo fuera de estos intervalos agrupados se considerará fuera de horario.</p>
</div>
</div>
<span id="document-administration_portal/client/vpbx/routing_tools/match_lists"></span><div class="section" id="id1">
<span id="match-lists"></span><span id="id2"></span><h5>Listas de coincidencia<a class="headerlink" href="#id1" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Las listas de coincidencia están diseñadas para agrupar números o patrones conocidos para usarlos en tratamientos específicos.</p>
<p>Dependiendo de la sección utilizada, estos números pueden coincidir con el origen o el destino de la llamada, así que asegúrate de usar nombres distintivos para tus listas de coincidencia.</p>
<p>Por ejemplo, como se menciona en la sección anterior <a class="reference internal" href="index.html#external-filters"><span class="std std-ref">Filtros de llamadas externas</span></a>, las listas blancas y negras contienen una o más listas de coincidencia. En este caso, el <strong>origen</strong> de la llamada se comparará con las entradas de la lista para determinar si se aplicará el tratamiento de <strong>saltar</strong> el filtro o <strong>rechazar</strong> la llamada.</p>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Las listas de coincidencia en sí no tienen un comportamiento asociado, solo proporcionan una forma común para que todos los procesos determinen si un número tiene un tratamiento.</p>
</div>
<div class="admonition attention">
<p class="first admonition-title">Atención</p>
<p class="last">Ten en cuenta que los números de una lista de coincidencia se verifican contra orígenes o destinos dependiendo de la sección de configuración que los use.</p>
</div>
<p>La sección <strong>Configuración del cliente</strong> &gt; <strong>Listas de coincidencia</strong> permite configurar diferentes elementos que agruparán los números y patrones.</p>
<p>Como se muestra en <strong>Lista de patrones de coincidencia</strong>, una lista de coincidencia puede contener números específicos o grupos utilizando <a class="reference external" href="http://php.net/manual/en/reference.pcre.pattern.syntax.php">Expresiones Regulares</a></p>
<div class="admonition error">
<p class="first admonition-title">Error</p>
<p class="last">Las <strong>expresiones regulares</strong> de los patrones de coincidencia deben estar <strong>en formato E.164</strong> y <strong>el símbolo más debe estar escapado</strong> (por ejemplo, ^\+34 para todos los números españoles).</p>
</div>
</div>
<span id="document-administration_portal/client/vpbx/routing_tools/route_locks"></span><div class="section" id="id1">
<span id="route-locks"></span><span id="id2"></span><h5>Candados de ruta<a class="headerlink" href="#id1" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Los candados de ruta son una forma simple pero poderosa de bifurcar las lógicas de ruta al entregar llamadas. Esta bifurcación se realiza dependiendo del estado del candado en un momento particular:</p>
<ul class="simple">
<li><p class="first"><strong>Abierto</strong>: luz verde, adelante.</p>
</li>
<li><p class="first"><strong>Cerrado</strong>: luz roja, no se permite el paso.</p>
</li>
</ul>
<p>Se utilizan como criterios de reglas de ruta condicional (ver cómo en <a class="reference internal" href="index.html#conditional-routes"><span class="std std-ref">Rutas condicionales</span></a>).</p>
<div class="section" id="route-lock-creation">
<h6>Creación de candado de ruta<a class="headerlink" href="#route-lock-creation" title="Enlazar permanentemente con este título">¶</a></h6>
<p>Cuando agregas un nuevo candado de ruta en la sección <strong>Candados de ruta</strong>, se te pedirá que completes los siguientes campos:</p>
<blockquote>
<div><dl class="docutils">
<dt>Nombre</dt>
<dd><p class="first last">Este nombre se utilizará en rutas condicionales para identificar el candado.</p>
</dd>
<dt>Descripción</dt>
<dd><p class="first last">Solo una descripción.</p>
</dd>
<dt>Estado</dt>
<dd><p class="first last">Establece el estado inicial del candado: abierto o cerrado.</p>
</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="route-locks-service-codes">
<h6>Códigos de servicio de candados de ruta<a class="headerlink" href="#route-locks-service-codes" title="Enlazar permanentemente con este título">¶</a></h6>
<p>Aunque puedes establecer el estado inicial del candado al crearlo y cambiarlo también usando el portal de administración, la forma habitual de manejar los cambios de estado de un candado es usar los códigos de servicio listados en la sección <strong>Candados de ruta</strong>.</p>
<p>Estos códigos de servicio tienen dos partes:</p>
<ul class="simple">
<li><p class="first"><strong>Código de servicio</strong>: configurado en la sección <strong>Servicios</strong> por marca/cliente.</p>
</li>
<li><p class="first"><strong>ID del candado</strong>: ID numérico inmutable asignado a cada candado.</p>
</li>
</ul>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p>Hay 3 códigos de servicio disponibles para las operaciones más comunes en candados:</p>
<ul class="simple">
<li><p class="first">Abrir candado</p>
</li>
<li><p class="first">Cerrar candado</p>
</li>
<li><p class="first">Alternar candado.</p>
</li>
</ul>
<p class="last">Lee <a class="reference internal" href="index.html#services"><span class="std std-ref">Servicios</span></a> para más detalles.</p>
</div>
</div>
</div>
</div>
</div>
<span id="document-administration_portal/client/vpbx/user_configuration/index"></span><div class="section" id="user-configuration">
<h4>Configuración de usuario<a class="headerlink" href="#user-configuration" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Esta sección agrupa funcionalidades que pueden ser asignadas a usuarios/friends:</p>
<div class="toctree-wrapper compound">
<span id="document-administration_portal/client/vpbx/user_configuration/outgoing_ddi_rules"></span><div class="section" id="outgoing-ddi-rules">
<span id="outgoingddi-rules"></span><h5>Reglas DDI de salida<a class="headerlink" href="#outgoing-ddi-rules" title="Enlazar permanentemente con este título">¶</a></h5>
<p>La mayoría de las entidades que llaman en IvozProvider requieren un DDI de salida cuando realizan llamadas a números externos. Esto incluye: Usuarios, Friends, Faxes, Cuentas Retail, etc.</p>
<p>Pero hay algunos casos en los que un solo DDI de salida no es suficiente, y el DDI presentado depende del número llamado o de un prefijo dado. Para archivar esta selección dinámica de DDI de salida, puedes usar las reglas de DDI de salida.</p>
<div class="section" id="outgoing-ddi-based-on-destination">
<h6>DDI de salida basado en destino<a class="headerlink" href="#outgoing-ddi-based-on-destination" title="Enlazar permanentemente con este título">¶</a></h6>
<p>Para las reglas basadas en destino, primero necesitarías agrupar los números de destino en <a class="reference internal" href="index.html#match-lists"><span class="std std-ref">Listas de coincidencia</span></a>.</p>
<p>Para este ejemplo, crearemos una lista de coincidencia de móviles corporativos con todos los números móviles de los trabajadores de nuestro cliente. Cuando llamemos a esos números, mantendremos el DDI de salida original asignado al usuario, y para el resto de los casos, forzaremos el DDI al DDI de salida principal del cliente.</p>
<p class="rubric">Crear una nueva regla DDI de salida</p>
<p>La pantalla principal de creación define la acción que se llevará a cabo cuando ninguna regla coincida con el destino marcado, por lo que aquí definimos forzar el DDI principal del cliente.</p>
<p class="rubric">Asignar acciones de listas de reglas</p>
<p>Ahora agregamos una nueva regla que coincidirá con nuestros móviles para que el DDI de salida del usuario se mantenga sin cambios.</p>
<p class="rubric">Asignar regla a los llamantes</p>
<p>Por último, tenemos que configurar quién usará esta regla para cambiar dinámicamente su número de presentación. Podemos hacer esto en la <strong>pantalla de edición del cliente</strong> o en la <strong>pantalla de edición de usuarios</strong>.</p>
<p>En este caso, el Usuario presentará el DDI 777777777 al llamar a móviles corporativos y 666666666 al llamar al resto de los números externos.</p>
</div>
<div class="section" id="outgoing-ddi-based-on-prefix">
<h6>DDI de salida basado en prefijo<a class="headerlink" href="#outgoing-ddi-based-on-prefix" title="Enlazar permanentemente con este título">¶</a></h6>
<p>Las reglas de DDI de salida también se pueden usar para cambiar el DDI de salida predeterminado basado en un prefijo de llamada.</p>
<p class="rubric">Crear una nueva regla DDI de salida</p>
<p>La pantalla principal de creación define la acción que se llevará a cabo cuando ninguna regla coincida con el destino marcado, mantendremos el DDI original si no se usa ningún prefijo.</p>
<p class="rubric">Asignar un patrón de prefijo</p>
<p>Ahora agregamos una nueva regla con prefijo (digamos 111) y acción para forzar el DDI a 666666666.</p>
<p>En este caso, el Usuario presentará el DDI 666666666 al llamar a cualquier destino con el prefijo 111 y 777777777 cuando no use ningún prefijo.</p>
<div class="admonition important">
<p class="first admonition-title">Importante</p>
<p class="last">El prefijo <strong>debe</strong> tener este formato: de 1 a 3 dígitos terminados con el símbolo *.</p>
</div>
</div>
</div>
<span id="document-administration_portal/client/vpbx/user_configuration/pick_up_groups"></span><div class="section" id="pick-up-groups">
<span id="capture-groups"></span><h5>Grupos de captura<a class="headerlink" href="#pick-up-groups" title="Enlazar permanentemente con este título">¶</a></h5>
<p>La captura de llamadas es el proceso mediante el cual un usuario puede contestar una llamada que está sonando en otro terminal. Es necesario que, de alguna manera (sonido, luces intermitentes, notificación, etc.), los usuarios sepan que la llamada está sonando en otro lugar.</p>
<p>IvozProvider soporta dos tipos de capturas de llamadas:</p>
<blockquote>
<div><dl class="docutils">
<dt>Captura directa</dt>
<dd><p class="first last">En este tipo de captura, el usuario que intenta capturar la llamada entrante debe incluir la extensión del teléfono objetivo después del código de servicio. Por ejemplo, si el código de captura directa es *95, el usuario debe marcar *95101 para capturar una llamada que está sonando en la extensión 101.</p>
</dd>
<dt>Captura de grupo</dt>
<dd><p class="first last">En este tipo de captura, el usuario que intenta capturar la llamada entrante solo marcará el código de servicio. Si alguien en cualquiera de los grupos de captura del usuario tiene una llamada entrante, será contestada por el capturador.</p>
</dd>
</dl>
</div></blockquote>
<div class="section" id="call-pickup-groups">
<h6>Grupos de captura de llamadas<a class="headerlink" href="#call-pickup-groups" title="Enlazar permanentemente con este título">¶</a></h6>
<p>Para realizar <strong>capturas de grupo</strong>, el usuario capturador debe ser parte del mismo grupo que el usuario objetivo que desea capturar.</p>
<p>La sección <strong>Grupos de captura</strong> permite al administrador del cliente configurar qué usuarios estarán en cada grupo:</p>
<p>Como se muestra en la sección <a class="reference internal" href="index.html#users"><span class="std std-ref">Usuarios</span></a>, podemos agregar o editar los grupos de un usuario en la pantalla de edición del usuario.</p>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Un usuario puede ser parte de múltiples grupos de captura. El sistema tomará todos ellos en cuenta al usar el servicio de captura de grupo.</p>
</div>
</div>
<div class="section" id="group-pickup-service-code">
<h6>Código de servicio de captura de grupo<a class="headerlink" href="#group-pickup-service-code" title="Enlazar permanentemente con este título">¶</a></h6>
<p>IvozProvider soporta 2 niveles de configuración diferentes para definir los códigos de servicio para la captura:</p>
<ul class="simple">
<li><p class="first">A nivel de marca: <strong>Configuración de marca</strong> &gt; <strong>Servicios</strong>.</p>
</li>
<li><p class="first">A nivel de cliente: <strong>Configuración de cliente</strong> &gt; <strong>Servicios</strong>.</p>
</li>
</ul>
<p>El administrador de la marca puede configurar códigos genéricos que todos los clientes usarán. Los clientes pueden personalizar estos códigos si están acostumbrados a otros.</p>
<p>La <a class="reference internal" href="index.html#services"><span class="std std-ref">siguiente sección</span></a> explica los servicios en profundidad, con todos los servicios adicionales que se pueden acceder marcando códigos que comienzan con *.</p>
</div>
</div>
<span id="document-administration_portal/client/vpbx/user_configuration/call_acls"></span><div class="section" id="call-acls">
<span id="call-permissions"></span><h5>Permisos de llamada<a class="headerlink" href="#call-acls" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Los <strong>Permisos de llamada</strong> determinan qué usuarios pueden llamar a números externos.</p>
<div class="admonition attention">
<p class="first admonition-title">Atención</p>
<p class="last">Las extensiones internas (las que se enumeran en <a class="reference internal" href="index.html#extensions"><span class="std std-ref">Extensiones</span></a>) están permitidas para todos los usuarios, los <strong>Permisos de llamada solo se aplican a números externos</strong>. Las llamadas a extensiones de friends también se consideran internas, no se necesita permiso de llamada.</p>
</div>
<p>La configuración de <strong>Permisos de llamada</strong> tiene dos partes diferentes:</p>
<ul>
<li><p class="first">Clasificar la llamada en diferentes tipos basados en <strong>listas de coincidencia</strong>:</p>
<blockquote>
<div><ul class="simple">
<li><p class="first">Nivel de marca: <strong>Configuración de marca</strong> &gt; <strong>Listas de coincidencia genéricas</strong></p>
</li>
<li><p class="first">Nivel de cliente: <strong>Configuración del cliente</strong> &gt; <strong>Listas de coincidencia</strong></p>
</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">Elegir políticas para grupos de patrones: <strong>Configuración del cliente</strong> &gt; <strong>Permisos de llamada</strong></p>
</li>
</ul>
<div class="section" id="call-acl-matchlists">
<h6>Listas de coincidencia de permisos de llamada<a class="headerlink" href="#call-acl-matchlists" title="Enlazar permanentemente con este título">¶</a></h6>
<p>El número de destino se compara con las <strong>Listas de coincidencia de permisos</strong> para determinar el permiso de llamada.</p>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Las listas de coincidencia de marca pueden ser utilizadas por cualquiera de sus clientes, por lo que los patrones de permisos más comunes (por ejemplo, prefijos de país) pueden ser reutilizados fácilmente.</p>
</div>
<p>Para obtener más información sobre cómo se crean los patrones de listas de coincidencia, consulta la sección <a class="reference internal" href="index.html#match-lists"><span class="std std-ref">Listas de coincidencia</span></a>.</p>
<div class="admonition error">
<p class="first admonition-title">Error</p>
<p class="last">Las <strong>expresiones regulares</strong> de los patrones de listas de coincidencia deben estar <strong>en formato E.164</strong> y <strong>el símbolo más debe estar escapado</strong> (por ejemplo, ^\+34 para todos los números españoles).</p>
</div>
</div>
<div class="section" id="call-acl">
<h6>Permiso de llamada<a class="headerlink" href="#call-acl" title="Enlazar permanentemente con este título">¶</a></h6>
<p>Cuando se crea un nuevo <strong>Permiso de llamada</strong>, aparecen estos dos campos:</p>
<blockquote>
<div><dl class="docutils">
<dt>Nombre</dt>
<dd><p class="first last">Utilizado para referenciar este Permiso de llamada.</p>
</dd>
<dt>Política por defecto</dt>
<dd><p class="first last">Si no coincide ninguna regla, ¿este permiso denegará la llamada o la permitirá?</p>
</dd>
</dl>
</div></blockquote>
<p>Después de crear el <strong>Permiso de llamada</strong> podemos editarlo para agregar las reglas necesarias:</p>
<ul class="simple">
<li><p class="first">Reglas para denegar algunos destinos específicos.</p>
</li>
<li><p class="first">Reglas para permitir algunos destinos específicos.</p>
</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">La <strong>métrica</strong> determina el orden de evaluación de las reglas.</p>
</div>
<div class="section" id="assign-call-acls">
<h7>Asignar permisos de llamada<a class="headerlink" href="#assign-call-acls" title="Enlazar permanentemente con este título">¶</a></h7>
<p>Los <em>Permisos de llamada</em> creados pueden ser asignados a:</p>
<ul class="simple">
<li><p class="first">Friends a través del parámetro <em>Permiso de llamada</em>.</p>
</li>
<li><p class="first">Usuarios a través del parámetro <em>Permiso de llamada</em>.</p>
</li>
</ul>
</div>
</div>
</div>
<span id="document-administration_portal/client/vpbx/user_configuration/locations"></span><div class="section" id="locations">
<h5>Ubicaciones<a class="headerlink" href="#locations" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Las ubicaciones proporcionan una forma fácil de agrupar a los usuarios por el lugar en el que están trabajando.</p>
<blockquote>
<div><dl class="docutils">
<dt>Nombre</dt>
<dd><p class="first last">Nombre de la ubicación donde trabajan los usuarios</p>
</dd>
<dt>Descripción</dt>
<dd><p class="first last">Descripción larga con información adicional de la ubicación</p>
</dd>
</dl>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Actualmente no hay uso interno para las ubicaciones en la plataforma, pero es un requisito previo para futuros desarrollos.</p>
</div>
</div>
</div>
</div>
<span id="document-administration_portal/client/vpbx/multimedia/index"></span><div class="section" id="multimedia">
<h4>Multimedia<a class="headerlink" href="#multimedia" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Estas dos secciones involucran archivos multimedia:</p>
<div class="toctree-wrapper compound">
<span id="document-administration_portal/client/vpbx/multimedia/locutions"></span><div class="section" id="locutions">
<h5>Locuciones<a class="headerlink" href="#locutions" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Las locuciones de la plataforma se crean y suben igual que los archivos de <a class="reference internal" href="index.html#musiconhold"><span class="std std-ref">Música en Espera</span></a>.</p>
<p>La sección <strong>Configuración del cliente</strong> &gt; <strong>Locuciones</strong> permite al administrador del cliente elegir los sonidos que se reproducirán en muchos lugares de configuración (IVR, etc.) en toda la plataforma.</p>
<div class="admonition attention">
<p class="first admonition-title">Atención</p>
<p class="last">Las locuciones se pueden grabar desde cualquier terminal marcando la extensión de grabación que se muestra en su pantalla de edición.</p>
</div>
<div class="admonition hint">
<p class="first admonition-title">Consejo</p>
<p class="last">La principal diferencia entre una <strong>locución</strong> y <strong>música en espera</strong> es que el administrador elige cuándo se reproducirá la primera (fuera de horario, IVR, etc.) y la segunda se reproducirá cuando un usuario ponga una llamada en espera.</p>
</div>
</div>
<span id="document-administration_portal/client/vpbx/multimedia/music_on_hold"></span><div class="section" id="music-on-hold">
<span id="musiconhold"></span><span id="id1"></span><h5>Música en Espera<a class="headerlink" href="#music-on-hold" title="Enlazar permanentemente con este título">¶</a></h5>
<p>La música en espera se reproducirá cuando el usuario ponga la llamada en espera y el otro miembro espere hasta que se reanude la llamada.</p>
<p>Si un cliente ha definido una música en espera, se reproducirá. De lo contrario, se reproducirá la definida por el administrador de la marca. Si nada de esto está configurado, se reproducirá una música global.</p>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Se pueden agregar múltiples archivos para reproducir como Música en Espera. El sistema los elegirá aleatoriamente para cada llamada.</p>
</div>
<p class="rubric">Agregar una nueva música en espera</p>
<p>Una vez que la música ha sido <em>codificada</em>, el campo <strong>Estado</strong> mostrará <em>listo</em> y la música se usará para las próximas llamadas.</p>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">IvozProvider admite la mayoría de los formatos de audio comunes y los <em>codifica</em> al formato óptimo para la plataforma.</p>
</div>
<p>Después de la <em>codificación</em>, podemos descargar tanto la versión original como la convertida en la pantalla de edición.</p>
</div>
</div>
</div>
<span id="document-administration_portal/client/vpbx/faxes"></span><div class="section" id="faxes">
<span id="faxing-system"></span><span id="id1"></span><h4>Faxes<a class="headerlink" href="#faxes" title="Enlazar permanentemente con este título">¶</a></h4>
<p>IvozProvider incluye una solución de <em>fax virtual</em> simple pero eficiente que permite:</p>
<ul class="simple">
<li><p class="first">Enviar archivos PDF por fax.</p>
</li>
<li><p class="first">Recibir faxes por correo electrónico o revisarlos a través del portal web.</p>
</li>
</ul>
<div class="admonition error">
<p class="first admonition-title">Error</p>
<p class="last">IvozProvider utiliza <a class="reference external" href="http://www.voip-info.org/wiki/view/T.38">T.38</a> tanto para enviar como para recibir faxes. El Operador de Marca debe usar <em>contratos de peering</em> que lo soporten.</p>
</div>
<div class="section" id="creating-a-virtual-fax">
<h5>Crear un fax virtual<a class="headerlink" href="#creating-a-virtual-fax" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Estos son los campos que aparecen cuando creamos un nuevo fax:</p>
<blockquote>
<div><dl class="docutils">
<dt>Nombre</dt>
<dd><p class="first last">Usado por la sección restante para referenciar un fax</p>
</dd>
<dt>Email</dt>
<dd><p class="first last">Dirección de correo electrónico cuando queremos recibir faxes entrantes (si marcamos &#8216;Enviar por correo electrónico&#8217;)</p>
</dd>
<dt>DDI de salida</dt>
<dd><p class="first last">DDI usado como número de origen para faxes salientes</p>
</dd>
</dl>
</div></blockquote>
<p>Para recibir faxes en este DDI, necesitamos apuntarlo a nuestro nuevo fax en la sección <strong>DDIs</strong>.</p>
<p>El Operador de Marca puede elegir uno o más <a class="reference internal" href="index.html#outgoing-routings"><span class="std std-ref">Enrutamientos Salientes</span></a> para enviar faxes.</p>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Las lógicas de <em>balanceo de carga</em> y <em>conmutación por error</em> descritas en <a class="reference internal" href="index.html#outgoing-routings"><span class="std std-ref">Enrutamientos Salientes</span></a> también se aplican a los faxes.</p>
</div>
<div class="admonition important">
<p class="first admonition-title">Importante</p>
<p class="last">Si no se define una ruta específica para faxes, los faxes se enrutarán utilizando las rutas de llamadas estándar.</p>
</div>
</div>
<div class="section" id="sending-a-fax">
<h5>Enviar un fax<a class="headerlink" href="#sending-a-fax" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Enviar un fax es una tarea fácil que se realiza a través de la subsección <strong>Lista de archivos de fax salientes</strong>.</p>
<p>Primero, subimos el archivo PDF y configuramos el destino. Cuando guardamos la entrada, la lista muestra el fax y su estado.</p>
</div>
<div class="section" id="incoming-faxes-display">
<h5>Visualización de faxes entrantes<a class="headerlink" href="#incoming-faxes-display" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Aparte de ser recibidos por correo, los faxes también se pueden ver y descargar dentro del portal web en la subsección <strong>Lista de archivos de fax entrantes</strong>.</p>
</div>
</div>
<span id="document-administration_portal/client/vpbx/services"></span><div class="section" id="services">
<span id="client-services"></span><span id="id1"></span><h4>Servicios<a class="headerlink" href="#services" title="Enlazar permanentemente con este título">¶</a></h4>
<div class="admonition danger">
<p class="first admonition-title">Peligro</p>
<p class="last">Los servicios definidos en esta sección <strong>no son accesibles durante una conversación</strong>. Se activan <strong>llamando a los códigos</strong>, no usando códigos DTMF mientras se habla.</p>
</div>
<p>Cada cliente puede <em>personalizar</em> los valores predeterminados asignados por el <em>operador de la marca</em> usando la sección <strong>Configuración del cliente</strong> &gt; <strong>Servicios</strong> y cambiando los códigos listados allí.</p>
<div class="admonition hint">
<p class="first admonition-title">Consejo</p>
<p class="last">Los servicios eliminados por el <em>administrador del cliente</em> no estarán disponibles para los usuarios.</p>
</div>
</div>
<span id="document-administration_portal/client/vpbx/voicemails"></span><div class="section" id="voicemails">
<span id="id1"></span><h4>Buzones de voz<a class="headerlink" href="#voicemails" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Los buzones de voz pueden usarse como punto final enrutado en la mayoría de las lógicas de vPBX.</p>
<p>Todos los usuarios comienzan con un buzón de voz preconfigurado con su dirección de correo electrónico que se puede desactivar en la sección de buzones de voz.</p>
<p>También es posible crear un buzón de voz que no esté vinculado a ningún usuario, por lo que se puede usar en lógicas de enrutamiento más globales.</p>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Para estos buzones de voz genéricos, se requiere una extensión enrutada al buzón de voz para acceder al servicio de verificación de buzón de voz (usando el código de servicio seguido del número de extensión).</p>
</div>
<p>Los campos más notables del buzón de voz son:</p>
<blockquote>
<div><dl class="docutils">
<dt>Habilitado</dt>
<dd><p class="first last">Habilita o deshabilita el buzón de voz. Esto ocultará este buzón de voz de las listas de selección en las rutas.</p>
</dd>
<dt>Nombre</dt>
<dd><p class="first last">El nombre que se muestra en las listas de selección. Para los buzones de voz de usuario, este valor se calcula a partir del nombre y apellido del usuario.</p>
</dd>
<dt>Enviar correo de buzón de voz</dt>
<dd><p class="first last">Enviar o no enviar un correo electrónico a la dirección de usuario configurada cuando se recibe un nuevo buzón de voz. Para los buzones de voz de usuario, este valor se configura en la pantalla de edición del usuario.</p>
</dd>
<dt>Adjuntar sonidos de buzón de voz</dt>
<dd><p class="first last">Elija si desea adjuntar el mensaje de audio al correo electrónico enviado. Solo se muestra cuando <em>Enviar correo de buzón de voz</em> está configurado en <em>Sí</em></p>
</dd>
<dt>Locución</dt>
<dd><p class="first last">Si se establece, esta locución se reproduce como mensaje de bienvenida del buzón de voz cuando se va a grabar un buzón de voz para este buzón de voz. Esto solo se aplica para desvíos de llamadas al buzón de voz.</p>
</dd>
<dt>Usuarios</dt>
<dd><p class="first last">Permite asignar el buzón de voz a usuarios específicos. Solo disponible para buzones de voz genéricos.</p>
</dd>
</dl>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Si no se asigna una locución de buzón de voz, se utilizará la locución predeterminada siempre que el propietario no haya grabado un mensaje personalizado a través del menú de buzón de voz (llamando al código de servicio de buzón de voz).</p>
</div>
</div>
<span id="document-administration_portal/client/vpbx/addressbook"></span><div class="section" id="address-book">
<h4>Agenda<a class="headerlink" href="#address-book" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Los clientes de PBX virtual tienen acceso a una agenda simple para almacenar contactos, que se puede usar para integraciones de terceros.</p>
<p>Los contactos para los usuarios de vPBX son creados y gestionados automáticamente por el sistema, pero los administradores del cliente pueden agregar otros números externos a los contactos existentes.</p>
<div class="section" id="personal-data">
<h5>Datos personales<a class="headerlink" href="#personal-data" title="Enlazar permanentemente con este título">¶</a></h5>
<dl class="glossary docutils">
<dt id="term-name">Nombre</dt>
<dd><p class="first last">Nombre del contacto.</p>
</dd>
<dt id="term-lastname">Apellido</dt>
<dd><p class="first last">Apellido del contacto.</p>
</dd>
<dt id="term-email">Email</dt>
<dd><p class="first last">Email del contacto.</p>
</dd>
</dl>
</div>
<div class="section" id="phones">
<h5>Teléfonos<a class="headerlink" href="#phones" title="Enlazar permanentemente con este título">¶</a></h5>
<dl class="glossary docutils">
<dt id="term-work-phone">Teléfono Trabajo</dt>
<dd><p class="first last">Número de trabajo externo público del contacto.</p>
</dd>
<dt id="term-mobile-phone">Teléfono Móvil</dt>
<dd><p class="first last">Número de móvil externo público del contacto.</p>
</dd>
<dt id="term-other-phone">Otro Teléfono</dt>
<dd><p class="first last">Número en formato libre del contacto (Extensión interna, Fax, etc)</p>
</dd>
</dl>
</div>
</div>
<span id="document-administration_portal/client/vpbx/rating_profiles"></span><div class="section" id="rating-profiles">
<h4>Perfiles de precio<a class="headerlink" href="#rating-profiles" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Esta sección permite al cliente:</p>
<ul class="simple">
<li><p class="first">Ver la lista de planes de precios y su tiempo de activación.</p>
</li>
<li><p class="first">Verificar las etiquetas de enrutamiento disponibles (solo para clientes retail y wholesale) para alcanzar diferentes destinos.</p>
</li>
<li><p class="first">Simular una llamada y estimar el costo de una llamada dada.</p>
</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Esta sección solo se muestra a los clientes con <em>Mostrar detalles de facturación al cliente</em> configurado en Sí.</p>
</div>
</div>
<span id="document-administration_portal/client/vpbx/calls/index"></span><div class="section" id="calls">
<h4>Llamadas<a class="headerlink" href="#calls" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Estas son las secciones de la lista de llamadas para clientes vPBX:</p>
<div class="toctree-wrapper compound">
<span id="document-administration_portal/client/vpbx/calls/call_registry"></span><div class="section" id="call-registry">
<span id="id1"></span><h5>Registro de llamadas<a class="headerlink" href="#call-registry" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Lista todas las llamadas del cliente, incluso aquellas que no implican costo.</p>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">La exportación en <a class="reference external" href="https://es.wikipedia.org/wiki/CSV">CSV</a> permite descargar la lista para su posterior análisis.</p>
</div>
</div>
<span id="document-administration_portal/client/vpbx/calls/active_calls"></span><div class="section" id="active-calls">
<h5>Llamadas activas<a class="headerlink" href="#active-calls" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Esta sección permite al administrador del cliente ver <strong>llamadas activas actuales</strong>.</p>
<div class="admonition warning">
<p class="first admonition-title">Advertencia</p>
<p class="last"><strong>Se mostrarán las llamadas que involucren a cualquier usuario, friend, cuenta minorista, dispositivo residencial o cliente mayorista</strong>, sin importar si son internas o externas.</p>
</div>
<p>Estas son las columnas mostradas:</p>
<blockquote>
<div><dl class="docutils">
<dt>Duración</dt>
<dd><p class="first last">Muestra la duración del establecimiento de la llamada durante el establecimiento y la duración de la llamada durante la llamada en curso. También muestra la dirección (entrante/saliente) y la información del estado de la llamada, como se explica <a class="reference internal" href="index.html#call-state"><span class="std std-ref">aquí</span></a>.</p>
</dd>
<dt>Propietario</dt>
<dd><p class="first last">Usuario, friend, cuenta minorista, dispositivo residencial o cliente mayorista involucrado en la llamada dada.</p>
</dd>
<dt>Parte</dt>
<dd><p class="first last">Participante restante de la llamada dada. Se actualiza para mostrar la parte actual (en transferencias y llamadas desviadas).</p>
</dd>
</dl>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Habrá una entrada por entidad involucrada. Esto significa que una llamada interna estándar se mostrará en dos filas diferentes: una llamada saliente para el usuario que llama y una llamada entrante para el usuario llamado.</p>
</div>
</div>
<span id="document-administration_portal/client/vpbx/calls/external_calls"></span><div class="section" id="external-calls">
<h5>Llamadas externas<a class="headerlink" href="#external-calls" title="Enlazar permanentemente con este título">¶</a></h5>
<p>La sección de <strong>Llamadas externas</strong> lista <strong>tanto las llamadas externas entrantes como salientes</strong>.</p>
<p>Esta sección se muestra en diferentes niveles:</p>
<ul class="simple">
<li><p class="first">Nivel principal (nivel dios)</p>
</li>
<li><p class="first">Nivel de marca (filtrado para la marca emulada/registrada).</p>
</li>
<li><p class="first">Nivel de cliente (filtrado para el cliente emulado/registrado).</p>
</li>
</ul>
<p>Cada entrada muestra esta información:</p>
<blockquote>
<div><dl class="docutils">
<dt>Hora de inicio</dt>
<dd><p class="first last">Fecha y hora del establecimiento de la llamada.</p>
</dd>
<dt>Marca</dt>
<dd><p class="first last">Visible solo para <em>dios</em>, muestra la marca de cada llamada.</p>
</dd>
<dt>Cliente</dt>
<dd><p class="first last">Visible para <em>dios</em> y <em>operador de marca</em>, muestra el cliente de cada llamada.</p>
</dd>
<dt>Llamante</dt>
<dd><p class="first last">DDI presentado para la llamada saliente.</p>
</dd>
<dt>Llamado</dt>
<dd><p class="first last">Número externo marcado.</p>
</dd>
<dt>Duración</dt>
<dd><p class="first last">Muestra cuánto duró la llamada.</p>
</dd>
<dt>Precio</dt>
<dd><p class="first last">El monto de dinero para el cliente. Visible para <em>dios</em> y <em>operador de marca</em> y <em>administrador del cliente</em> si <em>Mostrar detalles de facturación al cliente</em> está habilitado.</p>
</dd>
<dt>Costo</dt>
<dd><p class="first last">Visible para <em>dios</em> y <em>operador de marca</em>, el monto de dinero para la marca (el dinero que el operador facturará por la llamada).</p>
</dd>
<dt>Plan de precio</dt>
<dd><p class="first last">Plan de precio utilizado para establecer el precio de la llamada. Visible para <em>dios</em> y <em>operador de marca</em> y <em>administrador del cliente</em> si <em>Mostrar detalles de facturación al cliente</em> está habilitado.</p>
</dd>
<dt>Destino</dt>
<dd><p class="first last">Destino que coincidió con la llamada para la facturación. Visible para <em>dios</em> y <em>operador de marca</em> y <em>administrador del cliente</em> si <em>Mostrar detalles de facturación al cliente</em> está habilitado.</p>
</dd>
<dt>Operador</dt>
<dd><p class="first last">Visible para <em>dios</em> y <em>operador de marca</em>, muestra qué <a class="reference internal" href="index.html#carriers"><span class="std std-ref">Operador</span></a> se utilizó para cada llamada saliente.</p>
</dd>
<dt>Proveedor DDI</dt>
<dd><p class="first last">Visible para <em>dios</em> y <em>operador de marca</em>, muestra qué <a class="reference internal" href="index.html#ddi-providers"><span class="std std-ref">Proveedor DDI</span></a> se utilizó para cada llamada entrante.</p>
</dd>
<dt>Factura</dt>
<dd><p class="first last">Visible para <em>dios</em> y <em>operador de marca</em>, muestra si una llamada ya está incluida en alguna <a class="reference internal" href="index.html#invoices"><span class="std std-ref">Factura</span></a>.</p>
</dd>
<dt>ID de llamada</dt>
<dd><p class="first last">Muestra el ID de la llamada para la resolución de problemas y exportación CSV.</p>
</dd>
<dt>Tipo de punto final</dt>
<dd><p class="first last">Valores posibles: RetailAccount, ResidentialDevice, User, Fax, Friend.</p>
</dd>
<dt>ID de punto final</dt>
<dd><p class="first last">ID interno del punto final específico (solo cuando <em>endpointType</em> no está vacío).</p>
</dd>
<dt>Nombre del punto final</dt>
<dd><p class="first last">Extensión de usuario, nombre de friend, nombre de fax, nombre de cuenta retail o nombre de dispositivo residencial (solo cuando <em>endpointId</em> no está vacío).</p>
</dd>
</dl>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Un proceso asincrónico analiza cada llamada externa y la agrega a esta lista unos minutos después de colgar la llamada. Los campos relacionados con la facturación, como el costo y el precio, estarán vacíos para las llamadas entrantes externas.</p>
</div>
<div class="section" id="call-rerating">
<h6>Reevaluación de llamadas<a class="headerlink" href="#call-rerating" title="Enlazar permanentemente con este título">¶</a></h6>
<p>En el <strong>nivel de marca</strong>, hay una operación adicional disponible para llamadas salientes: <strong>Reevaluar llamada</strong>. Esta opción permite llamar al motor de evaluación nuevamente para una llamada o un grupo de llamadas.</p>
<p>Notas sobre este proceso de reevaluación:</p>
<ul class="simple">
<li><p class="first">Si una llamada está en una factura, no se puede reevaluar. La factura debe ser eliminada primero.</p>
</li>
<li><p class="first">La llamada será reevaluada con la <em>Hora de inicio</em> de la llamada (no con los planes de precios activos actuales, sino con los planes de precios activos en el momento de la llamada).</p>
</li>
<li><p class="first">Tanto el <em>Precio</em> como el <em>Costo</em> serán recalculados. Esto puede implicar actualizar también el <em>plan de precio</em> y el <em>destino</em>.</p>
</li>
</ul>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Cuando una llamada es reevaluada, el costo y el precio se vacían hasta la siguiente iteración de la tarea asincrónica.</p>
</div>
</div>
</div>
<span id="document-administration_portal/client/vpbx/calls/call_csv_schedulers"></span><div class="section" id="call-csv-schedulers">
<h5>Programadores de CSV de llamadas<a class="headerlink" href="#call-csv-schedulers" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Esta sección permite programar informes CSV periódicos automáticos para los administradores de clientes vPBX.</p>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Esta sección es casi idéntica a <a class="reference internal" href="index.html#invoice-schedulers"><span class="std std-ref">Programadores de facturas</span></a> excepto por los campos que no se aplican a los CSV (secuencia de número de factura, tasa de impuesto...)</p>
</div>
<p>Al agregar una nueva definición, se muestran estos campos:</p>
<blockquote>
<div><dl class="docutils">
<dt>Nombre</dt>
<dd><p class="first last">Nombre del CSV de llamadas programado</p>
</dd>
<dt>Correo electrónico</dt>
<dd><p class="first last">Enviar CSV de llamadas generado por correo electrónico. Vacío si no se desea correo automático.</p>
</dd>
<dt>Frecuencia/Unidad</dt>
<dd><p class="first last">Define la frecuencia (una vez al mes, cada 7 días, etc.) de la tarea programada</p>
</dd>
<dt>Dirección</dt>
<dd><p class="first last">Define qué llamadas deben incluirse según su dirección (entrantes, salientes, ambas).</p>
</dd>
<dt>DDI</dt>
<dd><p class="first last">Permite seleccionar un DDI específico del cliente.</p>
</dd>
<dt>Tipo de punto final</dt>
<dd><p class="first last">Permite seleccionar un tipo específico de punto final entre: usuario, friend y fax.</p>
</dd>
<dt>Usuario</dt>
<dd><p class="first last">Solo para <em>Tipo de punto final: usuario</em>, permite seleccionar un usuario específico.</p>
</dd>
<dt>Fax</dt>
<dd><p class="first last">Solo para <em>Tipo de punto final: fax</em>, permite seleccionar un fax específico.</p>
</dd>
<dt>Friend</dt>
<dd><p class="first last">Solo para <em>Tipo de punto final: friend</em>, permite seleccionar un friend específico.</p>
</dd>
</dl>
</div></blockquote>
<p>Una vez creado, algunos campos y subsecciones nuevos son accesibles:</p>
<blockquote>
<div><dl class="docutils">
<dt>Próxima ejecución</dt>
<dd><p class="first last">Muestra la fecha de la próxima ejecución</p>
</dd>
<dt>Última ejecución</dt>
<dd><p class="first last">Muestra la última ejecución y su resultado.</p>
</dd>
</dl>
</div></blockquote>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Modificar el valor de <em>Próxima ejecución</em> permite forzar ejecuciones específicas. Por ejemplo, establecer <em>Próxima ejecución</em> al primer día del mes actual creará nuevamente el informe CSV del mes pasado (para un programador mensual).</p>
</div>
<p>Los CSV generados de cada programador se pueden acceder en la subsección <strong>Lista de informes CSV de llamadas</strong>.</p>
<div class="section" id="csv-fields">
<h6>Campos CSV<a class="headerlink" href="#csv-fields" title="Enlazar permanentemente con este título">¶</a></h6>
<p>Estos son los campos de los archivos CSV generados:</p>
<blockquote>
<div><dl class="docutils">
<dt>callid</dt>
<dd><p class="first last">Call-ID del diálogo SIP</p>
</dd>
<dt>startTime</dt>
<dd><p class="first last">Hora y fecha del establecimiento de la llamada</p>
</dd>
<dt>duración</dt>
<dd><p class="first last">Duración de la llamada en segundos</p>
</dd>
<dt>llamante</dt>
<dd><p class="first last">Número del llamante en formato E.164 (con &#8216;+&#8217;)</p>
</dd>
<dt>llamado</dt>
<dd><p class="first last">Número del llamado en formato E.164 (con &#8216;+&#8217;)</p>
</dd>
<dt>precio</dt>
<dd><p class="first last">Precio calculado para la llamada dada (vacío si <em>Mostrar detalles de facturación al cliente</em> está deshabilitado)</p>
</dd>
<dt>dirección</dt>
<dd><p class="first last">Valores posibles: entrante, saliente.</p>
</dd>
<dt>ddiId</dt>
<dd><p class="first last">DDI del cliente al que se asignará la llamada (llamado para llamadas entrantes, llamante para llamadas salientes).</p>
</dd>
<dt>tipo de punto final</dt>
<dd><p class="first last">Valores posibles: Usuario, Fax, Friend.</p>
</dd>
<dt>id de punto final</dt>
<dd><p class="first last">ID interno del punto final específico (solo cuando <em>tipo de punto final</em> tiene un valor no vacío).</p>
</dd>
<dt>nombre de punto final</dt>
<dd><p class="first last">Extensión de usuario, nombre de friend o nombre de fax</p>
</dd>
</dl>
</div></blockquote>
</div>
</div>
<span id="document-administration_portal/client/vpbx/calls/call_recordings"></span><div class="section" id="call-recordings">
<span id="id1"></span><h5>Grabaciones de llamadas<a class="headerlink" href="#call-recordings" title="Enlazar permanentemente con este título">¶</a></h5>
<div class="admonition attention">
<p class="first admonition-title">Atención</p>
<p class="last">Tenga en cuenta que la legislación local puede exigir anunciar que la llamada está siendo grabada (a veces a ambas partes). Debe incluir un aviso de grabación en sus locuciones de bienvenida para los DDIs con grabación automática habilitada.</p>
</div>
<p>IvozProvider admite dos formas diferentes de grabar llamadas:</p>
<ul class="simple">
<li><p class="first"><strong>Grabaciones automáticas</strong> para las llamadas entrantes/salientes que usan un <a class="reference internal" href="index.html#ddis"><span class="std std-ref">DDI externo</span></a>.</p>
</li>
<li><p class="first"><strong>Grabaciones bajo demanda</strong> solicitadas por un usuario durante una llamada.</p>
</li>
</ul>
<div class="section" id="automatic-ddi-recordings">
<h6>Grabaciones automáticas de DDI<a class="headerlink" href="#automatic-ddi-recordings" title="Enlazar permanentemente con este título">¶</a></h6>
<p>En este tipo de grabación, <strong>se grabará toda la conversación</strong>: desde el inicio hasta que termine.</p>
<p>Dos escenarios diferentes:</p>
<ul class="simple">
<li><p class="first"><strong>Llamadas entrantes a un DDI</strong>: La llamada continuará hasta que el marcador externo cuelgue (sin importar con quién esté hablando).</p>
</li>
<li><p class="first"><strong>Llamadas salientes usando un DDI</strong> como <a class="reference internal" href="index.html#ddis"><span class="std std-ref">DDI saliente</span></a>: la grabación continuará mientras el destino externo permanezca en la conversación.</p>
</li>
</ul>
<div class="admonition attention">
<p class="first admonition-title">Atención</p>
<p class="last">Tenga en cuenta que la llamada se grabará mientras la entidad externa esté presente, incluso si la llamada se transfiere entre varios usuarios de la plataforma.</p>
</div>
<p class="rubric">Grabar todas las llamadas de un DDI</p>
<p>Para habilitar esta función, edite el DDI y configure el campo en la sección de datos de grabación:</p>
<p>Hay 4 opciones disponibles:</p>
<ul class="simple">
<li><p class="first">Deshabilitar grabaciones</p>
</li>
<li><p class="first">Habilitar grabaciones entrantes</p>
</li>
<li><p class="first">Habilitar grabaciones salientes</p>
</li>
<li><p class="first">Habilitar todas las grabaciones de llamadas</p>
</li>
</ul>
</div>
<div class="section" id="on-demand-recordings">
<h6>Grabaciones bajo demanda<a class="headerlink" href="#on-demand-recordings" title="Enlazar permanentemente con este título">¶</a></h6>
<p>Las grabaciones <em>bajo demanda</em> deben ser habilitadas por el <em>administrador de la marca</em> para los clientes que lo soliciten. Esto se puede hacer en la pantalla de edición del cliente:</p>
<div class="admonition warning">
<p class="first admonition-title">Advertencia</p>
<p class="last">A diferencia de los <a class="reference internal" href="index.html#services"><span class="std std-ref">Servicios</span></a> mencionados en la sección anterior, la grabación bajo demanda se activa dentro de una conversación.</p>
</div>
<p>A diferencia de las automáticas, la grabación bajo demanda se puede detener utilizando el mismo proceso que las inició.</p>
<div class="section" id="activated-using-the-record-key">
<h7>Activado usando la tecla <em>Grabar</em><a class="headerlink" href="#activated-using-the-record-key" title="Enlazar permanentemente con este título">¶</a></h7>
<p>Algunos terminales (por ejemplo, <em>Yealink</em>) admiten el envío de un mensaje <a class="reference external" href="https://tools.ietf.org/html/rfc6086">SIP INFO</a> durante la conversación con un encabezado especial <em>Grabar</em> (ver <a class="reference external" href="http://www.yealink.com/Upload/document/UsingCallRecordingFeatureonYealinkPhones/UsingCallRecordingFeatureonYealinkSIPT2XPphonesRev_610-20561729764.pdf">referencia</a>). Esto no es un estándar para el protocolo, pero siendo Yealink uno de los fabricantes compatibles con la solución, incluimos este tipo de grabación bajo demanda.</p>
<div class="admonition important">
<p class="first admonition-title">Importante</p>
<p class="last">Para estas solicitudes de grabación, el código configurado no importa pero el cliente aún debe tener habilitadas las grabaciones bajo demanda.</p>
</div>
<p>Para iniciar o detener este tipo de grabaciones, simplemente presione la tecla Grabar en el terminal y el sistema manejará el mensaje enviado.</p>
</div>
<div class="section" id="activated-using-dtmf-codes">
<h7>Activado usando códigos <em>DTMF</em><a class="headerlink" href="#activated-using-dtmf-codes" title="Enlazar permanentemente con este título">¶</a></h7>
<p>El enfoque más tradicional para esta función es presionar una combinación de teclas durante la llamada. Se reproducirá una notificación y la grabación comenzará o se detendrá. Esta combinación se envía al sistema utilizando <a class="reference external" href="https://es.wikipedia.org/wiki/Marcaci%C3%B3n_por_tonos">tonos DTMF</a> utilizando el mismo flujo de audio que la conversación (como se menciona en <a class="reference external" href="https://tools.ietf.org/html/rfc4733">RFC 4733</a>).</p>
<p>IvozProvider admite este tipo de activación de grabación bajo demanda pero con una desventaja importante. Para capturar estos códigos, la pbx debe procesar cada paquete de audio para detectar el código, evitando el flujo directo de medios entre los puntos finales.</p>
<div class="admonition important">
<p class="first admonition-title">Importante</p>
<p class="last">Habilitar este modo de grabación afecta en gran medida el rendimiento de la plataforma. Úselo bajo su propio riesgo.</p>
</div>
</div>
</div>
<div class="section" id="recordings-list">
<h6>Lista de grabaciones<a class="headerlink" href="#recordings-list" title="Enlazar permanentemente con este título">¶</a></h6>
<p>El <em>administrador del cliente</em> puede acceder a todas las grabaciones en la sección <strong>Configuración del cliente</strong> &gt; <strong>Llamadas</strong> &gt; <strong>Grabaciones de llamadas</strong>:</p>
<blockquote>
<div><ul class="simple">
<li><p class="first">Las grabaciones se pueden escuchar desde la <em>web</em> o descargar en formato MP3.</p>
</li>
<li><p class="first">Si la grabación se ha iniciado bajo demanda, también incluirá al usuario que la solicitó.</p>
</li>
</ul>
</div></blockquote>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">El botón de eliminación de grabaciones se muestra solo si <strong>Permitir al cliente eliminar grabaciones</strong> está habilitado para el cliente en <em>Configuración del cliente</em>.</p>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<span id="document-administration_portal/client/residential/index"></span><div class="section" id="clientes-residenciales">
<span id="residential-clients"></span><span id="id1"></span><h3>Clientes Residenciales<a class="headerlink" href="#clientes-residenciales" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Los clientes residenciales son un tipo especial de cliente que solo proporciona un servicio de conectividad con los operadores a través de dispositivos residenciales.</p>
<div class="admonition attention">
<p class="first admonition-title">Atención</p>
<p class="last">Al contrario de los clientes de PBX Virtual, todos los clientes residenciales usan el dominio de la marca para identificar inequívocamente sus dispositivos. Necesitarás configurar el dominio de la marca para usar esta característica.</p>
</div>
<div class="admonition hint">
<p class="first admonition-title">Consejo</p>
<p class="last">Los clientes residenciales pueden habilitarse por marca a través de Funciones.</p>
</div>
<p>El objetivo de esta sección será describir cada una de las configuraciones asociadas con los clientes residenciales incluidos en IvozProvider:</p>
<div class="toctree-wrapper compound">
<span id="document-administration_portal/client/residential/residential_devices"></span><div class="section" id="residential-devices">
<span id="id1"></span><h4>Dispositivos residenciales<a class="headerlink" href="#residential-devices" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Los dispositivos residenciales son la opción principal enrutables en clientes residenciales. Más o menos como <a class="reference internal" href="index.html#friends"><span class="std std-ref">Friends</span></a> son para los clientes de PBX Virtual, los dispositivos contienen las opciones configurables necesarias para proporcionar un servicio de conectividad SIP con IvozProvider y una entidad SIP externa.</p>
<div class="admonition warning">
<p class="first admonition-title">Advertencia</p>
<p class="last">Aunque tanto <strong>Operadores/Proveedores de DDI</strong> como <strong>Dispositivos Residenciales</strong> son definidos por el <strong>operador de la marca</strong>, los primeros están diseñados para conectarse con la red telefónica pública conmutada, mientras que los segundos conectan el sistema con las entidades SIP de nuestros clientes.</p>
</div>
<div class="section" id="types-of-residential-devices">
<h5>Tipos de dispositivos residenciales<a class="headerlink" href="#types-of-residential-devices" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Hay 2 tipos principales de puntos finales SIP que pueden usar residencial con IvozProvider:</p>
<ul class="simple">
<li><p class="first"><strong>Punto final de conexión directa</strong>: IvozProvider debe poder hablar SIP directamente con este tipo de dispositivos simplemente reenviando el tráfico al puerto adecuado de la dirección IP pública de la PBX.</p>
</li>
<li><p class="first"><strong>Punto final detrás de NAT</strong>: No es directamente accesible. Este tipo de punto final debe registrarse en IvozProvider (al igual que todos los <a class="reference internal" href="index.html#terminals"><span class="std std-ref">Terminales</span></a>).</p>
</li>
</ul>
</div>
<div class="section" id="what-kind-of-calls-can-be-routed-through-a-residential-device">
<h5>¿Qué tipo de llamadas se pueden enrutar a través de un <em>Dispositivo Residencial</em>?<a class="headerlink" href="#what-kind-of-calls-can-be-routed-through-a-residential-device" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Contrariamente a los Amigos, <strong>Dispositivos Residenciales</strong> tienen algunas simplificaciones y limitaciones:</p>
<blockquote>
<div><ul class="simple">
<li><p class="first">Los Dispositivos Residenciales solo enrutan sus DDIs asignados</p>
</li>
<li><p class="first">Los Dispositivos Residenciales solo realizan llamadas externas a Operadores</p>
</li>
<li><p class="first">Los Dispositivos Residenciales solo reciben llamadas externas de Proveedores de DDI</p>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="residential-devices-configuration">
<h5>Configuración de Dispositivos Residenciales<a class="headerlink" href="#residential-devices-configuration" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Estas son las configuraciones configurables de <em>dispositivos residenciales</em>:</p>
<div class="section" id="basic-configuration">
<h6>Configuración básica<a class="headerlink" href="#basic-configuration" title="Enlazar permanentemente con este título">¶</a></h6>
<blockquote>
<div><dl class="docutils">
<dt>Nombre</dt>
<dd><p class="first last">Nombre del <strong>dispositivo residencial</strong>. Este nombre debe ser único en toda la marca, por lo que se recomienda usar algún tipo de identificador secuencial. Esto también se usará en mensajes SIP (enviados <strong>Desde Usuario</strong>).</p>
</dd>
<dt>Descripción</dt>
<dd><p class="first last">Opcional. Información adicional para este <em>dispositivo residencial</em>.</p>
</dd>
<dt>Contraseña</dt>
<dd><p class="first last">Cuando el <em>dispositivo residencial</em> envía solicitudes, IvozProvider lo autentificará usando esta contraseña. <strong>Usar contraseña ES OBLIGATORIO en modo &#8220;Registrar&#8221;</strong>. En modo &#8220;Directo&#8221;, dejarlo en blanco deshabilita la autenticación SIP y habilita la verificación de origen IP.</p>
</dd>
<dt>Conectividad directa</dt>
<dd><p class="first last">Si eliges &#8216;Sí&#8217; aquí, tendrás que completar el protocolo, la dirección y el puerto donde se puede contactar a este <em>dispositivo residencial</em>.</p>
</dd>
<dt>Contacto Múltiple</dt>
<dd><p class="first last">Las mismas credenciales SIP se pueden configurar en múltiples dispositivos SIP. En ese caso, todos los dispositivos suenan simultáneamente al recibir una llamada. Configurar este interruptor en &#8216;No&#8217; limita este comportamiento para que solo suene el último dispositivo SIP registrado.</p>
</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="geographic-configuration">
<h6>Configuración geográfica<a class="headerlink" href="#geographic-configuration" title="Enlazar permanentemente con este título">¶</a></h6>
<blockquote>
<div><dl class="docutils">
<dt>Idioma</dt>
<dd><p class="first last">Las locuciones se reproducirán en este idioma</p>
</dd>
<dt>Transformación numérica</dt>
<dd><p class="first last">Conjunto de transformación numérica que se aplicará al comunicarse con este dispositivo.</p>
</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="outgoing-configuration">
<h6>Configuración de salida<a class="headerlink" href="#outgoing-configuration" title="Enlazar permanentemente con este título">¶</a></h6>
<blockquote>
<div><dl class="docutils">
<dt>DDI de salida de respaldo</dt>
<dd><p class="first last">Las llamadas externas desde este <em>dispositivo residencial</em> se presentarán con este DDI, <strong>a menos que la fuente presentada coincida con un DDI perteneciente al cliente residencial</strong>.</p>
</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="advanced-configuration">
<h6>Configuración avanzada<a class="headerlink" href="#advanced-configuration" title="Enlazar permanentemente con este título">¶</a></h6>
<blockquote>
<div><dl class="docutils">
<dt>Codec permitido</dt>
<dd><p class="first last">Al igual que los terminales vPBX, <em>dispositivos residenciales</em> solo hablarán el codec seleccionado.</p>
</dd>
<dt>Desde dominio</dt>
<dd><p class="first last">La solicitud de IvozProvider a este dispositivo incluirá este dominio en el encabezado From.</p>
</dd>
<dt>DDI Entrante</dt>
<dd><p class="first last">Si se establece en &#8216;Sí&#8217;, establece el destino (R-URI y To) al DDI llamado al llamar a este punto final. Si se establece en &#8216;No&#8217;, se usará el nombre de usuario utilizado en el encabezado de Contacto del registro, como se especifica en el RFC SIP (se usará el nombre del dispositivo residencial para puntos finales con conectividad directa). Por defecto es &#8216;No&#8217;.</p>
</dd>
<dt>Habilitar paso a través de T.38</dt>
<dd><p class="first last">Si se establece en &#8216;sí&#8217;, este punto final SIP debe ser un <strong>emisor/receptor de fax compatible con T.38</strong>. IvozProvider actuará como una puerta de enlace T.38, conectando llamadas de fax de un operador compatible con T.38 y un dispositivo compatible con T.38.</p>
</dd>
<dt>Llamada en espera</dt>
<dd><p class="first last">Limita las llamadas recibidas cuando ya se está manejando este número de llamadas. Establecer 0 para ilimitado.</p>
</dd>
<dt>Encriptación RTP</dt>
<dd><p class="first last">Si se establece en &#8216;sí&#8217;, la llamada no se establecerá a menos que sea posible encriptar su audio. Si se establece en &#8216;no&#8217;, el audio no se encriptará.</p>
</dd>
</dl>
</div></blockquote>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">El dispositivo residencial puede ser contactado debido a llamadas a varios DDIs. La configuración de <em>DDI Entrante</em> permite al punto final SIP remoto saber qué número causó cada llamada, estableciendo ese número como destino (encabezados R-URI y To). De esta manera, el dispositivo residencial puede manejar las llamadas de manera diferente.</p>
</div>
</div>
</div>
<div class="section" id="voicemail-settings">
<h5>Configuraciones de buzón de voz<a class="headerlink" href="#voicemail-settings" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Cada dispositivo residencial tiene un buzón de voz al que se puede acceder usando el código de servicio de buzón de voz definido a nivel de marca.</p>
<p>Además, los buzones de voz se pueden configurar para enviar sus mensajes a una dirección de correo electrónico en <a class="reference internal" href="index.html#residential-voicemails"><span class="std std-ref">Buzones de Voz Residenciales</span></a>.</p>
</div>
<div class="section" id="call-forwarding-settings">
<span id="residential-devices-cfw"></span><h5>Configuraciones de desvío de llamadas<a class="headerlink" href="#call-forwarding-settings" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Aparte del desvío incondicional de llamadas a un número externo a través de <a class="reference internal" href="index.html#external-call-filters"><span class="std std-ref">Filtros de llamadas externas</span></a> aplicados a DDI, los dispositivos residenciales pueden tener configuraciones adicionales de desvío de llamadas que permiten:</p>
<ul class="simple">
<li><p class="first">Desvío a otro número externo.</p>
</li>
<li><p class="first">Desvío al buzón de voz asociado a cada dispositivo residencial.</p>
</li>
<li><p class="first">Tipos de desvío soportados: incondicional, sin respuesta, no registrado, ocupado.</p>
</li>
</ul>
<div class="admonition warning">
<p class="first admonition-title">Advertencia</p>
<p class="last"><a class="reference internal" href="index.html#external-call-filters"><span class="std std-ref">Filtros de llamadas externas</span></a> tienen precedencia sobre las configuraciones de desvío de llamadas de los dispositivos residenciales.</p>
</div>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">El desvío a números nacionales se puede configurar usando códigos de servicios (más información <a class="reference internal" href="index.html#call-forward-services"><span class="std std-ref">aquí</span></a>).</p>
</div>
</div>
<div class="section" id="asterisk-as-a-residential-device">
<h5>Asterisk como dispositivo residencial<a class="headerlink" href="#asterisk-as-a-residential-device" title="Enlazar permanentemente con este título">¶</a></h5>
<p>En el otro extremo de un dispositivo puede haber cualquier tipo de entidad SIP. Esta sección toma como ejemplo un sistema PBX Asterisk usando el controlador de canal SIP que quiere conectarse a IvozProvider.</p>
<div class="section" id="device-register">
<h6>Registro de dispositivo<a class="headerlink" href="#device-register" title="Enlazar permanentemente con este título">¶</a></h6>
<p>Si el sistema no puede ser accedido directamente, Asterisk tendrá que registrarse en la plataforma (como lo haría un terminal).</p>
<p>La configuración será algo así:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>register =&gt; residentialDeviceName:residentialDevicePassword@ivozprovider-brand.sip-domain.com
</pre></div>
</div>
</div>
<div class="section" id="device-peer">
<h6>Peer del dispositivo<a class="headerlink" href="#device-peer" title="Enlazar permanentemente con este título">¶</a></h6>
<div class="highlight-none"><div class="highlight"><pre><span></span>[residentialDeviceName]
type=peer
host=ivozprovider-brand.sip-domain.com
context=XXXXXX
disallow=all
allow=alaw
defaultuser=residentialDeviceName
secret=residentialDevicePassword
fromuser=residentialDeviceName
fromdomain=ivozprovider-brand.sip-domain.com
insecure=port,invite
sendrpid=pai
directmedia=no
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Advertencia</p>
<p class="last"><em>Los dispositivos residenciales</em> NO DEBEN desafiar a IvozProvider. Por eso se usa la configuración <em>insegura</em> aquí.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Dado que el nombre de usuario From se usa para identificar el dispositivo residencial, se debe usar P-Asserted-Identity (o P-Preferred-Identity o Remote-Party-Id) para especificar el número de llamada. La prevalencia entre estos encabezados de origen es: PAI &gt; PPI &gt; RPID.</p>
</div>
</div>
</div>
</div>
<span id="document-administration_portal/client/residential/residential_voicemails"></span><div class="section" id="residential-voicemails">
<span id="id1"></span><h4>Buzones de Voz Residenciales<a class="headerlink" href="#residential-voicemails" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Los campos más notables del buzón de voz son:</p>
<blockquote>
<div><dl class="docutils">
<dt>Habilitado</dt>
<dd><p class="first last">Habilita o deshabilita el buzón de voz.</p>
</dd>
<dt>Nombre</dt>
<dd><p class="first last">Nombre del dispositivo residencial propietario de este buzón de voz.</p>
</dd>
<dt>Locución</dt>
<dd><p class="first last">Si se establece, esta locución se reproduce como mensaje de bienvenida del buzón de voz cuando se va a grabar un mensaje de voz para este buzón. Esto solo se aplica para desvíos de llamadas al buzón de voz.</p>
</dd>
<dt>Dirección de correo electrónico</dt>
<dd><p class="first last">Enviar un correo electrónico a la dirección de usuario configurada cuando se reciba un nuevo mensaje de voz.</p>
</dd>
<dt>Adjuntar sonidos:</dt>
<dd><p class="first last">Adjuntar el mensaje de audio al correo electrónico enviado.</p>
</dd>
</dl>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Si no se asigna una locución al buzón de voz, se utilizará la locución predeterminada siempre que el propietario no haya grabado un mensaje personalizado a través del menú del buzón de voz (llamando al código de servicio del buzón de voz).</p>
</div>
</div>
<span id="document-administration_portal/client/residential/faxes"></span><div class="section" id="faxes">
<h4>Faxes<a class="headerlink" href="#faxes" title="Enlazar permanentemente con este título">¶</a></h4>
<p>IvozProvider incluye una solución de <em>fax virtual</em> simple pero eficiente que permite:</p>
<ul class="simple">
<li><p class="first">Enviar archivos PDF por fax.</p>
</li>
<li><p class="first">Recibir faxes por correo electrónico o revisarlos a través del portal web.</p>
</li>
</ul>
<div class="admonition error">
<p class="first admonition-title">Error</p>
<p class="last">IvozProvider usa <a class="reference external" href="http://www.voip-info.org/wiki/view/T.38">T.38</a> tanto para enviar como para recibir faxes. El operador de la marca debe usar <em>contratos de interconexión</em> que lo soporten.</p>
</div>
<div class="section" id="creating-a-virtual-fax">
<h5>Crear un fax virtual<a class="headerlink" href="#creating-a-virtual-fax" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Estos son los campos que aparecen cuando creamos un nuevo fax:</p>
<blockquote>
<div><dl class="docutils">
<dt>Nombre</dt>
<dd><p class="first last">Usado por la sección restante para referenciar un fax</p>
</dd>
<dt>Correo electrónico</dt>
<dd><p class="first last">Dirección de correo electrónico cuando queremos recibir faxes entrantes (si marcamos &#8216;Enviar por correo electrónico&#8217;)</p>
</dd>
<dt>DDI saliente</dt>
<dd><p class="first last">DDI usado como número de origen para faxes salientes</p>
</dd>
</dl>
</div></blockquote>
<p>Para recibir faxes en este DDI, necesitamos apuntarlo a nuestro nuevo fax en la sección <strong>DDIs</strong>.</p>
<p>El operador de la marca puede elegir una o más <a class="reference internal" href="index.html#outgoing-routings"><span class="std std-ref">Enrutamientos Salientes</span></a> para enviar faxes.</p>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Las lógicas de <em>balanceo de carga</em> y <em>conmutación por error</em> descritas en <a class="reference internal" href="index.html#outgoing-routings"><span class="std std-ref">Enrutamientos Salientes</span></a> también se aplican a los faxes.</p>
</div>
<div class="admonition important">
<p class="first admonition-title">Importante</p>
<p class="last">Si no se define una ruta específica para faxes, los faxes se enrutarán usando las rutas de llamadas estándar.</p>
</div>
</div>
<div class="section" id="sending-a-fax">
<h5>Enviar un fax<a class="headerlink" href="#sending-a-fax" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Enviar un fax es una tarea fácil que se realiza a través de la subsección <strong>Lista de archivos de fax salientes</strong>.</p>
<p>Primero, subimos el archivo PDF y establecemos el destino. Cuando guardamos la entrada, la lista muestra el fax y su estado.</p>
</div>
<div class="section" id="incoming-faxes-display">
<h5>Visualización de faxes entrantes<a class="headerlink" href="#incoming-faxes-display" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Aparte de ser recibidos por correo, los faxes también se pueden ver y descargar dentro del portal web en la subsección <strong>Lista de archivos de fax entrantes</strong>.</p>
</div>
</div>
<span id="document-administration_portal/client/residential/ddis"></span><div class="section" id="ddis">
<span id="residential-ddis"></span><h4>DDIs<a class="headerlink" href="#ddis" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Los DDIs son el punto de entrada externo desde los proveedores de DDI a los clientes residenciales que pueden ser enrutados a través de dispositivos residenciales.</p>
<p>Podemos asignar <a class="reference internal" href="index.html#external-call-filters"><span class="std std-ref">Filtros de llamadas externas</span></a>. A diferencia de los filtros de llamadas externas de vPBX, los filtros de DDIs residenciales solo permiten la redirección estática a otro número externo.</p>
<div class="section" id="residential-ddi-routes">
<h5>Rutas de DDI residenciales<a class="headerlink" href="#residential-ddi-routes" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Los DDIs residenciales solo pueden ser enrutados a <a class="reference internal" href="index.html#residential-devices"><span class="std std-ref">Dispositivos residenciales</span></a> o <a class="reference internal" href="index.html#faxing-system"><span class="std std-ref">Fax virtual</span></a>.</p>
<div class="admonition hint">
<p class="first admonition-title">Consejo</p>
<p class="last">Enrutar un DDI a través de un dispositivo residencial permitirá realizar llamadas externas desde ese dispositivo presentando ese DDI como origen.</p>
</div>
</div>
<div class="section" id="residential-recordings">
<h5>Grabaciones residenciales<a class="headerlink" href="#residential-recordings" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Si el cliente residencial tiene habilitada la función de <em>Grabaciones</em>, los DDIs también pueden grabar llamadas entrantes y/o salientes.</p>
</div>
</div>
<span id="document-administration_portal/client/residential/rating_profiles"></span><div class="section" id="rating-profiles">
<h4>Perfiles de calificación<a class="headerlink" href="#rating-profiles" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Esta sección permite al cliente:</p>
<ul class="simple">
<li><p class="first">Ver la lista de planes de calificación y su tiempo de activación.</p>
</li>
<li><p class="first">Verificar las etiquetas de enrutamiento disponibles (solo para clientes Retail y Wholesale) para alcanzar diferentes destinos.</p>
</li>
<li><p class="first">Simular una llamada y estimar el costo de una llamada dada.</p>
</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Esta sección solo se muestra a los clientes con <em>Mostrar detalles de facturación al cliente</em> configurado en Sí.</p>
</div>
</div>
<span id="document-administration_portal/client/residential/external_call_filters"></span><div class="section" id="external-call-filters">
<span id="residential-filters"></span><h4>Filtros de llamadas externas<a class="headerlink" href="#external-call-filters" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Los filtros externos residenciales se pueden asignar a DDIs para reenviar temporalmente las llamadas a un número externo o para evitar llamadas de fuentes indeseables.</p>
<div class="section" id="filters-configuration">
<h5>Configuración de filtros<a class="headerlink" href="#filters-configuration" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Estos son los ajustes configurables de los <em>filtros externos residenciales</em>:</p>
<blockquote>
<div><dl class="docutils">
<dt>Nombre</dt>
<dd><p class="first last">Nombre del filtro.</p>
</dd>
<dt>Lista negra</dt>
<dd><p class="first last">El origen externo se verificará contra las <a class="reference internal" href="index.html#match-lists"><span class="std std-ref">Listas de coincidencia</span></a> asociadas, si se encuentra una coincidencia, la llamada será rechazada inmediatamente.</p>
</dd>
<dt>Reenvío de llamadas incondicional</dt>
<dd><p class="first last">Las llamadas a DDIs que usen este filtro se reenviarán al número externo indicado.</p>
</dd>
</dl>
</div></blockquote>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">La lista negra tiene prioridad sobre el reenvío de llamadas incondicional. Las llamadas de números que coincidan con la lista de coincidencias asociada no serán reenviadas, serán rechazadas.</p>
</div>
<div class="admonition attention">
<p class="first admonition-title">Atención</p>
<p class="last">Las llamadas reenviadas por un filtro mantendrán la identificación del llamante original, añadiendo la información de reenvío en un encabezado SIP <em>Diversion</em>.</p>
</div>
</div>
</div>
<span id="document-administration_portal/client/residential/calls/index"></span><div class="section" id="calls">
<h4>Llamadas<a class="headerlink" href="#calls" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Estas son las secciones de la lista de llamadas para clientes residenciales:</p>
<div class="toctree-wrapper compound">
<span id="document-administration_portal/client/residential/calls/active_calls"></span><div class="section" id="active-calls">
<h5>Llamadas activas<a class="headerlink" href="#active-calls" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Esta sección permite al administrador del cliente ver <strong>llamadas activas actuales</strong>.</p>
<div class="admonition warning">
<p class="first admonition-title">Advertencia</p>
<p class="last"><strong>Se mostrarán las llamadas que involucren a cualquier usuario, friend, cuenta retail, dispositivo residencial o cliente wholesale</strong>, sin importar si son internas o externas.</p>
</div>
<p>Estas son las columnas mostradas:</p>
<blockquote>
<div><dl class="docutils">
<dt>Duración</dt>
<dd><p class="first last">Muestra la duración del establecimiento de la llamada durante el establecimiento y la duración de la llamada durante la llamada en curso. También muestra la dirección (entrante/saliente) y la información del estado de la llamada, como se explica <a class="reference internal" href="index.html#call-state"><span class="std std-ref">aquí</span></a>.</p>
</dd>
<dt>Propietario</dt>
<dd><p class="first last">Usuario, friend, cuenta retail, dispositivo residencial o cliente wholesale involucrado en la llamada dada.</p>
</dd>
<dt>Parte</dt>
<dd><p class="first last">Participante restante de la llamada dada. Se actualiza para mostrar la parte actual (en transferencias y llamadas desviadas).</p>
</dd>
</dl>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Habrá una entrada por entidad involucrada. Esto significa que una llamada interna estándar se mostrará en dos filas diferentes: una llamada saliente para el usuario que llama y una llamada entrante para el usuario llamado.</p>
</div>
</div>
<span id="document-administration_portal/client/residential/calls/external_calls"></span><div class="section" id="external-calls">
<h5>Llamadas externas<a class="headerlink" href="#external-calls" title="Enlazar permanentemente con este título">¶</a></h5>
<p>La sección de <strong>Llamadas externas</strong> lista <strong>tanto las llamadas externas entrantes como salientes</strong>.</p>
<p>Esta sección se muestra en diferentes niveles:</p>
<ul class="simple">
<li><p class="first">Nivel principal (nivel dios)</p>
</li>
<li><p class="first">Nivel de marca (filtrado para la marca emulada/registrada).</p>
</li>
<li><p class="first">Nivel de cliente (filtrado para el cliente emulado/registrado).</p>
</li>
</ul>
<p>Cada entrada muestra esta información:</p>
<blockquote>
<div><dl class="docutils">
<dt>Hora de inicio</dt>
<dd><p class="first last">Fecha y hora del establecimiento de la llamada.</p>
</dd>
<dt>Marca</dt>
<dd><p class="first last">Visible solo para <em>dios</em>, muestra la marca de cada llamada.</p>
</dd>
<dt>Cliente</dt>
<dd><p class="first last">Visible para <em>dios</em> y <em>operador de marca</em>, muestra el cliente de cada llamada.</p>
</dd>
<dt>Llamante</dt>
<dd><p class="first last">DDI presentado para la llamada saliente.</p>
</dd>
<dt>Llamado</dt>
<dd><p class="first last">Número externo marcado.</p>
</dd>
<dt>Duración</dt>
<dd><p class="first last">Muestra cuánto duró la llamada.</p>
</dd>
<dt>Precio</dt>
<dd><p class="first last">El monto de dinero para el cliente. Visible para <em>dios</em> y <em>operador de marca</em> y <em>administrador del cliente</em> si <em>Mostrar detalles de facturación al cliente</em> está habilitado.</p>
</dd>
<dt>Costo</dt>
<dd><p class="first last">Visible para <em>dios</em> y <em>operador de marca</em>, el monto de dinero para la marca (el dinero que el operador facturará por la llamada).</p>
</dd>
<dt>Plan de tarifas</dt>
<dd><p class="first last">Plan de tarifas utilizado para establecer el precio de la llamada. Visible para <em>dios</em> y <em>operador de marca</em> y <em>administrador del cliente</em> si <em>Mostrar detalles de facturación al cliente</em> está habilitado.</p>
</dd>
<dt>Destino</dt>
<dd><p class="first last">Destino que coincidió con la llamada para la facturación. Visible para <em>dios</em> y <em>operador de marca</em> y <em>administrador del cliente</em> si <em>Mostrar detalles de facturación al cliente</em> está habilitado.</p>
</dd>
<dt>Operador</dt>
<dd><p class="first last">Visible para <em>dios</em> y <em>operador de marca</em>, muestra qué <a class="reference internal" href="index.html#carriers"><span class="std std-ref">Operador</span></a> se utilizó para cada llamada saliente.</p>
</dd>
<dt>Proveedor de DDI</dt>
<dd><p class="first last">Visible para <em>dios</em> y <em>operador de marca</em>, muestra qué <a class="reference internal" href="index.html#ddi-providers"><span class="std std-ref">Proveedor de DDI</span></a> se utilizó para cada llamada entrante.</p>
</dd>
<dt>Factura</dt>
<dd><p class="first last">Visible para <em>dios</em> y <em>operador de marca</em>, muestra si una llamada ya está incluida en alguna <a class="reference internal" href="index.html#invoices"><span class="std std-ref">Factura</span></a>.</p>
</dd>
<dt>ID de llamada</dt>
<dd><p class="first last">Muestra el ID de la llamada para la resolución de problemas y exportación CSV.</p>
</dd>
<dt>Tipo de punto final</dt>
<dd><p class="first last">Valores posibles: CuentaRetail, DispositivoResidencial, Usuario, Fax, Friend.</p>
</dd>
<dt>ID de punto final</dt>
<dd><p class="first last">ID interno del punto final específico (solo cuando <em>tipo de punto final</em> no está vacío).</p>
</dd>
<dt>Nombre del punto final</dt>
<dd><p class="first last">Extensión de usuario, nombre de friend, nombre de fax, nombre de cuenta retail o nombre de dispositivo residencial (solo cuando <em>ID de punto final</em> no está vacío).</p>
</dd>
</dl>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Un proceso asincrónico analiza cada llamada externa y la agrega a esta lista unos minutos después de colgar la llamada. Los campos relacionados con la facturación, como el costo y el precio, estarán vacíos para las llamadas entrantes externas.</p>
</div>
<div class="section" id="call-rerating">
<h6>Reevaluación de llamadas<a class="headerlink" href="#call-rerating" title="Enlazar permanentemente con este título">¶</a></h6>
<p>En el <strong>nivel de marca</strong>, hay una operación adicional disponible para llamadas salientes: <strong>Reevaluar llamada</strong>. Esta opción permite llamar al motor de tarifas nuevamente para una llamada o un grupo de llamadas.</p>
<p>Notas sobre este proceso de reevaluación:</p>
<ul class="simple">
<li><p class="first">Si una llamada está en una factura, no se puede reevaluar. La factura debe eliminarse primero.</p>
</li>
<li><p class="first">La llamada se reevaluará con la <em>Hora de inicio</em> de la llamada (no con los planes de tarifas activos actuales, sino con los planes de tarifas activos en el momento de la llamada).</p>
</li>
<li><p class="first">Tanto el <em>Precio</em> como el <em>Costo</em> se recalcularán. Esto puede implicar actualizar también el <em>plan de tarifas</em> y el <em>destino</em>.</p>
</li>
</ul>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Cuando una llamada se reevaluá, el costo y el precio se vacían hasta la próxima iteración de la tarea asincrónica.</p>
</div>
</div>
</div>
<span id="document-administration_portal/client/residential/calls/call_csv_schedulers"></span><div class="section" id="call-csv-schedulers">
<h5>Programadores de CSV de llamadas<a class="headerlink" href="#call-csv-schedulers" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Esta sección permite programar informes CSV periódicos automáticos para los administradores de clientes residenciales.</p>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Esta sección es casi idéntica a <a class="reference internal" href="index.html#invoice-schedulers"><span class="std std-ref">Programadores de facturas</span></a> excepto por los campos que no se aplican a los CSV (secuencia de número de factura, tasa de impuestos...)</p>
</div>
<p>Al agregar una nueva definición, se muestran estos campos:</p>
<blockquote>
<div><dl class="docutils">
<dt>Nombre</dt>
<dd><p class="first last">Nombre del CSV de llamadas programado</p>
</dd>
<dt>Correo electrónico</dt>
<dd><p class="first last">Enviar el CSV de llamadas generado por correo electrónico. Vacío si no se desea correo automático.</p>
</dd>
<dt>Frecuencia/Unidad</dt>
<dd><p class="first last">Define la frecuencia (una vez al mes, cada 7 días, etc.) de la tarea programada</p>
</dd>
<dt>Dirección</dt>
<dd><p class="first last">Define qué llamadas deben incluirse según su dirección (entrantes, salientes, ambas).</p>
</dd>
<dt>DDI</dt>
<dd><p class="first last">Permite seleccionar un DDI específico del cliente.</p>
</dd>
<dt>Tipo de punto final</dt>
<dd><p class="first last">Permite seleccionar un tipo de punto final específico entre: dispositivo residencial y fax.</p>
</dd>
<dt>Dispositivo residencial</dt>
<dd><p class="first last">Solo para <em>Tipo de punto final: residencial</em>, permite seleccionar un dispositivo residencial específico.</p>
</dd>
<dt>Fax</dt>
<dd><p class="first last">Solo para <em>Tipo de punto final: fax</em>, permite seleccionar un fax específico.</p>
</dd>
</dl>
</div></blockquote>
<p>Una vez creado, se accede a algunos campos y subsecciones nuevos:</p>
<blockquote>
<div><dl class="docutils">
<dt>Próxima ejecución</dt>
<dd><p class="first last">Muestra la fecha de la próxima ejecución</p>
</dd>
<dt>Última ejecución</dt>
<dd><p class="first last">Muestra la última ejecución y su resultado.</p>
</dd>
</dl>
</div></blockquote>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Modificar el valor de <em>Próxima ejecución</em> permite forzar ejecuciones específicas. Por ejemplo, establecer <em>Próxima ejecución</em> en el primer día del mes actual creará nuevamente el informe CSV del mes pasado (para un programador mensual).</p>
</div>
<p>Se puede acceder a los CSV generados de cada programador en la subsección <strong>Lista de informes CSV de llamadas</strong>.</p>
<div class="section" id="csv-fields">
<h6>Campos CSV<a class="headerlink" href="#csv-fields" title="Enlazar permanentemente con este título">¶</a></h6>
<p>Estos son los campos de los archivos CSV generados:</p>
<blockquote>
<div><dl class="docutils">
<dt>callid</dt>
<dd><p class="first last">Call-ID del diálogo SIP</p>
</dd>
<dt>startTime</dt>
<dd><p class="first last">Hora y fecha del establecimiento de la llamada</p>
</dd>
<dt>duración</dt>
<dd><p class="first last">Duración de la llamada en segundos</p>
</dd>
<dt>llamante</dt>
<dd><p class="first last">Número del llamante en formato E.164 (con &#8216;+&#8217;)</p>
</dd>
<dt>llamado</dt>
<dd><p class="first last">Número del llamado en formato E.164 (con &#8216;+&#8217;)</p>
</dd>
<dt>precio</dt>
<dd><p class="first last">Precio calculado para la llamada dada (vacío si <em>Mostrar detalles de facturación al cliente</em> está deshabilitado)</p>
</dd>
<dt>dirección</dt>
<dd><p class="first last">Valores posibles: entrante, saliente.</p>
</dd>
<dt>ddiId</dt>
<dd><p class="first last">DDI del cliente al que se asignará la llamada (llamado para llamadas entrantes, llamante para llamadas salientes).</p>
</dd>
<dt>tipo de punto final</dt>
<dd><p class="first last">Valores posibles: DispositivoResidencial, Fax.</p>
</dd>
<dt>ID de punto final</dt>
<dd><p class="first last">ID interno del dispositivo residencial específico</p>
</dd>
<dt>Nombre del punto final</dt>
<dd><p class="first last">Nombre del dispositivo residencial o nombre del fax</p>
</dd>
</dl>
</div></blockquote>
</div>
</div>
<span id="document-administration_portal/client/residential/calls/call_recordings"></span><div class="section" id="call-recordings">
<h5>Grabaciones de llamadas<a class="headerlink" href="#call-recordings" title="Enlazar permanentemente con este título">¶</a></h5>
<div class="admonition attention">
<p class="first admonition-title">Atención</p>
<p class="last">Tenga en cuenta que la legislación local puede exigir anunciar que la llamada está siendo grabada (a veces a ambas partes). Debe incluir un aviso de grabación en sus locuciones de bienvenida para los DDIs con grabación automática habilitada.</p>
</div>
<p>IvozProvider admite dos formas diferentes de grabar llamadas:</p>
<ul class="simple">
<li><p class="first"><strong>Grabaciones automáticas</strong> para las llamadas entrantes/salientes que utilizan un <a class="reference internal" href="index.html#ddis"><span class="std std-ref">DDI externo</span></a>.</p>
</li>
<li><p class="first"><strong>Grabaciones bajo demanda</strong> solicitadas por un usuario durante una llamada.</p>
</li>
</ul>
<div class="section" id="automatic-ddi-recordings">
<h6>Grabaciones automáticas de DDI<a class="headerlink" href="#automatic-ddi-recordings" title="Enlazar permanentemente con este título">¶</a></h6>
<p>En este tipo de grabación, <strong>se grabará toda la conversación</strong>: desde el inicio hasta que termine.</p>
<p>Dos escenarios diferentes:</p>
<ul class="simple">
<li><p class="first"><strong>Llamadas entrantes a un DDI</strong>: La llamada continuará hasta que el marcador externo cuelgue (sin importar con quién esté hablando).</p>
</li>
<li><p class="first"><strong>Llamadas salientes utilizando un DDI</strong> como <a class="reference internal" href="index.html#ddis"><span class="std std-ref">DDI saliente</span></a>: la grabación continuará mientras el destino externo permanezca en la conversación.</p>
</li>
</ul>
<div class="admonition attention">
<p class="first admonition-title">Atención</p>
<p class="last">Tenga en cuenta que la llamada se grabará mientras la entidad externa esté presente, incluso si la llamada se transfiere entre varios usuarios de la plataforma.</p>
</div>
<p class="rubric">Grabar todas las llamadas de un DDI</p>
<p>Para habilitar esta función, edite el DDI y configure el campo en la sección de datos de grabación:</p>
<p>Hay 4 opciones disponibles:</p>
<ul class="simple">
<li><p class="first">Deshabilitar grabaciones</p>
</li>
<li><p class="first">Habilitar grabaciones entrantes</p>
</li>
<li><p class="first">Habilitar grabaciones salientes</p>
</li>
<li><p class="first">Habilitar todas las grabaciones de llamadas</p>
</li>
</ul>
</div>
<div class="section" id="on-demand-recordings">
<h6>Grabaciones bajo demanda<a class="headerlink" href="#on-demand-recordings" title="Enlazar permanentemente con este título">¶</a></h6>
<p>Las grabaciones <em>bajo demanda</em> deben ser habilitadas por el <em>administrador de la marca</em> para los clientes que lo soliciten. Esto se puede hacer en la pantalla de edición del cliente:</p>
<div class="admonition warning">
<p class="first admonition-title">Advertencia</p>
<p class="last">A diferencia de los <a class="reference internal" href="index.html#services"><span class="std std-ref">Servicios</span></a> mencionados en la sección anterior, la grabación bajo demanda se activa dentro de una conversación.</p>
</div>
<p>A diferencia de las automáticas, la grabación bajo demanda se puede detener utilizando el mismo proceso que las inició.</p>
<div class="section" id="activated-using-the-record-key">
<h7>Activado usando la tecla <em>Grabar</em><a class="headerlink" href="#activated-using-the-record-key" title="Enlazar permanentemente con este título">¶</a></h7>
<p>Algunos terminales (por ejemplo, <em>Yealink</em>) admiten el envío de un mensaje <a class="reference external" href="https://tools.ietf.org/html/rfc6086">SIP INFO</a> durante la conversación con un encabezado especial <em>Grabar</em> (ver <a class="reference external" href="http://www.yealink.com/Upload/document/UsingCallRecordingFeatureonYealinkPhones/UsingCallRecordingFeatureonYealinkSIPT2XPphonesRev_610-20561729764.pdf">referencia</a>). Esto no es un estándar para el protocolo, pero siendo Yealink uno de los fabricantes compatibles con la solución, incluimos este tipo de grabación bajo demanda.</p>
<div class="admonition important">
<p class="first admonition-title">Importante</p>
<p class="last">Para estas solicitudes de grabación, el código configurado no importa, pero el cliente aún debe tener habilitadas las grabaciones bajo demanda.</p>
</div>
<p>Para iniciar o detener este tipo de grabaciones, simplemente presione la tecla Grabar en el terminal y el sistema manejará el mensaje enviado.</p>
</div>
<div class="section" id="activated-using-dtmf-codes">
<h7>Activado usando códigos <em>DTMF</em><a class="headerlink" href="#activated-using-dtmf-codes" title="Enlazar permanentemente con este título">¶</a></h7>
<p>El enfoque más tradicional para esta función es presionar una combinación de teclas durante la llamada. Se reproducirá una notificación y la grabación comenzará o se detendrá. Esta combinación se envía al sistema utilizando <a class="reference external" href="https://es.wikipedia.org/wiki/Marcaci%C3%B3n_por_tonos">tonos DTMF</a> utilizando el mismo flujo de audio que la conversación (como se menciona en <a class="reference external" href="https://tools.ietf.org/html/rfc4733">RFC 4733</a>).</p>
<p>IvozProvider admite este tipo de activación de grabación bajo demanda, pero con una desventaja importante. Para capturar estos códigos, la pbx debe procesar cada paquete de audio para detectar el código, evitando el flujo directo de medios entre los puntos finales finales.</p>
<div class="admonition important">
<p class="first admonition-title">Importante</p>
<p class="last">Habilitar este modo de grabación afecta en gran medida el rendimiento de la plataforma. Úselo bajo su propio riesgo.</p>
</div>
</div>
</div>
<div class="section" id="recordings-list">
<h6>Lista de grabaciones<a class="headerlink" href="#recordings-list" title="Enlazar permanentemente con este título">¶</a></h6>
<p>El <em>administrador del cliente</em> puede acceder a todas las grabaciones en la sección <strong>Configuración del cliente</strong> &gt; <strong>Llamadas</strong> &gt; <strong>Grabaciones de llamadas</strong>:</p>
<blockquote>
<div><ul class="simple">
<li><p class="first">Las grabaciones se pueden escuchar desde la <em>web</em> o descargar en formato MP3.</p>
</li>
<li><p class="first">Si la grabación se ha iniciado bajo demanda, también incluirá al usuario que la solicitó.</p>
</li>
</ul>
</div></blockquote>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">El botón de eliminación de grabaciones se muestra solo si <strong>Permitir al cliente eliminar grabaciones</strong> está habilitado para el cliente en <em>Configuración del cliente</em>.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Consulta <a class="reference internal" href="index.html#differences-between-retail-and-residential-clients"><span class="std std-ref">Diferencias entre clientes retail y residenciales</span></a> para entender la diferencia entre estos dos tipos de clientes.</p>
</div>
</div>
<span id="document-administration_portal/client/retail/index"></span><div class="section" id="clientes-retail">
<span id="retail-clients"></span><span id="id1"></span><h3>Clientes Retail<a class="headerlink" href="#clientes-retail" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Los clientes Retail son un tipo especial de cliente que solo proporciona un servicio de conectividad con operadores a través de cuentas retail.</p>
<div class="admonition attention">
<p class="first admonition-title">Atención</p>
<p class="last">Al contrario de los clientes de PBX Virtual, todos los clientes Retail usan el dominio de la marca para identificar inequívocamente sus cuentas. Necesitarás configurar el dominio de la marca para usar esta función.</p>
</div>
<div class="admonition hint">
<p class="first admonition-title">Consejo</p>
<p class="last">Los clientes Retail se pueden habilitar por marca a través de Funciones.</p>
</div>
<p>El objetivo de esta sección será describir cada una de las configuraciones asociadas con los clientes Retail incluidos en IvozProvider:</p>
<div class="toctree-wrapper compound">
<span id="document-administration_portal/client/retail/retail_accounts"></span><div class="section" id="retail-accounts">
<span id="id1"></span><h4>Cuentas Retail<a class="headerlink" href="#retail-accounts" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Las Cuentas Retail son la principal opción enrutable en los clientes Retail. Más o menos como <a class="reference internal" href="index.html#friends"><span class="std std-ref">Friends</span></a> son para los Clientes PBX Virtual, los dispositivos contienen las opciones configurables necesarias para proporcionar un servicio de conectividad SIP con IvozProvider y una entidad SIP externa.</p>
<div class="admonition warning">
<p class="first admonition-title">Advertencia</p>
<p class="last">Aunque tanto <strong>Carriers/Proveedores DDI</strong> como <strong>Cuentas Retail</strong> son definidos por el <strong>operador de la marca</strong>, los primeros están diseñados para conectarse con la red telefónica pública conmutada, mientras que los segundos conectan el sistema con las entidades SIP de nuestros clientes.</p>
</div>
<div class="section" id="types-of-retail-accounts">
<h5>Tipos de cuentas retail<a class="headerlink" href="#types-of-retail-accounts" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Hay 2 tipos principales de puntos finales SIP que pueden usar retail con IvozProvider:</p>
<ul class="simple">
<li><p class="first"><strong>Punto final de conexión directa</strong>: IvozProvider debe poder hablar SIP directamente con este tipo de dispositivos simplemente reenviando el tráfico al puerto adecuado de la dirección IP pública del PBX.</p>
</li>
<li><p class="first"><strong>Punto final detrás de NAT</strong>: No es directamente accesible. Este tipo de punto final debe registrarse en IvozProvider (al igual que todos los <a class="reference internal" href="index.html#terminals"><span class="std std-ref">Terminales</span></a>).</p>
</li>
</ul>
</div>
<div class="section" id="what-kind-of-calls-can-be-routed-through-a-retail-account">
<h5>¿Qué tipo de llamadas se pueden enrutar a través de una <em>Cuenta Retail</em>?<a class="headerlink" href="#what-kind-of-calls-can-be-routed-through-a-retail-account" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Contrariamente a Friends, <strong>Cuentas Retail</strong> tienen algunas simplificaciones y limitaciones:</p>
<blockquote>
<div><ul class="simple">
<li><p class="first">Las Cuentas Retail solo enrutan sus DDIs asignados</p>
</li>
<li><p class="first">Las Cuentas Retail solo realizan llamadas externas a Carriers</p>
</li>
<li><p class="first">Las Cuentas Retail solo reciben llamadas externas de Proveedores DDI</p>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="retail-accounts-configuration">
<h5>Configuración de Cuentas Retail<a class="headerlink" href="#retail-accounts-configuration" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Estos son los ajustes configurables de las <em>Cuentas Retail</em>:</p>
<blockquote>
<div><dl class="docutils">
<dt>Nombre</dt>
<dd><p class="first last">Nombre de la <strong>cuenta retail</strong>. Este nombre debe ser único en toda la marca, por lo que se recomienda usar algún tipo de identificador secuencial. Esto también se usará en mensajes SIP (enviados <strong>Desde Usuario</strong>).</p>
</dd>
<dt>Descripción</dt>
<dd><p class="first last">Opcional. Información adicional para esta <em>cuenta retail</em>.</p>
</dd>
<dt>Contraseña</dt>
<dd><p class="first last">Cuando la <em>cuenta retail</em> envía solicitudes, IvozProvider la autenticará usando esta contraseña. <strong>Usar contraseña ES OBLIGATORIO en modo &#8220;Registrar&#8221;</strong>. En modo &#8220;Directo&#8221;, dejarlo en blanco desactiva la autenticación SIP y habilita la verificación de origen IP.</p>
</dd>
<dt>Conectividad directa</dt>
<dd><p class="first last">Si eliges &#8216;Sí&#8217; aquí, tendrás que completar el protocolo, la dirección y el puerto donde se puede contactar a esta <em>cuenta retail</em>.</p>
</dd>
<dt>Transformación numérica</dt>
<dd><p class="first last">Conjunto de transformación numérica que se aplicará al comunicarse con este dispositivo.</p>
</dd>
<dt>DDI Saliente de Respaldo</dt>
<dd><p class="first last">Las llamadas externas desde esta <em>cuenta retail</em> se presentarán con este DDI, <strong>a menos que la fuente presentada coincida con un DDI perteneciente al cliente retail</strong>.</p>
</dd>
<dt>Desde dominio</dt>
<dd><p class="first last">La solicitud de IvozProvider a esta cuenta incluirá este dominio en el encabezado From.</p>
</dd>
<dt>DDI Entrante</dt>
<dd><p class="first last">Si se establece en &#8216;Sí&#8217;, establece el destino (R-URI y To) al DDI llamado al llamar a este punto final. Si se establece en &#8216;No&#8217;, se usará el nombre de usuario utilizado en el encabezado Contacto del registro, como se especifica en el RFC SIP (se usará el nombre de la cuenta retail para puntos finales con conectividad directa). Por defecto es &#8216;Sí&#8217;.</p>
</dd>
<dt>Habilitar paso a través de T.38</dt>
<dd><p class="first last">Si se establece en &#8216;sí&#8217;, este punto final SIP debe ser un <strong>emisor/receptor de fax compatible con T.38</strong>. IvozProvider actuará como una puerta de enlace T.38, conectando llamadas de fax de un carrier compatible con T.38 y un dispositivo compatible con T.38.</p>
</dd>
<dt>Encriptación RTP</dt>
<dd><p class="first last">Si se establece en &#8216;sí&#8217;, la llamada no se establecerá a menos que sea posible encriptar su audio. Si se establece en &#8216;no&#8217;, el audio no se encriptará.</p>
</dd>
<dt>Contacto Múltiple</dt>
<dd><p class="first last">Las mismas credenciales SIP se pueden configurar en múltiples dispositivos SIP. En ese caso, todos los dispositivos suenan simultáneamente al recibir una llamada. Configurar este interruptor en &#8216;No&#8217; limita este comportamiento para que solo suene el último dispositivo SIP registrado.</p>
</dd>
</dl>
</div></blockquote>
<div class="admonition warning">
<p class="first admonition-title">Advertencia</p>
<p class="last">Todas las cuentas retail dentro de un cliente retail tendrán las capacidades de transcodificación configuradas a nivel de cliente.</p>
</div>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">En la pantalla de edición de la cuenta retail, el campo <strong>id</strong> muestra el número de identificación interno asignado a la cuenta retail. Este id se transporta al campo <em>Id del Punto Final</em> en la sección <em>Llamadas Externas</em> para la exportación CSV.</p>
</div>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">La cuenta retail puede ser contactada debido a llamadas a varios DDIs. La configuración <em>DDI Entrante</em> permite que el punto final SIP remoto sepa qué número causó cada llamada, estableciendo ese número como destino (encabezados R-URI y To). De esta manera, la cuenta retail puede manejar las llamadas de manera diferente.</p>
</div>
</div>
<div class="section" id="voicemail-settings">
<h5>Configuración del buzón de voz<a class="headerlink" href="#voicemail-settings" title="Enlazar permanentemente con este título">¶</a></h5>
<p>No hay servicio de buzón de voz para clientes retail.</p>
</div>
<div class="section" id="call-forwarding-settings">
<h5>Configuración de desvío de llamadas<a class="headerlink" href="#call-forwarding-settings" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Hay 2 tipos de configuraciones de desvío de llamadas para cuentas retail:</p>
<ul class="simple">
<li><p class="first">Desvío de llamadas incondicional.</p>
</li>
<li><p class="first">Desvío de llamadas inalcanzable.</p>
</li>
</ul>
<p>Puedes dirigir ambos tipos a 2 destinos diferentes:</p>
<ul class="simple">
<li><p class="first">Un número externo.</p>
</li>
<li><p class="first">Otra cuenta retail dentro del mismo cliente retail.</p>
</li>
</ul>
<p>El desvío de llamadas inalcanzable se ejecutará siempre que no se pueda contactar a la cuenta retail:</p>
<ul class="simple">
<li><p class="first">Cuentas de conectividad directa: cuando no se recibe respuesta de la dirección definida.</p>
</li>
<li><p class="first">Cuentas que usan registro SIP: cuando no se recibe respuesta de la última dirección de contacto o cuando no se encuentra un registro activo.</p>
</li>
</ul>
<p>También puedes agregar el DDI llamado como criterio de desvío de llamadas, haciéndolo aplicar solo cuando se llama a un cierto DDI. Estas configuraciones de desvío de llamadas tienen prioridad sobre el desvío de llamadas sin DDI seleccionado (Cualquier DDI).</p>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">El desvío de llamadas incondicional tiene prioridad sobre el desvío de llamadas inalcanzable.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Advertencia</p>
<p class="last">Las cuentas retail marcadas como T.38 no tendrán ninguna configuración de desvío de llamadas.</p>
</div>
</div>
<div class="section" id="asterisk-as-a-retail-account">
<h5>Asterisk como una cuenta retail<a class="headerlink" href="#asterisk-as-a-retail-account" title="Enlazar permanentemente con este título">¶</a></h5>
<p>En el otro extremo de una cuenta puede haber cualquier tipo de entidad SIP. Esta sección toma como ejemplo un sistema PBX Asterisk que usa el controlador de canal SIP que quiere conectarse a IvozProvider.</p>
<div class="section" id="account-register">
<h6>Registro de cuenta<a class="headerlink" href="#account-register" title="Enlazar permanentemente con este título">¶</a></h6>
<p>Si el sistema no puede ser accedido directamente, Asterisk tendrá que registrarse en la plataforma (como lo haría un terminal).</p>
<p>La configuración será algo así:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>register =&gt; retailAccountName:retailAccountPassword@ivozprovider-brand.sip-domain.com
</pre></div>
</div>
</div>
<div class="section" id="account-peer">
<h6>Par de cuenta<a class="headerlink" href="#account-peer" title="Enlazar permanentemente con este título">¶</a></h6>
<div class="highlight-none"><div class="highlight"><pre><span></span>[retailAccountName]
type=peer
host=ivozprovider-brand.sip-domain.com
context=XXXXXX
disallow=all
allow=alaw
defaultuser=retailAccountName
secret=retailAccountPassword
fromuser=retailAccountName
fromdomain=ivozprovider-brand.sip-domain.com
insecure=port,invite
sendrpid=pai
directmedia=no
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Advertencia</p>
<p class="last"><em>Las cuentas retail</em> NO DEBEN desafiar a IvozProvider. Es por eso que se usa la configuración <em>insegura</em> aquí.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Dado que el nombre de usuario From se usa para identificar la cuenta retail, se debe usar P-Asserted-Identity (o P-Preferred-Identity o Remote-Party-Id) para especificar el número de la persona que llama. La prevalencia entre estos encabezados de origen es: PAI &gt; PPI &gt; RPID.</p>
</div>
</div>
</div>
</div>
<span id="document-administration_portal/client/retail/ddis"></span><div class="section" id="ddis">
<span id="retail-ddis"></span><h4>DDIs<a class="headerlink" href="#ddis" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Los DDIs son el punto de entrada externo desde los proveedores de DDI a los clientes Retail que pueden ser enrutados a través de cuentas retail.</p>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">No hay función de desvío de llamadas con filtros de llamadas externas en clientes retail.</p>
</div>
<div class="section" id="retail-ddi-routes">
<h5>Rutas DDI Retail<a class="headerlink" href="#retail-ddi-routes" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Los DDIs Retail solo pueden ser enrutados a una <a class="reference internal" href="index.html#retail-accounts"><span class="std std-ref">Cuentas Retail</span></a></p>
<div class="admonition hint">
<p class="first admonition-title">Consejo</p>
<p class="last">Enrutar un DDI a través de una cuenta Retail permitirá realizar llamadas externas desde esa cuenta presentando ese DDI como origen.</p>
</div>
</div>
<div class="section" id="retail-recordings">
<h5>Grabaciones Retail<a class="headerlink" href="#retail-recordings" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Si el cliente Retail tiene habilitada la función de <em>Grabaciones</em>, los DDIs también pueden grabar llamadas entrantes y/o salientes.</p>
</div>
</div>
<span id="document-administration_portal/client/retail/rating_profiles"></span><div class="section" id="rating-profiles">
<h4>Perfiles de precio<a class="headerlink" href="#rating-profiles" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Esta sección permite al cliente:</p>
<ul class="simple">
<li><p class="first">Ver la lista de planes de precios y su tiempo de activación.</p>
</li>
<li><p class="first">Verificar las etiquetas de enrutamiento disponibles (solo para clientes Retail y Wholesale) para alcanzar diferentes destinos.</p>
</li>
<li><p class="first">Simular una llamada y estimar el costo de una llamada dada.</p>
</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Esta sección solo se muestra a los clientes con <em>Mostrar detalles de facturación al cliente</em> configurado en Sí.</p>
</div>
</div>
<span id="document-administration_portal/client/retail/calls/index"></span><div class="section" id="calls">
<h4>Llamadas<a class="headerlink" href="#calls" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Estas son las secciones de la lista de llamadas para clientes retail:</p>
<div class="toctree-wrapper compound">
<span id="document-administration_portal/client/retail/calls/active_calls"></span><div class="section" id="active-calls">
<h5>Llamadas activas<a class="headerlink" href="#active-calls" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Esta sección permite al administrador del cliente ver <strong>llamadas activas actuales</strong>.</p>
<div class="admonition warning">
<p class="first admonition-title">Advertencia</p>
<p class="last"><strong>Se mostrarán las llamadas que involucren a cualquier usuario, friend, cuenta retail, dispositivo residencial o cliente wholesale</strong>, sin importar si son internas o externas.</p>
</div>
<p>Estas son las columnas mostradas:</p>
<blockquote>
<div><dl class="docutils">
<dt>Duración</dt>
<dd><p class="first last">Muestra la duración del establecimiento de la llamada durante el establecimiento y la duración de la llamada durante la llamada en curso. También muestra la dirección (entrante/saliente) y la información del estado de la llamada, como se explica <a class="reference internal" href="index.html#call-state"><span class="std std-ref">aquí</span></a>.</p>
</dd>
<dt>Propietario</dt>
<dd><p class="first last">Usuario, friend, cuenta retail, dispositivo residencial o cliente wholesale involucrado en la llamada dada.</p>
</dd>
<dt>Parte</dt>
<dd><p class="first last">Participante restante de la llamada dada. Se actualiza para mostrar la parte actual (en transferencias y llamadas desviadas).</p>
</dd>
</dl>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Habrá una entrada por entidad involucrada. Esto significa que una llamada interna estándar se mostrará en dos filas diferentes: una llamada saliente para el usuario que llama y una llamada entrante para el usuario llamado.</p>
</div>
</div>
<span id="document-administration_portal/client/retail/calls/external_calls"></span><div class="section" id="external-calls">
<h5>Llamadas externas<a class="headerlink" href="#external-calls" title="Enlazar permanentemente con este título">¶</a></h5>
<p>La sección de <strong>Llamadas externas</strong> lista <strong>tanto las llamadas externas entrantes como salientes</strong>.</p>
<p>Esta sección se muestra en diferentes niveles:</p>
<ul class="simple">
<li><p class="first">Nivel principal (nivel dios)</p>
</li>
<li><p class="first">Nivel de marca (filtrado para la marca emulada/registrada).</p>
</li>
<li><p class="first">Nivel de cliente (filtrado para el cliente emulado/registrado).</p>
</li>
</ul>
<p>Cada entrada muestra esta información:</p>
<blockquote>
<div><dl class="docutils">
<dt>Hora de inicio</dt>
<dd><p class="first last">Fecha y hora del establecimiento de la llamada.</p>
</dd>
<dt>Marca</dt>
<dd><p class="first last">Visible solo para <em>dios</em>, muestra la marca de cada llamada.</p>
</dd>
<dt>Cliente</dt>
<dd><p class="first last">Visible para <em>dios</em> y <em>operador de marca</em>, muestra el cliente de cada llamada.</p>
</dd>
<dt>Llamante</dt>
<dd><p class="first last">DDI presentado para la llamada saliente.</p>
</dd>
<dt>Llamado</dt>
<dd><p class="first last">Número externo marcado.</p>
</dd>
<dt>Duración</dt>
<dd><p class="first last">Muestra cuánto duró la llamada.</p>
</dd>
<dt>Precio</dt>
<dd><p class="first last">El monto de dinero para el cliente. Visible para <em>dios</em> y <em>operador de marca</em> y <em>administrador del cliente</em> si <em>Mostrar detalles de facturación al cliente</em> está habilitado.</p>
</dd>
<dt>Costo</dt>
<dd><p class="first last">Visible para <em>dios</em> y <em>operador de marca</em>, el monto de dinero para la marca (el dinero que el operador facturará por la llamada).</p>
</dd>
<dt>Plan de tarifas</dt>
<dd><p class="first last">Plan de tarifas utilizado para establecer el precio de la llamada. Visible para <em>dios</em> y <em>operador de marca</em> y <em>administrador del cliente</em> si <em>Mostrar detalles de facturación al cliente</em> está habilitado.</p>
</dd>
<dt>Destino</dt>
<dd><p class="first last">Destino que coincidió con la llamada para la facturación. Visible para <em>dios</em> y <em>operador de marca</em> y <em>administrador del cliente</em> si <em>Mostrar detalles de facturación al cliente</em> está habilitado.</p>
</dd>
<dt>Operador</dt>
<dd><p class="first last">Visible para <em>dios</em> y <em>operador de marca</em>, muestra qué <a class="reference internal" href="index.html#carriers"><span class="std std-ref">Operador</span></a> se utilizó para cada llamada saliente.</p>
</dd>
<dt>Proveedor DDI</dt>
<dd><p class="first last">Visible para <em>dios</em> y <em>operador de marca</em>, muestra qué <a class="reference internal" href="index.html#ddi-providers"><span class="std std-ref">Proveedor DDI</span></a> se utilizó para cada llamada entrante.</p>
</dd>
<dt>Factura</dt>
<dd><p class="first last">Visible para <em>dios</em> y <em>operador de marca</em>, muestra si una llamada ya está incluida en alguna <a class="reference internal" href="index.html#invoices"><span class="std std-ref">Factura</span></a>.</p>
</dd>
<dt>ID de llamada</dt>
<dd><p class="first last">Muestra el ID de la llamada para la resolución de problemas y exportación CSV.</p>
</dd>
<dt>Tipo de punto final</dt>
<dd><p class="first last">Valores posibles: RetailAccount, ResidentialDevice, User, Fax, Friend.</p>
</dd>
<dt>ID de punto final</dt>
<dd><p class="first last">ID interno de un punto final específico (solo cuando <em>endpointType</em> no está vacío).</p>
</dd>
<dt>Nombre del punto final</dt>
<dd><p class="first last">Extensión de usuario, nombre de friend, nombre de fax, nombre de cuenta retail o nombre de dispositivo residencial (solo cuando <em>endpointId</em> no está vacío).</p>
</dd>
</dl>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Un proceso asincrónico analiza cada llamada externa y la agrega a esta lista unos minutos después de colgar la llamada. Los campos relacionados con la facturación, como el costo y el precio, estarán vacíos para las llamadas entrantes externas.</p>
</div>
<div class="section" id="call-rerating">
<h6>Recalificación de llamadas<a class="headerlink" href="#call-rerating" title="Enlazar permanentemente con este título">¶</a></h6>
<p>En el <strong>nivel de marca</strong>, hay una operación adicional disponible para llamadas salientes: <strong>Recalificar llamada</strong>. Esta opción permite llamar al motor de calificación nuevamente para una llamada o un grupo de llamadas.</p>
<p>Notas sobre este proceso de recalificación:</p>
<ul class="simple">
<li><p class="first">Si una llamada está en una factura, no se puede recalificar. La factura debe eliminarse primero.</p>
</li>
<li><p class="first">La llamada se recalificará con la <em>Hora de inicio</em> de la llamada (no con los planes de tarifas activos actuales, sino con los planes de tarifas activos en el momento de la llamada).</p>
</li>
<li><p class="first">Tanto el <em>Precio</em> como el <em>Costo</em> se recalcularán. Esto puede implicar actualizar también el <em>plan de tarifas</em> y el <em>destino</em>.</p>
</li>
</ul>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Cuando se recalifica una llamada, el costo y el precio se vacían hasta la próxima iteración de la tarea asincrónica.</p>
</div>
</div>
</div>
<span id="document-administration_portal/client/retail/calls/call_csv_schedulers"></span><div class="section" id="call-csv-schedulers">
<h5>Programadores de CSV de llamadas<a class="headerlink" href="#call-csv-schedulers" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Esta sección permite programar informes CSV periódicos automáticos para administradores de clientes retail.</p>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Esta sección es casi idéntica a <a class="reference internal" href="index.html#invoice-schedulers"><span class="std std-ref">Programadores de facturas</span></a> excepto por los campos que no aplican a CSVs (secuencia de número de factura, tasa de impuestos...)</p>
</div>
<p>Al agregar una nueva definición, se muestran estos campos:</p>
<blockquote>
<div><dl class="docutils">
<dt>Nombre</dt>
<dd><p class="first last">Nombre del CSV de llamadas programado</p>
</dd>
<dt>Correo electrónico</dt>
<dd><p class="first last">Enviar el CSV de llamadas generado por correo electrónico. Vacío si no se desea correo automático.</p>
</dd>
<dt>Frecuencia/Unidad</dt>
<dd><p class="first last">Define la frecuencia (una vez al mes, cada 7 días, etc.) de la tarea programada</p>
</dd>
<dt>Dirección</dt>
<dd><p class="first last">Define qué llamadas deben incluirse según su dirección (entrantes, salientes, ambas).</p>
</dd>
<dt>DDI</dt>
<dd><p class="first last">Permite seleccionar un DDI específico del cliente.</p>
</dd>
<dt>Cuenta retail</dt>
<dd><p class="first last">Permite seleccionar una cuenta retail específica del cliente.</p>
</dd>
</dl>
</div></blockquote>
<p>Una vez creada, se accede a algunos campos y subsecciones nuevos:</p>
<blockquote>
<div><dl class="docutils">
<dt>Próxima ejecución</dt>
<dd><p class="first last">Muestra la fecha de la próxima ejecución</p>
</dd>
<dt>Última ejecución</dt>
<dd><p class="first last">Muestra la última ejecución y su resultado.</p>
</dd>
</dl>
</div></blockquote>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Modificar el valor de <em>Próxima ejecución</em> permite forzar ejecuciones específicas. Por ejemplo, establecer <em>Próxima ejecución</em> al primer día del mes actual creará nuevamente el informe CSV del mes pasado (para un programador mensual).</p>
</div>
<p>Los CSV generados de cada programador se pueden acceder en la subsección <strong>Lista de informes CSV de llamadas</strong>.</p>
<div class="section" id="csv-fields">
<h6>Campos CSV<a class="headerlink" href="#csv-fields" title="Enlazar permanentemente con este título">¶</a></h6>
<p>Estos son los campos de los archivos CSV generados:</p>
<blockquote>
<div><dl class="docutils">
<dt>callid</dt>
<dd><p class="first last">ID de llamada del diálogo SIP</p>
</dd>
<dt>horaInicio</dt>
<dd><p class="first last">Hora y fecha del establecimiento de la llamada</p>
</dd>
<dt>duración</dt>
<dd><p class="first last">Duración de la llamada en segundos</p>
</dd>
<dt>llamante</dt>
<dd><p class="first last">Número del llamante en formato E.164 (con &#8216;+&#8217;)</p>
</dd>
<dt>llamado</dt>
<dd><p class="first last">Número del llamado en formato E.164 (con &#8216;+&#8217;)</p>
</dd>
<dt>precio</dt>
<dd><p class="first last">Precio calculado para la llamada dada (vacío si <em>Mostrar detalles de facturación al cliente</em> está deshabilitado)</p>
</dd>
<dt>dirección</dt>
<dd><p class="first last">Valores posibles: entrante, saliente.</p>
</dd>
<dt>ddiId</dt>
<dd><p class="first last">DDI del cliente al que se asignará la llamada (llamado para llamadas entrantes, llamante para llamadas salientes).</p>
</dd>
<dt>tipoDePuntoFinal</dt>
<dd><p class="first last">Valor fijo: RetailAccount</p>
</dd>
<dt>idDePuntoFinal</dt>
<dd><p class="first last">ID interno de la cuenta retail específica</p>
</dd>
<dt>nombreDePuntoFinal</dt>
<dd><p class="first last">Nombre de la cuenta retail</p>
</dd>
</dl>
</div></blockquote>
</div>
</div>
<span id="document-administration_portal/client/retail/calls/call_recordings"></span><div class="section" id="external-calls">
<h5>Llamadas externas<a class="headerlink" href="#external-calls" title="Enlazar permanentemente con este título">¶</a></h5>
<p>La sección de <strong>Llamadas externas</strong> lista <strong>tanto las llamadas externas entrantes como salientes</strong>.</p>
<p>Esta sección se muestra en diferentes niveles:</p>
<ul class="simple">
<li><p class="first">Nivel principal (nivel dios)</p>
</li>
<li><p class="first">Nivel de marca (filtrado para la marca emulada/registrada).</p>
</li>
<li><p class="first">Nivel de cliente (filtrado para el cliente emulado/registrado).</p>
</li>
</ul>
<p>Cada entrada muestra esta información:</p>
<blockquote>
<div><dl class="docutils">
<dt>Hora de inicio</dt>
<dd><p class="first last">Fecha y hora del establecimiento de la llamada.</p>
</dd>
<dt>Marca</dt>
<dd><p class="first last">Visible solo para <em>dios</em>, muestra la marca de cada llamada.</p>
</dd>
<dt>Cliente</dt>
<dd><p class="first last">Visible para <em>dios</em> y <em>operador de marca</em>, muestra el cliente de cada llamada.</p>
</dd>
<dt>Llamante</dt>
<dd><p class="first last">DDI presentado para la llamada saliente.</p>
</dd>
<dt>Llamado</dt>
<dd><p class="first last">Número externo marcado.</p>
</dd>
<dt>Duración</dt>
<dd><p class="first last">Muestra cuánto duró la llamada.</p>
</dd>
<dt>Precio</dt>
<dd><p class="first last">El monto de dinero para el cliente. Visible para <em>dios</em> y <em>operador de marca</em> y <em>administrador del cliente</em> si <em>Mostrar detalles de facturación al cliente</em> está habilitado.</p>
</dd>
<dt>Costo</dt>
<dd><p class="first last">Visible para <em>dios</em> y <em>operador de marca</em>, el monto de dinero para la marca (el dinero que el operador facturará por la llamada).</p>
</dd>
<dt>Plan de tarifas</dt>
<dd><p class="first last">Plan de tarifas utilizado para establecer el precio de la llamada. Visible para <em>dios</em> y <em>operador de marca</em> y <em>administrador del cliente</em> si <em>Mostrar detalles de facturación al cliente</em> está habilitado.</p>
</dd>
<dt>Destino</dt>
<dd><p class="first last">Destino que coincidió con la llamada para la facturación. Visible para <em>dios</em> y <em>operador de marca</em> y <em>administrador del cliente</em> si <em>Mostrar detalles de facturación al cliente</em> está habilitado.</p>
</dd>
<dt>Operador</dt>
<dd><p class="first last">Visible para <em>dios</em> y <em>operador de marca</em>, muestra qué <a class="reference internal" href="index.html#carriers"><span class="std std-ref">Operador</span></a> se utilizó para cada llamada saliente.</p>
</dd>
<dt>Proveedor DDI</dt>
<dd><p class="first last">Visible para <em>dios</em> y <em>operador de marca</em>, muestra qué <a class="reference internal" href="index.html#ddi-providers"><span class="std std-ref">Proveedor DDI</span></a> se utilizó para cada llamada entrante.</p>
</dd>
<dt>Factura</dt>
<dd><p class="first last">Visible para <em>dios</em> y <em>operador de marca</em>, muestra si una llamada ya está incluida en alguna <a class="reference internal" href="index.html#invoices"><span class="std std-ref">Factura</span></a>.</p>
</dd>
<dt>ID de llamada</dt>
<dd><p class="first last">Muestra el ID de la llamada para la resolución de problemas y exportación CSV.</p>
</dd>
<dt>Tipo de punto final</dt>
<dd><p class="first last">Valores posibles: RetailAccount, ResidentialDevice, User, Fax, Friend.</p>
</dd>
<dt>ID de punto final</dt>
<dd><p class="first last">ID interno de un punto final específico (solo cuando <em>endpointType</em> no está vacío).</p>
</dd>
<dt>Nombre del punto final</dt>
<dd><p class="first last">Extensión de usuario, nombre de friend, nombre de fax, nombre de cuenta retail o nombre de dispositivo residencial (solo cuando <em>endpointId</em> no está vacío).</p>
</dd>
</dl>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Un proceso asincrónico analiza cada llamada externa y la agrega a esta lista unos minutos después de colgar la llamada. Los campos relacionados con la facturación, como el costo y el precio, estarán vacíos para las llamadas entrantes externas.</p>
</div>
<div class="section" id="call-rerating">
<h6>Recalificación de llamadas<a class="headerlink" href="#call-rerating" title="Enlazar permanentemente con este título">¶</a></h6>
<p>En el <strong>nivel de marca</strong>, hay una operación adicional disponible para llamadas salientes: <strong>Recalificar llamada</strong>. Esta opción permite llamar al motor de calificación nuevamente para una llamada o un grupo de llamadas.</p>
<p>Notas sobre este proceso de recalificación:</p>
<ul class="simple">
<li><p class="first">Si una llamada está en una factura, no se puede recalificar. La factura debe eliminarse primero.</p>
</li>
<li><p class="first">La llamada se recalificará con la <em>Hora de inicio</em> de la llamada (no con los planes de tarifas activos actuales, sino con los planes de tarifas activos en el momento de la llamada).</p>
</li>
<li><p class="first">Tanto el <em>Precio</em> como el <em>Costo</em> se recalcularán. Esto puede implicar actualizar también el <em>plan de tarifas</em> y el <em>destino</em>.</p>
</li>
</ul>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Cuando se recalifica una llamada, el costo y el precio se vacían hasta la siguiente iteración de la tarea asincrónica.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Consulta <a class="reference internal" href="index.html#differences-between-retail-and-residential-clients"><span class="std std-ref">Diferencias entre clientes retail y residenciales</span></a> para entender la diferencia entre estos dos tipos de clientes.</p>
</div>
</div>
<span id="document-administration_portal/client/wholesale/index"></span><div class="section" id="clientes-wholesale">
<span id="wholesale-clients"></span><span id="id1"></span><h3>Clientes Wholesale<a class="headerlink" href="#clientes-wholesale" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Los clientes Wholesale son el tipo de cliente más ligero en IvozProvider.</p>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Puedes leer los detalles sobre este tipo de cliente <a class="reference internal" href="index.html#wholesale-clients"><span class="std std-ref">aquí</span></a>.</p>
</div>
<p>Estas secciones se cubrirán para este tipo de cliente:</p>
<div class="toctree-wrapper compound">
<span id="document-administration_portal/client/wholesale/rating_profiles"></span><div class="section" id="rating-profiles">
<h4>Perfiles de precio<a class="headerlink" href="#rating-profiles" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Esta sección permite al cliente:</p>
<ul class="simple">
<li><p class="first">Ver la lista de planes de precios y su tiempo de activación.</p>
</li>
<li><p class="first">Verificar las etiquetas de enrutamiento disponibles (solo para clientes Retail y Wholesale) para llegar a diferentes destinos.</p>
</li>
<li><p class="first">Simular una llamada y estimar el costo de una llamada dada.</p>
</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Esta sección solo se muestra a los clientes con <em>Mostrar detalles de facturación al cliente</em> configurado en Sí.</p>
</div>
</div>
<span id="document-administration_portal/client/wholesale/calls/index"></span><div class="section" id="calls">
<h4>Llamadas<a class="headerlink" href="#calls" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Estas son las secciones de la lista de llamadas para clientes wholesale:</p>
<div class="toctree-wrapper compound">
<span id="document-administration_portal/client/wholesale/calls/active_calls"></span><div class="section" id="active-calls">
<h5>Llamadas activas<a class="headerlink" href="#active-calls" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Esta sección permite al administrador del cliente ver <strong>llamadas activas actuales</strong>.</p>
<div class="admonition warning">
<p class="first admonition-title">Advertencia</p>
<p class="last"><strong>Se mostrarán las llamadas que involucren a cualquier usuario, friend, cuenta retail, dispositivo residencial o cliente wholesale</strong>, sin importar si son internas o externas.</p>
</div>
<p>Estas son las columnas mostradas:</p>
<blockquote>
<div><dl class="docutils">
<dt>Duración</dt>
<dd><p class="first last">Muestra la duración del establecimiento de la llamada durante el establecimiento y la duración de la llamada durante la llamada en curso. También muestra la dirección (entrante/saliente) y la información del estado de la llamada, como se explica <a class="reference internal" href="index.html#call-state"><span class="std std-ref">aquí</span></a>.</p>
</dd>
<dt>Propietario</dt>
<dd><p class="first last">Usuario, friend, cuenta retail, dispositivo residencial o cliente wholesale involucrado en la llamada dada.</p>
</dd>
<dt>Parte</dt>
<dd><p class="first last">Participante restante de la llamada dada. Se actualiza para mostrar la parte actual (en transferencias y llamadas desviadas).</p>
</dd>
</dl>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Habrá una entrada por entidad involucrada. Esto significa que una llamada interna estándar se mostrará en dos filas diferentes: una llamada saliente para el usuario que llama y una llamada entrante para el usuario llamado.</p>
</div>
</div>
<span id="document-administration_portal/client/wholesale/calls/external_calls"></span><div class="section" id="external-calls">
<h5>Llamadas externas<a class="headerlink" href="#external-calls" title="Enlazar permanentemente con este título">¶</a></h5>
<p>La sección de <strong>Llamadas externas</strong> lista <strong>tanto las llamadas externas entrantes como salientes</strong>.</p>
<p>Esta sección se muestra en diferentes niveles:</p>
<ul class="simple">
<li><p class="first">Nivel principal (nivel dios)</p>
</li>
<li><p class="first">Nivel de marca (filtrado para la marca emulada/registrada).</p>
</li>
<li><p class="first">Nivel de cliente (filtrado para el cliente emulado/registrado).</p>
</li>
</ul>
<p>Cada entrada muestra esta información:</p>
<blockquote>
<div><dl class="docutils">
<dt>Hora de inicio</dt>
<dd><p class="first last">Fecha y hora del establecimiento de la llamada.</p>
</dd>
<dt>Marca</dt>
<dd><p class="first last">Visible solo para <em>dios</em>, muestra la marca de cada llamada.</p>
</dd>
<dt>Cliente</dt>
<dd><p class="first last">Visible para <em>dios</em> y <em>operador de marca</em>, muestra el cliente de cada llamada.</p>
</dd>
<dt>Llamante</dt>
<dd><p class="first last">DDI presentado para la llamada saliente.</p>
</dd>
<dt>Llamado</dt>
<dd><p class="first last">Número externo marcado.</p>
</dd>
<dt>Duración</dt>
<dd><p class="first last">Muestra cuánto duró la llamada.</p>
</dd>
<dt>Precio</dt>
<dd><p class="first last">El monto de dinero para el cliente. Visible para <em>dios</em> y <em>operador de marca</em> y <em>administrador del cliente</em> si <em>Mostrar detalles de facturación al cliente</em> está habilitado.</p>
</dd>
<dt>Costo</dt>
<dd><p class="first last">Visible para <em>dios</em> y <em>operador de marca</em>, el monto de dinero para la marca (el dinero que el operador facturará por la llamada).</p>
</dd>
<dt>Plan de precio</dt>
<dd><p class="first last">Plan de precio utilizado para establecer el precio de la llamada. Visible para <em>dios</em> y <em>operador de marca</em> y <em>administrador del cliente</em> si <em>Mostrar detalles de facturación al cliente</em> está habilitado.</p>
</dd>
<dt>Destino</dt>
<dd><p class="first last">Destino que coincidió con la llamada para la facturación. Visible para <em>dios</em> y <em>operador de marca</em> y <em>administrador del cliente</em> si <em>Mostrar detalles de facturación al cliente</em> está habilitado.</p>
</dd>
<dt>Operador</dt>
<dd><p class="first last">Visible para <em>dios</em> y <em>operador de marca</em>, muestra qué <a class="reference internal" href="index.html#carriers"><span class="std std-ref">Operador</span></a> se utilizó para cada llamada saliente.</p>
</dd>
<dt>Proveedor DDI</dt>
<dd><p class="first last">Visible para <em>dios</em> y <em>operador de marca</em>, muestra qué <a class="reference internal" href="index.html#ddi-providers"><span class="std std-ref">Proveedor DDI</span></a> se utilizó para cada llamada entrante.</p>
</dd>
<dt>Factura</dt>
<dd><p class="first last">Visible para <em>dios</em> y <em>operador de marca</em>, muestra si una llamada ya está incluida en alguna <a class="reference internal" href="index.html#invoices"><span class="std std-ref">Factura</span></a>.</p>
</dd>
<dt>ID de llamada</dt>
<dd><p class="first last">Muestra el ID de la llamada para la resolución de problemas y exportación CSV.</p>
</dd>
<dt>Tipo de punto final</dt>
<dd><p class="first last">Valores posibles: RetailAccount, ResidentialDevice, User, Fax, Friend.</p>
</dd>
<dt>ID de punto final</dt>
<dd><p class="first last">ID interno del punto final específico (solo cuando <em>endpointType</em> no está vacío).</p>
</dd>
<dt>Nombre del punto final</dt>
<dd><p class="first last">Extensión de usuario, nombre de friend, nombre de fax, nombre de cuenta retail o nombre de dispositivo residencial (solo cuando <em>endpointId</em> no está vacío).</p>
</dd>
</dl>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Un proceso asincrónico analiza cada llamada externa y la agrega a esta lista unos minutos después de colgar la llamada. Los campos relacionados con la facturación, como el costo y el precio, estarán vacíos para las llamadas entrantes externas.</p>
</div>
<div class="section" id="call-rerating">
<h6>Recalificación de llamadas<a class="headerlink" href="#call-rerating" title="Enlazar permanentemente con este título">¶</a></h6>
<p>En el <strong>nivel de marca</strong>, hay una operación adicional disponible para llamadas salientes: <strong>Recalificar llamada</strong>. Esta opción permite llamar al motor de calificación nuevamente para una llamada o un grupo de llamadas.</p>
<p>Notas sobre este proceso de recalificación:</p>
<ul class="simple">
<li><p class="first">Si una llamada está en una factura, no se puede recalificar. La factura debe eliminarse primero.</p>
</li>
<li><p class="first">La llamada se recalificará con la <em>Hora de inicio</em> de la llamada (no con los planes de precio activos actuales, sino con los planes de precio activos en el momento de la llamada).</p>
</li>
<li><p class="first">Tanto el <em>Precio</em> como el <em>Costo</em> se recalcularán. Esto puede implicar actualizar también el <em>plan de precio</em> y el <em>destino</em>.</p>
</li>
</ul>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Cuando una llamada se recalifica, el costo y el precio se vacían hasta la siguiente iteración de la tarea asincrónica.</p>
</div>
</div>
</div>
<span id="document-administration_portal/client/wholesale/calls/call_csv_schedulers"></span><div class="section" id="call-csv-schedulers">
<h5>Programadores de CSV de llamadas<a class="headerlink" href="#call-csv-schedulers" title="Enlazar permanentemente con este título">¶</a></h5>
<p>Esta sección permite programar informes CSV periódicos automáticos para administradores de clientes wholesale.</p>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Esta sección es casi idéntica a <a class="reference internal" href="index.html#invoice-schedulers"><span class="std std-ref">Programadores de facturas</span></a> excepto por los campos que no se aplican a los CSV (secuencia de número de factura, tasa de impuestos...)</p>
</div>
<p>Al agregar una nueva definición, se muestran estos campos:</p>
<blockquote>
<div><dl class="docutils">
<dt>Nombre</dt>
<dd><p class="first last">Nombre del CSV de llamadas programado</p>
</dd>
<dt>Correo electrónico</dt>
<dd><p class="first last">Enviar el CSV de llamadas generado por correo electrónico. Vacío si no se desea correo automático.</p>
</dd>
<dt>Frecuencia/Unidad</dt>
<dd><p class="first last">Define la frecuencia (una vez al mes, cada 7 días, etc.) de la tarea programada</p>
</dd>
<dt>Dirección</dt>
<dd><p class="first last">Define qué llamadas deben incluirse según su dirección (entrante, saliente, ambas).</p>
</dd>
</dl>
</div></blockquote>
<p>Una vez creado, algunos campos y subsecciones nuevos son accesibles:</p>
<blockquote>
<div><dl class="docutils">
<dt>Próxima ejecución</dt>
<dd><p class="first last">Muestra la fecha de la próxima ejecución</p>
</dd>
<dt>Última ejecución</dt>
<dd><p class="first last">Muestra la última ejecución y su resultado.</p>
</dd>
</dl>
</div></blockquote>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Modificar el valor de <em>Próxima ejecución</em> permite forzar ejecuciones específicas. Por ejemplo, establecer <em>Próxima ejecución</em> al primer día del mes actual creará nuevamente el informe CSV del mes pasado (para un programador mensual).</p>
</div>
<p>Los CSV generados de cada programador se pueden acceder en la subsección <strong>Lista de informes CSV de llamadas</strong>.</p>
<div class="section" id="csv-fields">
<h6>Campos CSV<a class="headerlink" href="#csv-fields" title="Enlazar permanentemente con este título">¶</a></h6>
<p>Estos son los campos de los archivos CSV generados:</p>
<blockquote>
<div><dl class="docutils">
<dt>callid</dt>
<dd><p class="first last">Call-ID del diálogo SIP</p>
</dd>
<dt>startTime</dt>
<dd><p class="first last">Hora y fecha del establecimiento de la llamada</p>
</dd>
<dt>duración</dt>
<dd><p class="first last">Duración de la llamada en segundos</p>
</dd>
<dt>llamante</dt>
<dd><p class="first last">Número del llamante en formato E.164 (con &#8216;+&#8217;)</p>
</dd>
<dt>llamado</dt>
<dd><p class="first last">Número del llamado en formato E.164 (con &#8216;+&#8217;)</p>
</dd>
<dt>precio</dt>
<dd><p class="first last">Precio calculado para la llamada dada (vacío si <em>Mostrar detalles de facturación al cliente</em> está deshabilitado)</p>
</dd>
<dt>dirección</dt>
<dd><p class="first last">Valores posibles: entrante, saliente.</p>
</dd>
<dt>ddiId</dt>
<dd><p class="first last">Vacío para clientes wholesale</p>
</dd>
<dt>tipo de punto final</dt>
<dd><p class="first last">Vacío para clientes wholesale</p>
</dd>
<dt>ID de punto final</dt>
<dd><p class="first last">Vacío para clientes wholesale</p>
</dd>
<dt>nombre del punto final</dt>
<dd><p class="first last">Vacío para clientes wholesale</p>
</dd>
</dl>
</div></blockquote>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<p>Los tipos de clientes están ordenados desde el más completo en funciones hasta el más ligero.</p>
</div>
</div>
<div class="toctree-wrapper compound">
<span id="document-user_portal/index"></span><div class="section" id="user-portal">
<span id="userportal"></span><h2>Portal de Usuario<a class="headerlink" href="#user-portal" title="Enlazar permanentemente con este título">¶</a></h2>
<p><a class="reference internal" href="index.html#virtual-pbx"><span class="std std-ref">PBX Virtual</span></a> los clientes tienen un rol adicional aparte de dios, marca y cliente: <strong>rol de usuario</strong>.</p>
<p>Como los demás niveles de IvozProvider, los usuarios finales tienen un portal web independiente.</p>
<p>Esta sección cubrirá estos temas:</p>
<div class="toctree-wrapper compound">
<span id="document-user_portal/urls"></span><div class="section" id="urls">
<h3>URLs<a class="headerlink" href="#urls" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Antes de acceder al portal de usuario, las direcciones URL deben estar configuradas (los dominios en estas URLs deben apuntar a cualquiera de las direcciones IP públicas de la plataforma).</p>
<p>2 roles pueden realizar esta tarea:</p>
<div class="section" id="god-operator">
<h4>Operador dios<a class="headerlink" href="#god-operator" title="Enlazar permanentemente con este título">¶</a></h4>
<p>En la sección <strong>Configuración de la plataforma &gt; Marcas</strong> puedes configurar tantas URLs de usuario como desees, usando el botón <strong>Lista de portales</strong> de cada marca.</p>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Las URLs están vinculadas a las marcas y el operador dios puede elegir si crear una URL de portal de usuario compartida para todos los clientes de una marca o crear una por cliente.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Advertencia</p>
<p class="last">Las URLs DEBEN ser HTTPS.</p>
</div>
<p>Esta sección también permite configurar un logo por URL, un tema y una frase para usar como título del portal de usuario.</p>
<div class="admonition hint">
<p class="first admonition-title">Consejo</p>
<p class="last">Esto permite crear portales de usuario corporativos.</p>
</div>
</div>
<div class="section" id="brand-operator">
<h4>Operador de marca<a class="headerlink" href="#brand-operator" title="Enlazar permanentemente con este título">¶</a></h4>
<p>El operador de marca también puede realizar esta misma tarea para configurar las URLs del portal de usuario de sus clientes.</p>
<p>De esta manera, puede elegir si configurar una URL por cliente (con dominios personalizados, logos, tema y título) o compartir una URL global para todos ellos.</p>
<p>La sección para hacer esto es <strong>Configuración de marca &gt; URLs del portal</strong>.</p>
</div>
</div>
<span id="document-user_portal/credentials"></span><div class="section" id="credentials">
<h3>Credenciales<a class="headerlink" href="#credentials" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Las credenciales de acceso al portal de usuario se configuran en la sección <strong>Configuración del cliente &gt; Usuarios</strong>.</p>
<p>Específicamente:</p>
<ul class="simple">
<li><p class="first">Bloque de <strong>Información de inicio de sesión</strong>, el acceso de cada usuario está habilitado o deshabilitado.</p>
</li>
<li><p class="first">También puedes establecer la <strong>Contraseña</strong>.</p>
</li>
<li><p class="first">Para iniciar sesión en el portal de usuario, el usuario debe usar su dirección de correo electrónico.</p>
</li>
</ul>
<div class="admonition warning">
<p class="first admonition-title">Advertencia</p>
<p class="last">El <strong>correo electrónico</strong> de cada usuario DEBE ser <strong>globalmente único</strong>.</p>
</div>
</div>
<span id="document-user_portal/features"></span><div class="section" id="features">
<h3>Características<a class="headerlink" href="#features" title="Enlazar permanentemente con este título">¶</a></h3>
<p>IvozProvider proporciona un portal web donde los usuarios finales pueden realizar las siguientes acciones:</p>
<ul>
<li><p class="first">Ver todas las llamadas en las que ha estado involucrado.</p>
</li>
<li><p class="first">Configurar desvíos de llamadas:</p>
<blockquote>
<div><ul class="simple">
<li><p class="first">Al buzón de voz</p>
</li>
<li><p class="first">A una extensión interna</p>
</li>
<li><p class="first">A un número externo</p>
</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">Habilitar funcionalidades:</p>
<blockquote>
<div><ul class="simple">
<li><p class="first">Llamada en espera</p>
</li>
<li><p class="first">No molestar</p>
</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">Ver el estado del registro de su dispositivo SIP</p>
</li>
</ul>
</div>
</div>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">El portal de usuario tiene una apariencia diferente a los demás portales y es responsivo para trabajar con dispositivos móviles.</p>
</div>
</div>
</div>
<div class="toctree-wrapper compound">
<span id="document-security_and_maintenance/security/index"></span><div class="section" id="security">
<span id="id1"></span><h2>Seguridad<a class="headerlink" href="#security" title="Enlazar permanentemente con este título">¶</a></h2>
<p>IvozProvider está diseñado para estar expuesto a Internet, teniendo IPs públicas en algunas NICs de perfil.</p>
<p>Esta sección habla sobre los mecanismos de seguridad incluidos y no incluidos (pero recomendados y enviados en todas las instalaciones de producción de IvozProvider mantenidas por <a class="reference external" href="https://www.irontec.com">Irontec</a>):</p>
<div class="toctree-wrapper compound">
<span id="document-security_and_maintenance/security/firewall"></span><div class="section" id="firewall">
<h3>Cortafuegos<a class="headerlink" href="#firewall" title="Enlazar permanentemente con este título">¶</a></h3>
<p><strong>IvozProvider no incluye actualmente un cortafuegos</strong> pero...</p>
<div class="admonition danger">
<p class="first admonition-title">Peligro</p>
<p class="last"><strong>Recomendamos encarecidamente que cualquier instalación de producción implemente un cortafuegos</strong> para proteger la plataforma de Internet.</p>
</div>
<p>El método de protección podría ser:</p>
<ul class="simple">
<li><p class="first">Cortafuegos local basado en <a class="reference external" href="https://www.netfilter.org/">iptables</a></p>
</li>
<li><p class="first">Cortafuegos externo</p>
</li>
<li><p class="first">Ambos</p>
</li>
</ul>
<div class="section" id="exposed-ports-services">
<h4>Puertos/servicios expuestos<a class="headerlink" href="#exposed-ports-services" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Estos son los <strong>puertos que IvozProvider necesita exponer</strong> para funcionar correctamente:</p>
<p><strong>Señalización SIP del lado del cliente</strong>:</p>
<ul class="simple">
<li><p class="first">Puerto 5060 (TCP/UDP)</p>
</li>
<li><p class="first">Puerto 5061 (TCP)</p>
</li>
<li><p class="first">Puerto 10080 (TCP) para conexiones Websocket (WS).</p>
</li>
<li><p class="first">Puerto 10081 (TCP) para conexiones Websocket seguras (WSS).</p>
</li>
</ul>
<p><strong>Señalización SIP del lado del proveedor</strong>:</p>
<ul class="simple">
<li><p class="first">Puerto 5060 (TCP/UDP)</p>
</li>
<li><p class="first">Puerto 5061 (TCP)</p>
</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Puerto 7060 (TCP/UDP) y 7061 TCP en caso de que ambos proxies compartan una única dirección IP.</p>
</div>
<p><strong>Flujo de audio RTP</strong>:</p>
<ul class="simple">
<li><p class="first">Rango de puertos 13000-19000 UDP</p>
</li>
</ul>
<p><strong>Portal web y aprovisionamiento</strong>:</p>
<ul class="simple">
<li><p class="first">Puertos TCP 80, 443, 1443, 2443 y 3443</p>
</li>
</ul>
<div class="admonition hint">
<p class="first admonition-title">Consejo</p>
<p class="last">Recomendamos usar cualquier mecanismo de <strong>bloqueo geoIP</strong> para bloquear conexiones de países sin clientes.</p>
</div>
</div>
</div>
<span id="document-security_and_maintenance/security/antiflooding"></span><div class="section" id="sip-antiflooding">
<span id="id1"></span><h3>Antiflooding SIP<a class="headerlink" href="#sip-antiflooding" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Los proxies SIP incluidos en la instalación de IvozProvider para la señalización SIP usan el <a class="reference external" href="http://kamailio.org/docs/modules/5.1.x/modules/pike.html">módulo PIKE</a> para evitar ataques DoS.</p>
<p>Este módulo rastrea la dirección IP de las solicitudes entrantes y bloquea las que exceden el límite en un intervalo de tiempo dado.</p>
<div class="admonition warning">
<p class="first admonition-title">Advertencia</p>
<p class="last"><strong>Las IPs no se bloquean permanentemente</strong>, se bloquean durante 5 minutos. Después de este tiempo, se permiten nuevamente siempre que su tasa de solicitudes entrantes no exceda el límite.</p>
</div>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last"><a class="reference internal" href="index.html#antiflood-banned-ips"><span class="std std-ref">IPs bloqueadas por Antiflood</span></a> muestra una lista de direcciones que han sido prohibidas en algún momento.</p>
</div>
<p>Los parámetros de configuración actuales son:</p>
<ul class="simple">
<li><p class="first"><strong>Intervalo de tiempo de muestreo</strong>: 2 segundos.</p>
</li>
<li><p class="first"><strong>Umbral por unidad de tiempo</strong>: 100 solicitudes.</p>
</li>
</ul>
<p>Esto significa que <em>cualquier dirección IP que envíe más de 100 solicitudes en un intervalo de tiempo de 2 segundos será bloqueada (ignorada) durante 5 minutos. Después de este tiempo, será desbloqueada y su tasa de solicitudes será evaluada nuevamente</em>.</p>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Tenga en cuenta que algunas solicitudes no son tenidas en cuenta por antiflood, por favor continúe leyendo.</p>
</div>
<div class="section" id="which-requests-are-taken-into-account-in-kamusers">
<h4>¿Qué solicitudes se tienen en cuenta en KamUsers?<a class="headerlink" href="#which-requests-are-taken-into-account-in-kamusers" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Las solicitudes del lado del cliente generalmente atraviesan 2 fases diferentes:</p>
<ul class="simple">
<li><p class="first">Paso 0: verificaciones iniciales, identificación del punto final y autenticación.</p>
</li>
<li><p class="first">Paso 1: lógica restante.</p>
</li>
</ul>
<p>Antiflood tendrá en cuenta:</p>
<ul class="simple">
<li><p class="first">Solicitudes fallidas durante el paso 0:</p>
<ul>
<li><p class="first">Solicitudes que no usan el dominio SIP en KamUsers (excepto mayoristas).</p>
</li>
<li><p class="first">Solicitudes de AoRs no existentes en KamUsers.</p>
</li>
<li><p class="first">Solicitudes que fallan la autenticación SIP con contraseñas incorrectas en KamUsers.</p>
</li>
</ul>
</li>
<li><p class="first">Solicitudes INVITE iniciales que alcanzan el paso 1 (es decir: nuevos establecimientos de llamadas de clientes legítimos).</p>
</li>
</ul>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Tenga en cuenta que antiflood no tendrá en cuenta los ciclos exitosos de REGISTER/SUBSCRIBE.</p>
</div>
</div>
<div class="section" id="which-requests-are-taken-into-account-in-kamtrunks">
<h4>¿Qué solicitudes se tienen en cuenta en KamTrunks?<a class="headerlink" href="#which-requests-are-taken-into-account-in-kamtrunks" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Antiflood tendrá en cuenta:</p>
<ul class="simple">
<li><p class="first">OPCIONES SIP de proveedores no-DDI.</p>
</li>
<li><p class="first">Proveedores no-DDI hablando con KamTrunks.</p>
</li>
</ul>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Tenga en cuenta que antiflood no tendrá en cuenta las solicitudes de proveedores DDI a KamTrunks.</p>
</div>
</div>
</div>
<span id="document-security_and_maintenance/security/geoip_filter"></span><div class="section" id="geoip-filter">
<span id="id1"></span><h3>Filtro GeoIP<a class="headerlink" href="#geoip-filter" title="Enlazar permanentemente con este título">¶</a></h3>
<p><a class="reference internal" href="index.html#vpbx-clients"><span class="std std-ref">Clientes de PBX Virtual</span></a>, <a class="reference internal" href="index.html#retail-clients"><span class="std std-ref">Clientes Retail</span></a> y <a class="reference internal" href="index.html#residential-clients"><span class="std std-ref">Clientes Residenciales</span></a> pueden permitir el tráfico de direcciones IP pertenecientes a países elegidos con la combinación del campo <strong>Filtrar por dirección IP</strong> y el selector <strong>Países GeoIP</strong>.</p>
<div class="admonition warning">
<p class="first admonition-title">Advertencia</p>
<p class="last">En <a class="reference internal" href="index.html#wholesale-clients"><span class="std std-ref">Clientes Wholesale</span></a> no hay campo <strong>Filtrar por dirección IP</strong> ya que este tipo de clientes se autentican por IP.</p>
</div>
<p>Seleccionar un país permitirá el tráfico de todas las direcciones de ese país. Si desea permitir IPs específicas, use <a class="reference internal" href="index.html#client-authorized-ip-ranges"><span class="std std-ref">Rangos de IP autorizados</span></a>.</p>
<div class="admonition error">
<p class="first admonition-title">Error</p>
<p class="last">Habilitar <strong>Filtrar por dirección IP</strong> y dejar en blanco tanto <strong>Países GeoIP</strong> como <strong>Lista de fuentes autorizadas</strong> evitará todas las llamadas.</p>
</div>
</div>
<span id="document-security_and_maintenance/security/authorized_ip_ranges"></span><div class="section" id="authorized-ip-ranges">
<span id="client-authorized-ip-ranges"></span><span id="id1"></span><h3>Rangos de IP autorizados<a class="headerlink" href="#authorized-ip-ranges" title="Enlazar permanentemente con este título">¶</a></h3>
<p><a class="reference internal" href="index.html#vpbx-clients"><span class="std std-ref">Clientes de PBX Virtual</span></a>, <a class="reference internal" href="index.html#retail-clients"><span class="std std-ref">Clientes Retail</span></a> y <a class="reference internal" href="index.html#residential-clients"><span class="std std-ref">Clientes Residenciales</span></a> pueden agregar direcciones IP o rangos (en formato CIDR) con la combinación del campo <strong>Filtrar por dirección IP</strong> y la subsección <strong>Lista de fuentes autorizadas</strong>.</p>
<div class="admonition warning">
<p class="first admonition-title">Advertencia</p>
<p class="last">En <a class="reference internal" href="index.html#wholesale-clients"><span class="std std-ref">Clientes Wholesale</span></a> no hay campo <strong>Filtrar por dirección IP</strong> ya que este tipo de clientes se autentican por IP, haciendo obligatorio completar la <strong>Lista de direcciones mayoristas</strong>.</p>
</div>
<p>Cuando <strong>Filtrar por dirección IP</strong> está habilitado, los usuarios no podrán conectarse desde otra red, incluso si tienen credenciales SIP válidas.</p>
<div class="admonition error">
<p class="first admonition-title">Error</p>
<p class="last">Habilitar <strong>Filtrar por dirección IP</strong> y dejar en blanco tanto <strong>Países GeoIP</strong> como <strong>Lista de fuentes autorizadas</strong> evitará todas las llamadas.</p>
</div>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Las direcciones listadas en <a class="reference internal" href="index.html#ip-filter-blocked-addresses"><span class="std std-ref">Direcciones bloqueadas por filtro IP</span></a> dan una pista de fuentes legítimas que deberían agregarse en la subsección <strong>Lista de fuentes autorizadas</strong>.</p>
</div>
<div class="section" id="roadwarrior-users">
<span id="id2"></span><h4>Usuarios itinerantes<a class="headerlink" href="#roadwarrior-users" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Algunos clientes de vPBX tienen usuarios itinerantes que viajan con frecuencia y se conectan desde redes externas, obligando a los Clientes a deshabilitar el mecanismo de seguridad del filtro IP.</p>
<p>Para resolver este problema, hay una opción de usuario llamada <strong>Llamadas desde IPs no autorizadas</strong> que permite a estos usuarios llamar desde IPs no autorizadas mientras las credenciales de los demás usuarios siguen protegidas con el mecanismo de filtro IP.</p>
<p>Cuando usuarios como estos llaman desde IPs no autorizadas, su cantidad de llamadas salientes concurrentes se limita a 1, 2 o 3 para evitar ser una brecha de seguridad.</p>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Solo las <strong>llamadas generadas</strong> (tanto internas como externas) están limitadas, las llamadas recibidas no se ven afectadas por esta configuración.</p>
</div>
<p>En resumen, con esta característica:</p>
<ul class="simple">
<li><p class="first">Hay usuarios que tienen permitido hacer una cantidad fija de llamadas desde IPs no autorizadas.</p>
</li>
<li><p class="first">Estas llamadas desde IPs no autorizadas son contadas y limitadas.</p>
</li>
</ul>
<p class="rubric">Ejemplo 1 - Cliente sin verificación de IP</p>
<p>No importa si el usuario tiene permitido hacer llamadas desde IPs no autorizadas, ya que no hay IPs no autorizadas.</p>
<p class="rubric">Ejemplo 2 - Cliente con verificación de IP</p>
<ul class="simple">
<li><p class="first">Si el usuario está llamando desde una de las IPs permitidas, no importa si el usuario tiene permitido hacer llamadas desde IPs no autorizadas: estas llamadas no se cuentan ni se limitan.</p>
</li>
<li><p class="first">Si el usuario NO está llamando desde una de las IPs permitidas, se verifica la cantidad de llamadas que este usuario tiene permitido hacer. Si el usuario tiene permitido hacer llamadas desde IPs no autorizadas y no ha excedido su límite, la llamada es concedida y contada.</p>
</li>
</ul>
<p>En resumen, si <strong>Llamadas desde IPs no autorizadas</strong> está configurado en <em>Ninguna</em>, el usuario debe cumplir con la política de IP del cliente.</p>
</div>
</div>
<span id="document-security_and_maintenance/security/concurrent_call_limit"></span><div class="section" id="concurrent-call-limit">
<h3>Límite de llamadas concurrentes<a class="headerlink" href="#concurrent-call-limit" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Este mecanismo <strong>limita el número de llamadas concurrentes</strong> de cada cliente/marca.</p>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Tanto las llamadas externas entrantes como las salientes serán limitadas.</p>
</div>
<p>Se puede configurar en dos niveles:</p>
<ul class="simple">
<li><p class="first">A nivel de Marca con la configuración de <strong>Máximo de llamadas</strong>.</p>
</li>
<li><p class="first">A nivel de Cliente con la configuración de <strong>Máximo de llamadas</strong>.</p>
</li>
</ul>
<p>La suma de <em>Máximo de llamadas</em> de los clientes de una marca puede ser mayor que el valor de <em>Máximo de llamadas</em> de la marca, no hay control para evitar esta situación.</p>
<div class="admonition warning">
<p class="first admonition-title">Advertencia</p>
<p class="last">Estos contadores son independientes. Siempre que uno de estos contadores alcance su límite, la llamada será denegada. Esto significa que una llamada de un cliente que no ha superado su propia configuración de <em>Máximo de llamadas</em> puede ser denegada si se ha superado el límite de la marca.</p>
</div>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Para deshabilitar este mecanismo, establezca su valor en 0.</p>
</div>
</div>
<span id="document-security_and_maintenance/security/current_day_max_usage"></span><div class="section" id="current-day-max-usage">
<span id="id1"></span><h3>Uso máximo del día actual<a class="headerlink" href="#current-day-max-usage" title="Enlazar permanentemente con este título">¶</a></h3>
<p>CGRateS calcula el precio de cada llamada saliente externa realizada a través de un Carrier no calificado externamente (ver <a class="reference internal" href="index.html#billing"><span class="std std-ref">Tarificación</span></a>).</p>
<p>La cantidad total de dinero gastada en un día puede ser limitada usando esta función, evitando el fraude de peaje de llamadas (o al menos reduciendo los daños).</p>
<p>Tenga en cuenta que <strong>dependiendo del método de facturación, el uso máximo del día actual se actualizará durante una llamada o solo al colgar la llamada</strong>:</p>
<blockquote>
<div><ul class="simple">
<li><p class="first"><strong>Postpago</strong>: cuando se cuelga una llamada, se actualiza el contador. Si se supera el umbral, todas las llamadas de ese cliente serán colgadas.</p>
</li>
<li><p class="first"><strong>Pseudo-prepago</strong>: igual que el postpago, ya que el crédito no se actualiza durante una llamada.</p>
</li>
<li><p class="first"><strong>Prepago</strong>: el crédito se actualiza durante una llamada, por lo que tan pronto como se alcance el uso máximo diario, todas las llamadas del cliente serán colgadas.</p>
</li>
</ul>
</div></blockquote>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Establezca un límite razonable para cada cliente para que el uso anormal de dinero sea bloqueado automáticamente.</p>
</div>
<p>Más información en <a class="reference internal" href="index.html#current-day-usages"><span class="std std-ref">Usos del día actual</span></a>.</p>
</div>
<span id="document-security_and_maintenance/security/antibruteforce"></span><div class="section" id="anti-brute-force-attacks">
<span id="id1"></span><h3>Ataques anti fuerza bruta<a class="headerlink" href="#anti-brute-force-attacks" title="Enlazar permanentemente con este título">¶</a></h3>
<p>IvozProvider incluye un simple ataque anti fuerza bruta en KamUsers que prohíbe fuentes después de fallos continuos de autenticación SIP desde la misma dirección IP.</p>
<p>Funciona así:</p>
<ul class="simple">
<li><p class="first">En fallos de SIP (solo en casos de usuario inválido o contraseña inválida), se incrementa un contador:</p>
<ul>
<li><dl class="first docutils">
<dt>Clave: <a class="reference external" href="mailto:fromUsername&#37;&#52;&#48;fromDomain">fromUsername<span>&#64;</span>fromDomain</a>::source_ip</dt>
<dd><ul class="first last">
<li><p class="first">por ejemplo, <a class="reference external" href="mailto:terminal&#37;&#52;&#48;vpbx&#46;domain&#46;net">terminal<span>&#64;</span>vpbx<span>&#46;</span>domain<span>&#46;</span>net</a>::1.2.3.4</p>
</li>
</ul>
</dd>
</dl>
</li>
</ul>
</li>
<li><p class="first">El contador se incrementa en cada fallo.</p>
</li>
<li><p class="first">Cuando el contador alcanza 100, esa fuente específica (usuario + dominio + ip) es prohibida durante 12 horas.</p>
</li>
</ul>
<p>Después de 12 horas, la fuente es aceptada nuevamente y:</p>
<ul class="simple">
<li><p class="first">El contador comienza a contar nuevamente desde 80.</p>
</li>
<li><p class="first">Si alcanza 100 nuevamente, se prohíbe por otras 12 horas.</p>
</li>
</ul>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Vea <a class="reference internal" href="index.html#brute-force-attacks"><span class="std std-ref">Ataques de fuerza bruta</span></a> para fuentes actualmente bloqueadas.</p>
</div>
</div>
</div>
</div>
<span id="document-security_and_maintenance/maintenance/index"></span><div class="section" id="troubleshooting">
<h2>Solución de problemas<a class="headerlink" href="#troubleshooting" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Esta sección habla sobre herramientas incluidas y no incluidas (pero recomendadas e instaladas en todas las instalaciones de producción de IvozProvider mantenidas por <a class="reference external" href="https://www.irontec.com">Irontec</a>) para solucionar cualquier problema que puedas tener:</p>
<div class="toctree-wrapper compound">
<span id="document-security_and_maintenance/maintenance/sip_captures"></span><div class="section" id="analyzing-sip-traffic">
<h3>Analizando tráfico SIP<a class="headerlink" href="#analyzing-sip-traffic" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Aunque todas las instalaciones de producción de IvozProvider mantenidas por <a class="reference external" href="https://www.irontec.com">Irontec</a> incluyen un <a class="reference external" href="https://www.sipcapture.org/">Servidor de Captura SIP Homer</a>, no está instalado en la versión independiente de IvozProvider. La razón detrás de esto es que preferimos que el impresionante stack SIPCAPTURE se ejecute en una máquina adicional.</p>
<p><a class="reference external" href="https://github.com/irontec/sngrep">sngrep Visor de flujo de mensajes SIP Ncurses desarrollado por Irontec</a> es actualmente la herramienta preferida para inspeccionar el tráfico SIP incluido en IvozProvider.</p>
<img alt="_images/sngrep_sample.png" src="_images/sngrep_sample.png" />
<div class="section" id="sngrep">
<h4>sngrep<a class="headerlink" href="#sngrep" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Ver tráfico SIP en vivo (todo):</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">sngrep</span>
</pre></div>
</div>
<p>Ver tráfico SIP en vivo relacionado con llamadas:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">sngrep -c</span>
</pre></div>
</div>
<p>Ver tráfico SIP en vivo y capturar RTP también:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">sngrep -c -r</span>
</pre></div>
</div>
<p>Para más referencia, visite el <a class="reference external" href="https://github.com/irontec/sngrep">sitio oficial de sngrep</a>.</p>
</div>
<div class="section" id="other-capturing-tools">
<h4>Otras herramientas de captura<a class="headerlink" href="#other-capturing-tools" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Aunque sngrep es nuestra herramienta de captura preferida, IvozProvider incluye otras herramientas para capturar tráfico SIP/RTP, como <a class="reference external" href="http://www.tcpdump.org">tcpdump</a> y <a class="reference external" href="http://ngrep.sourceforge.net">ngrep</a>.</p>
</div>
</div>
<span id="document-security_and_maintenance/maintenance/log_viewer"></span><div class="section" id="log-viewer">
<h3>Visor de registros<a class="headerlink" href="#log-viewer" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Aunque todas las instalaciones de producción de IvozProvider mantenidas por <a class="reference external" href="https://www.irontec.com">Irontec</a> incluyen un <a class="reference external" href="https://www.elastic.co/elk-stack">stack ELK</a>, <a class="reference external" href="https://www.freedesktop.org/software/systemd/man/journalctl.html">journalctl</a> es actualmente la única herramienta incluida con IvozProvider para inspeccionar los registros generados por los diferentes elementos de la solución en el pasado.</p>
<div class="section" id="asterisk-cli">
<h4>CLI de Asterisk<a class="headerlink" href="#asterisk-cli" title="Enlazar permanentemente con este título">¶</a></h4>
<p>El CLI de Asterisk también proporciona toneladas de información en tiempo real y está formateado hermosamente para detectar posibles errores de configuración:</p>
<img alt="_images/asterisk_cli.png" src="_images/asterisk_cli.png" />
<p>Puedes acceder al CLI de Asterisk escribiendo <em>ast</em> en la terminal.</p>
</div>
<div class="section" id="kamailio-realtime-log-viewing">
<h4>Visualización de registros en tiempo real de Kamailio<a class="headerlink" href="#kamailio-realtime-log-viewing" title="Enlazar permanentemente con este título">¶</a></h4>
<p>También puedes ver los registros de Kamailio en tiempo real escribiendo <em>kamtail-proxyusers</em> y <em>kamtail-proxytrunks</em> en la terminal:</p>
<img alt="_images/kamtail.png" src="_images/kamtail.png" />
</div>
</div>
<span id="document-security_and_maintenance/maintenance/other_tools"></span><div class="section" id="other-tools">
<h3>Otras herramientas<a class="headerlink" href="#other-tools" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Aunque IvozProvider no incluye ninguna de las herramientas mencionadas aquí, las consideramos cruciales para manejar entornos de producción.</p>
<p>Aquí enumeramos las herramientas configuradas en todas las instalaciones de producción de IvozProvider mantenidas por <a class="reference external" href="https://www.irontec.com">Irontec</a>.</p>
<div class="section" id="metrics-viewer">
<h4>Visor de métricas<a class="headerlink" href="#metrics-viewer" title="Enlazar permanentemente con este título">¶</a></h4>
<p><a class="reference external" href="https://www.influxdata.com/time-series-platform/chronograf/">Interfaz web de Chronograf</a> mostrando información recopilada por los demás <a class="reference external" href="https://www.influxdata.com/time-series-platform/">componentes del TICK Stack</a>, nos permite mostrar:</p>
<ul class="simple">
<li><p class="first">Métricas del sistema en tiempo real.</p>
</li>
<li><p class="first">Métricas VoIP en tiempo real.</p>
</li>
<li><p class="first">Panel personalizado por perfil.</p>
</li>
</ul>
<p>El <a class="reference external" href="https://www.influxdata.com/time-series-platform/kapacitor/">componente Kapacitor</a> permite configurar alarmas cuando ocurren métricas anómalas o se superan ciertos umbrales.</p>
</div>
<div class="section" id="active-monitoring">
<h4>Monitoreo activo<a class="headerlink" href="#active-monitoring" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Todas las instalaciones de IvozProvider mantenidas por <a class="reference external" href="https://www.irontec.com">Irontec</a> son monitoreadas exhaustivamente para resolver problemas lo antes posible y prevenir problemas futuros cuando sea posible.</p>
</div>
</div>
</div>
</div>
</div>
<div class="toctree-wrapper compound">
<span id="document-api_rest/introduction"></span><div class="section" id="introduction-to-ivozprovider-api">
<h2>Introducción a la API de IvozProvider<a class="headerlink" href="#introduction-to-ivozprovider-api" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Ivoz Provider ofrece tres APIs REST impulsadas por <a class="reference external" href="https://en.wikipedia.org/wiki/HATEOAS">hipermedia</a>, una para cada rol de administrador. Las tres se han construido sobre la <a class="reference external" href="https://www.openapis.org/">Especificación OpenAPI</a>, una especificación abierta impulsada por la comunidad dentro de la Iniciativa OpenAPI, un Proyecto Colaborativo de la Fundación Linux. Esta iniciativa cuenta con el apoyo de algunas empresas tecnológicas líderes como Adobe, Google, IBM, Microsoft y <a class="reference external" href="https://www.openapis.org/membership/members)">más</a>.</p>
<p>Soportamos las siguientes características:</p>
<blockquote>
<div><ul class="simple">
<li><p class="first">Especificación legible para humanos, incluyendo un entorno de pruebas</p>
</li>
<li><p class="first">Autenticación basada en JSON Web Token (JWT)</p>
</li>
<li><p class="first">Negociación del tipo de contenido de solicitud y respuesta</p>
</li>
<li><p class="first">Paginación de resultados</p>
</li>
<li><p class="first">Filtros de propiedades de respuesta</p>
</li>
<li><p class="first">Filtros de resultados</p>
</li>
<li><p class="first">Ordenación de resultados</p>
</li>
<li><p class="first">Capa de seguridad: Control de acceso a recursos y registros</p>
</li>
</ul>
</div></blockquote>
</div>
<span id="document-api_rest/multilevel"></span><div class="section" id="multi-level-api">
<h2>API multinivel<a class="headerlink" href="#multi-level-api" title="Enlazar permanentemente con este título">¶</a></h2>
<p>La API de IvozProvider está dividida en los mismos tres niveles que el portal de administración web más la API de usuario:</p>
<ul class="simple">
<li>God</li>
<li><p class="first">Marca</p>
</li>
<li><p class="first">Cliente</p>
</li>
<li><p class="first">Usuario</p>
</li>
</ul>
<p>Esta división permite que diferentes roles con diferentes responsabilidades se integren sin comprometer la seguridad (leer, editar, actualizar o eliminar los datos que no deberían).</p>
<p>Si revisas las <a class="reference external" href="https://github.com/irontec/ivozprovider/blob/main/web/rest/brand/config/api/raw/provider.yml">políticas de seguridad</a> (atributos read_access_control y write_access_control), verás que aplicamos filtros de lectura y validaciones de escritura basadas en la información del usuario (token). Un enfoque de API único requeriría validaciones complejas más propensas a fallos, introducir errores y requerir consultas enormes que afectarían el rendimiento.</p>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Es por eso que lo dividimos en tres APIs con <strong>mecanismo de suplantación</strong> para moverse entre ellas. Este mecanismo se explica en la sección <a class="reference internal" href="index.html#use-case"><span class="std std-ref">Caso de Uso</span></a>.</p>
</div>
<p>Para acceder a cada nivel, <strong>necesitarás una URL y credenciales correspondientes al nivel</strong>:</p>
<p class="rubric">Acceso a la API God</p>
<ul class="simple">
<li><p class="first">Credenciales: Credenciales God definidas en <a class="reference internal" href="index.html#main-operators"><span class="std std-ref">Operadores de Plataforma</span></a>.</p>
</li>
</ul>
<p class="rubric">Acceso a la API de Marca</p>
<ul class="simple">
<li><p class="first">Credenciales: Credenciales de Marca definidas en <a class="reference internal" href="index.html#brand-operators"><span class="std std-ref">Operadores de Marca</span></a>.</p>
</li>
</ul>
<p class="rubric">Acceso a la API de Cliente</p>
<ul class="simple">
<li><p class="first">Credenciales: Credenciales de Cliente definidas en <a class="reference internal" href="index.html#client-operators"><span class="std std-ref">Operadores de Clientes</span></a>.</p>
</li>
</ul>
<p class="rubric">Acceso a la API de Usuario</p>
<ul class="simple">
<li><p class="first">Credenciales: Credenciales de Usuario definidas en <a class="reference internal" href="index.html#users"><span class="std std-ref">Usuarios</span></a>.</p>
</li>
</ul>
<div class="admonition warning">
<p class="first admonition-title">Advertencia</p>
<p class="last">Todos los nombres de usuario de las credenciales son únicos a nivel de marca. Es por eso que se necesita el dúo <em>nombre de usuario + URL de la marca</em> para identificar a un usuario (tanto en la API como en el portal web).</p>
</div>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Como tanto las URLs de marca como de cliente están vinculadas internamente a la misma marca (cliente dentro de esa marca), también es posible acceder a la API de cliente usando una URL de marca + /api/client.</p>
</div>
</div>
<span id="document-api_rest/web_client"></span><div class="section" id="built-in-web-client">
<h2>Cliente web incorporado<a class="headerlink" href="#built-in-web-client" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Las APIs vienen con su propio cliente web para que puedas probarlas fácilmente. Por ejemplo, ve a <a class="reference external" href="/api/platform/index.html">API de la Plataforma</a>.</p>
<img alt="_images/web-client.png" class="align-center" src="_images/web-client.png" />
<p>Necesitarás obtener un token de acceso con credenciales de administrador válidas antes de cualquier otra cosa. Puedes hacerlo desde la sección [Auth] &gt; [POST /admin_login]. Haz clic en el botón <cite>Probar</cite>, ingresa tus credenciales y haz clic en <cite>ejecutar</cite> para enviar la solicitud. Deberías recibir una respuesta que contenga un token y un token de actualización.</p>
<img alt="_images/access-token.png" class="align-center" src="_images/access-token.png" />
<p>Copia el token y configúralo en el botón <cite>Autorizar</cite> en la parte superior de la página. El ttl (tiempo de vida) del token es de una hora por defecto, puedes usar el token de actualización para obtener uno nuevo sin enviar las credenciales de administrador nuevamente.</p>
<p>Una vez que hayas configurado correctamente tu token, haz clic en el endpoint [GET /administrators], <cite>Probar</cite> y <cite>Ejecutar</cite>. También puedes cambiar el <cite>Tipo de contenido de la respuesta</cite> (JSON o LD+JSON para este endpoint).</p>
<img alt="_images/response.png" class="align-center" src="_images/response.png" />
<p>Es posible filtrar y ordenar la respuesta usando los campos de entrada <cite>Parámetros</cite> también.</p>
<p class="rubric">Especificación</p>
<p>Puedes consultar los modelos de solicitud y respuesta desde el propio cliente web.</p>
<img alt="_images/spec.png" class="align-center" src="_images/spec.png" />
</div>
<span id="document-api_rest/integrations"></span><div class="section" id="third-party-integrations">
<h2>Integraciones de terceros<a class="headerlink" href="#third-party-integrations" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Ivoz Provider utiliza la <strong>Especificación OpenAPI 2.0</strong> (que es idéntica a la especificación Swagger 2.0 antes de que se renombrara a &#8220;Especificación OpenAPI&#8221;).</p>
<p>Se supone que las APIs son la forma de integrar aplicaciones de terceros con IvozProvider. Algunas herramientas de la comunidad, como <a class="reference external" href="https://github.com/swagger-api/swagger-codegen">swagger-codegen</a>, pueden ser de gran ayuda durante el desarrollo del cliente. Según su página de github, se admite la generación automática de código para los siguientes lenguajes/marcos:</p>
<blockquote>
<div><ul class="simple">
<li>ActionScript</li>
<li>Ada</li>
<li>Apex</li>
<li>Bash</li>
<li><p class="first">C# (.net 2.0, 3.5 o posterior)</p>
</li>
<li>C++ (cpprest, Qt5, Tizen)</li>
<li>Clojure</li>
<li>Dart</li>
<li>Elixir</li>
<li>Elm</li>
<li>Eiffel</li>
<li>Erlang</li>
<li>Go</li>
<li>Groovy</li>
<li>Haskell (http-client, Servant)</li>
<li>Java (Jersey1.x, Jersey2.x, OkHttp, Retrofit1.x, Retrofit2.x, Feign, RestTemplate, RESTEasy, Vertx, Google API Client Library for Java, Rest-assured)</li>
<li>Kotlin</li>
<li>Lua</li>
<li><p class="first">Node.js (ES5, ES6, AngularJS con anotaciones de Google Closure Compiler)</p>
</li>
<li>Objective-C</li>
<li>Perl</li>
<li>PHP</li>
<li>PowerShell</li>
<li>Python</li>
<li>R</li>
<li>Ruby</li>
<li>Rust (rust, rust-server)</li>
<li>Scala (akka, http4s, swagger-async-httpclient)</li>
<li>Swift (2.x, 3.x, 4.x)</li>
<li>Typescript (Angular1.x, Angular2.x, Fetch, jQuery, Node)</li>
</ul>
</div></blockquote>
<p>Encontrarás las especificaciones de la API en las siguientes URLs:</p>
<blockquote>
<div><ul class="simple">
<li><p class="first"><a class="reference external" href="/api/platform/docs.json">Especificación de la API de la Plataforma</a></p>
</li>
<li><p class="first"><a class="reference external" href="/api/brand/docs.json">Especificación de la API de la Marca</a></p>
</li>
<li><p class="first"><a class="reference external" href="/api/client/docs.json">Especificación de la API del Cliente</a></p>
</li>
</ul>
</div></blockquote>
</div>
<span id="document-api_rest/use_case"></span><div class="section" id="use-case">
<span id="id1"></span><h2>Caso de Uso<a class="headerlink" href="#use-case" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Pongamos un pequeño caso de uso como ejemplo: Un administrador de la plataforma quiere obtener las empresas de una marca específica (las empresas solo se exponen en la API de Marca). La operación sería:</p>
<p class="rubric">En la API de la plataforma (<a class="reference external" href="https://your-domain/api/platform">https://your-domain/api/platform</a>)</p>
<ol class="arabic simple">
<li><p class="first">Iniciar sesión (solicitar un token) como administrador god en /admin_login</p>
</li>
<li><p class="first">Buscar la marca objetivo en /brands</p>
</li>
</ol>
<p class="rubric">En la API de Marca (<a class="reference external" href="https://brand-domain/api/brand">https://brand-domain/api/brand</a>)</p>
<ol class="arabic simple">
<li><p class="first">Suplantar como administrador de marca en Auth&gt; /token/exchange (requiere un token god y el Id de la marca. También puedes suplantar por el nombre de usuario de un administrador de marca en lugar de un id de marca)</p>
</li>
<li><p class="first">Solicitar las empresas de la marca usando el endpoint /companies</p>
</li>
</ol>
</div>
<span id="document-api_rest/acls"></span><div class="section" id="acls">
<span id="id1"></span><h2>ACLs<a class="headerlink" href="#acls" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Las credenciales utilizadas para el acceso web pueden ser utilizadas con su nivel correspondiente de API. Estos administradores (global, marca, cliente) tienen acceso completo a todos los endpoints de su nivel.</p>
<p>Desde la versión 2.15, también es posible crear <strong>administradores restringidos</strong>.</p>
<div class="section" id="restricted-global-brand-administrators">
<h3>Administradores globales/marca restringidos<a class="headerlink" href="#restricted-global-brand-administrators" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Habilitar la opción <strong>Restringido</strong> para el administrador global/marca hace que este administrador sea especial:</p>
<ul class="simple">
<li><p class="first">No se puede usar más para acceder al portal web.</p>
</li>
<li><p class="first">El acceso completo a los endpoints de la API está restringido a acceso de solo lectura a esos endpoints.</p>
</li>
</ul>
<p>Los privilegios se pueden ajustar en la subsección <em>Lista de privilegios de acceso del administrador</em>, donde puedes habilitar/deshabilitar para cada endpoint:</p>
<blockquote>
<div><dl class="docutils">
<dt>Privilegio de creación</dt>
<dd><p class="first last">El administrador con este privilegio puede crear nuevos elementos del endpoint dado.</p>
</dd>
<dt>Privilegio de lectura</dt>
<dd><p class="first last">El administrador con este privilegio puede leer elementos existentes del endpoint dado. Solo puede ver elementos existentes, no se permite la modificación.</p>
</dd>
<dt>Privilegio de actualización</dt>
<dd><p class="first last">El administrador con este privilegio puede modificar elementos existentes del endpoint dado.</p>
</dd>
<dt>Privilegio de eliminación</dt>
<dd><p class="first last">El administrador con este privilegio puede eliminar elementos existentes del endpoint dado.</p>
</dd>
</dl>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<ul class="last simple">
<li><p class="first">Cambiar un administrador no restringido a restringido lo convierte en un administrador capaz de usar la API solo en modo lectura.</p>
</li>
<li><p class="first">Cambiar un administrador restringido a no restringido lo convierte en un administrador capaz de usar la web y la API con acceso completo.</p>
</li>
</ul>
</div>
<div class="admonition hint">
<p class="first admonition-title">Consejo</p>
<p class="last">Puedes seleccionar fácilmente múltiples endpoints en la <em>Lista de privilegios de acceso del administrador</em> y revocar/otorgar todos ellos.</p>
</div>
</div>
<div class="section" id="client-restricted-administrators">
<h3>Administradores restringidos de clientes<a class="headerlink" href="#client-restricted-administrators" title="Enlazar permanentemente con este título">¶</a></h3>
<p>A diferencia de los administradores globales/marca, <strong>los administradores restringidos de clientes pueden iniciar sesión en el portal web del cliente</strong>. Como consecuencia, los privilegios de un administrador de cliente dado se aplican a:</p>
<ul class="simple">
<li><p class="first">Privilegios para integraciones de API.</p>
</li>
<li><p class="first">Acceso web a secciones y operaciones disponibles en esas secciones.</p>
</li>
</ul>
<p>Los privilegios también se pueden ajustar en la subsección <em>Lista de privilegios de acceso del administrador</em>.</p>
<p class="rubric">Ejemplo 1: Administrador de cliente solo para grabaciones</p>
<p>Para crear un administrador de cliente que solo vea la sección de Grabaciones:</p>
<ol class="arabic simple">
<li><p class="first">Crea un nuevo administrador de cliente restringido o convierte uno no restringido en restringido.</p>
</li>
<li><p class="first">Accede a la <strong>Lista de privilegios de acceso del administrador</strong>, selecciona todos los endpoints y presiona <strong>Revocar acceso</strong>.</p>
</li>
<li><p class="first">Edita el endpoint <em>Grabaciones</em> y habilita el acceso de lectura.</p>
</li>
</ol>
<p class="rubric">Ejemplo 2: Administrador de cliente solo para faxes</p>
<p>Para crear un administrador de cliente que solo vea la sección de Faxes y pueda enviar/recibir faxes:</p>
<ol class="arabic simple">
<li><p class="first">Crea un nuevo administrador de cliente restringido o convierte uno no restringido en restringido.</p>
</li>
<li><p class="first">Accede a la <strong>Lista de privilegios de acceso del administrador</strong>, selecciona todos los endpoints y presiona <strong>Revocar acceso</strong>.</p>
</li>
<li><p class="first">Edita el endpoint <em>Faxes</em> y habilita el acceso de lectura.</p>
</li>
<li><p class="first">Edita el endpoint <em>FaxesFiles</em> y habilita el acceso de creación/actualización.</p>
</li>
</ol>
</div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016-2019, Irontec.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
        <span class="fa fa-book"> Other Versions</span>
        v: main
        <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
        <dl>
            <dt>Branches</dt>
            <dd><a href="../artemis/index.html">artemis</a></dd>
            <dd><a href="../halliday/index.html">halliday</a></dd>
            <dd><a href="index.html">main</a></dd>
            <dd><a href="../oasis/index.html">oasis</a></dd>
            <dd><a href="../tempest/index.html">tempest</a></dd>
        </dl>
    </div>
</div>


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'tempest',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="_static/translations.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>