

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Configurar Contrato de Peering &mdash; documentación de IvozProvider - Oasis</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/banner.css" type="text/css" />
  

  
        <link rel="index" title="Índice"
              href="../genindex.html"/>
        <link rel="search" title="Búsqueda" href="../search.html"/>
    <link rel="top" title="documentación de IvozProvider - Oasis" href="../index.html"/>
        <link rel="up" title="Recibir llamadas externas" href="index.html"/>
        <link rel="next" title="Dar de alta un DDI externo" href="configure_ddi.html"/>
        <link rel="prev" title="Transformaciones numéricas" href="numeric_transformations.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> IvozProvider
          

          
          </a>

          
            
            
              <div class="version">
                1.7
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Basic Concepts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../intro/index.html">Introducción a Ivozprovider</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../architecture/index.html">Arquitectura general de la plataforma</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../operation_roles/index.html">Roles de la plataforma</a></li>
</ul>
<p class="caption"><span class="caption-text">Minimum Configuration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation/index.html">Instalación inicial</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../internal_calls/index.html">Realizar llamadas internas</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Recibir llamadas externas</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="numeric_transformations.html">Transformaciones numéricas</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Configurar Contrato de Peering</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#peering-contract-basic-data">Datos básicos</a></li>
<li class="toctree-l3"><a class="reference internal" href="#peer-servers">Peer Servers</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sip-register">Registro SIP</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="configure_ddi.html">Dar de alta un DDI externo</a></li>
<li class="toctree-l2"><a class="reference internal" href="configure_ddi.html#configure-incoming-routes">Configurar tratamiento en entrada</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../external_outgoing_calls/index.html">Realizar llamadas externas</a></li>
</ul>
<p class="caption"><span class="caption-text">Advanced Configuration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../pbx_features/index.html">Funcionalidades de PBX</a></li>
<li class="toctree-l1"><a class="reference internal" href="../retail/index.html">Clientes Retail</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../billing_and_invoices/index.html">Tarificación y facturación</a></li>
<li class="toctree-l1"><a class="reference internal" href="../provisioning/index.html">Provisión de terminales</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faxing/index.html">Sistema de Fax Virtual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userportal/index.html">Portal de usuario</a></li>
</ul>
<p class="caption"><span class="caption-text">Security and Maintenance</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../security/index.html">Elementos de seguridad</a></li>
<li class="toctree-l1"><a class="reference internal" href="../maintenance/index.html">Mantenimiento de la solución</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">IvozProvider</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">Recibir llamadas externas</a> &raquo;</li>
      
    <li>Configurar Contrato de Peering</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/external_incoming_calls/peering_contracts.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="configuring-a-peering-contract">
<span id="peering-contracts"></span><h1>Configurar Contrato de Peering<a class="headerlink" href="#configuring-a-peering-contract" title="Enlazar permanentemente con este título">¶</a></h1>
<p>En IvozProvider se entiende por <strong>Contrato de Peering</strong> el acuerdo entre un <strong>Operador de Marca</strong> y un Operador VoIP para sacar y recibir llamadas.</p>
<p>IvozProvider permite integrarse con Operadores IP por medio de la sección <strong>Contratos de Peering</strong> que pasamos a describir:</p>
<img alt="../_images/peeringcontract_section1.png" class="align-center" src="../_images/peeringcontract_section1.png" />
<div class="section" id="peering-contract-basic-data">
<h2>Datos básicos<a class="headerlink" href="#peering-contract-basic-data" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Analicemos los campos de un PeeringContract de ejemplo:</p>
<img alt="../_images/peeringcontract1.png" class="align-center" src="../_images/peeringcontract1.png" />
<p>Si entramos a editar este Contrato de Peering concreto:</p>
<img alt="../_images/peeringcontract_edit1.png" class="align-center" src="../_images/peeringcontract_edit1.png" />
<dl class="glossary docutils">
<dt id="term-name">Nombre</dt>
<dd><p class="first last">Se utilizará para referencia a este Contrato de Peering.</p>
</dd>
<dt id="term-description">Descripción</dt>
<dd><p class="first last">Un campo adicional para escribir algún detalle.</p>
</dd>
<dt id="term-numeric-transformation">Transformación numérica</dt>
<dd><p class="first last">Transformaciones que se aplicarán al origen y al destino a lasnumeraciones que entren o salgan por este contrato de peering (ver <a class="reference internal" href="numeric_transformations.html#numeric-transformations"><span class="std std-ref">Transformaciones numéricas</span></a>).</p>
</dd>
<dt id="term-external-tarification">External tarification</dt>
<dd><p class="first last">Requiere del módulo de tarificación externa y permite tarificar llamadas entrantes a numeraciones especiales. Consultar a los <a class="reference internal" href="../intro/getting_help.html#getting-help"><span class="std std-ref">desarrolladores de la solución</span></a> en caso de estar interesados.</p>
</dd>
</dl>
<div class="admonition important">
<p class="first admonition-title">Importante</p>
<p class="last">Los campos marcados con una estrella roja son obligatorios.</p>
</div>
</div>
<div class="section" id="peer-servers">
<h2>Peer Servers<a class="headerlink" href="#peer-servers" title="Enlazar permanentemente con este título">¶</a></h2>
<p>El concepto de <strong>PeerServer</strong> se refiere a los distintos servidores SIP que puede tener un Operador IP para servir su dominio SIP. Para definir los PeerServers del OPERADOR que acabamos de definir, hay que pulsar este botón:</p>
<img alt="../_images/peerservers1.png" class="align-center" src="../_images/peerservers1.png" />
<p>Tal y como indica el 0, no hay ningún PeerServer definido, por lo que añadimos uno:</p>
<img alt="../_images/peerservers_add1.png" class="align-center" src="../_images/peerservers_add1.png" />
<dl class="glossary docutils">
<dt id="term-4">Nombre</dt>
<dd><p class="first last">Se utilizará para referencia a este PeerServer.</p>
</dd>
<dt id="term-5">Descripción</dt>
<dd><p class="first last">Un campo adicional para escribir algún detalle.</p>
</dd>
<dt id="term-sip-proxy">SIP Proxy</dt>
<dd><p class="first last">Dirección IP (o registro DNS) del PeerServer. Si utiliza un puerto        distinto a 5060, se puede indicar con &#8216;:&#8217;.</p>
</dd>
<dt id="term-uri-scheme">Esquema URI</dt>
<dd><p class="first last">Los esquemas soportados son sip y sips. Dejar en &#8216;sip&#8217; en caso de duda.</p>
</dd>
<dt id="term-transport">Transporte</dt>
<dd><p class="first last">Los protocolos de transporte SIP soportados. En caso de duda, dejar &#8216;udp&#8217;.</p>
</dd>
<dt id="term-outbound-proxy">Outbound Proxy</dt>
<dd><p class="first last">Normalmente se deja vacío o se pone la IP del dominio indicado en <strong>SIP Proxy</strong> (para evitar resolución de dominios y hacer que el mensaje SIP contenga el dominio en lugar de una IP). Funciona como un proxy web:en lugar de enviar los mensajes SIP al destino de <strong>SIP Proxy</strong>, los envía a la IP:PUERTO de este campo.</p>
</dd>
<dt id="term-requires-authentication">Requiere autenticación</dt>
<dd><p class="first last">Existen contratos de Peering que nos validarán por IP, otros necesitarán que nos autentiquemos en cada sesión que queramos establecer. En caso de ser del último grupo, este selector nos permite introducir un usuario y una contraseña para responder a esa autenticación.</p>
</dd>
<dt id="term-call-origin-header">Cabecera de origen de llamada</dt>
<dd><p class="first last">Algunos operadores recogen el origen del From. Otros utilizan el From para validar la cuenta de cliente y necesitan cabeceras adicionales para recoger el origen. En caso de duda, marcar <strong>PAI</strong>.</p>
</dd>
<dt id="term-r-uri-transformations-before-numeric-transformations">Transformaciones R-URI previas a las transformaciones numéricas</dt>
<dd><p class="first last">Permiten realizar cambios estáticos al destino de la llamada antes de aplicar las reglas de transformación numéricas mencionadas en <a class="reference internal" href="numeric_transformations.html#numeric-transformations"><span class="std std-ref">Transformaciones numéricas</span></a>. Se pueden quitar unos dígitos del comienzo, añadir un prefijo después e, incluso, añadir parámetros a la URI siguiendo el formato indicado. En caso de duda, dejar todo el bloque en blanco.</p>
</dd>
<dt id="term-from-header-customization">Personalización de la cabecera From</dt>
<dd><p class="first last">Los operadores que muestren el origen en otras cabeceras (PAI/RPID), es posible que nos soliciten que el From User sea el número de cuenta de cliente y el From Domain (por ejemplo), su dominio SIP. En caso de duda, dejar en blanco.</p>
</dd>
</dl>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Existen muchos campos para poder establecer <em>peering</em> con operadores de todo tipo, pero lo habitual será poner solo nombre y SIP Proxy (para los operadores que nos validen por IP) o nombre, SIP Proxy y Autenticación.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Advertencia</p>
<p class="last">En caso de definir múltiples PeerServers para un PeeringContract, IvozProvider hará balanceo y failover utilizando todos. Es decir, a veces hablará a uno y otras veces a otro. En caso de que uno no le conteste, lo intentará con el resto hasta dar con uno que conteste.</p>
</div>
</div>
<div class="section" id="sip-register">
<h2>Registro SIP<a class="headerlink" href="#sip-register" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Hay operadores que exigen que tengamos un <a class="reference external" href="https://tools.ietf.org/html/rfc3261#section-10">Registro SIP</a> activo para que nos metan las llamadas de nuestras numeraciones. Es más, existen operadores que exigen un registro activo para poder sacar llamadas a través de ellos.</p>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">IvozProvider soporta <em>peerings</em> de todo tipo, pero recomendamos acordar <em>peerings de tú a tú</em>: sin autenticación, sin registro y validados por IP. Esto evita tráfico innecesario (autenticación en cada sesión y registros periódicos) y simplifica la configuración, quedándose casi todo con los valores por defecto.</p>
</div>
<p>Por este motivo IvozProvider permite configurar registros SIP periódicos por medio del siguiente botón:</p>
<img alt="../_images/sip_registers1.png" src="../_images/sip_registers1.png" />
<p>Si creamos uno nuevo, nos encontramos con la siguiente ventana:</p>
<img alt="../_images/sip_registers_add1.png" src="../_images/sip_registers_add1.png" />
<dl class="glossary docutils">
<dt id="term-username">Nombre de usuario</dt>
<dd><p class="first last">Número de cuenta de cliente o similar proporcionada por el operador que exige registro SIP.</p>
</dd>
<dt id="term-domain">Dominio</dt>
<dd><p class="first last">Dominio o IP del servidor de registros. Habitualmente el mismo que sirve de Proxy SIP en el PeerServer.</p>
</dd>
<dt id="term-ddi">DDI</dt>
<dd><p class="first last">Se envía en la cabecera Contact y tiene que ser único a nivel de toda laplataforma. En PeeringContracts con un DDI asociado, se recomienda meter ese DDI. En caso de múltiples DDIs asociados, se recomienda meter uno de ellos. En caso de ningún DDI asociado, se recomienda meter un valor único (cualquier valor que te deje guardar).</p>
</dd>
<dt id="term-user">Usuario</dt>
<dd><p class="first last">Usuario de autenticación, prácticamente siempre es igual al &#8220;Nombre de usuario&#8221; por lo que se recomienda dejar en blanco.</p>
</dd>
<dt id="term-register-server-uri">URI Servidor de registro</dt>
<dd><p class="first last">Normalmente se puede dejar en blanco ya que se deduce del Dominio introducido. Si no fuera así, poner una dirección IP con &#8216;sip:&#8217; por delante.</p>
</dd>
<dt id="term-realm">Realm</dt>
<dd><p class="first last">Dejar en blanco para aceptar el propuesto por el extremo contrario.Definir solo si de estar familiarizado el mecanismo de autorización de SIP y saber lo que este campo implica.</p>
</dd>
<dt id="term-expire">Expire</dt>
<dd><p class="first last">Tiempo que IvozProvider sugerirá como tiempo de expiración del registro.</p>
</dd>
</dl>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Al igual que ocurre con los PeerServers, existen múltiples campos. Hay que tener en cuenta, no obstante, que la mayoría de operadores no deberían de exigir registro y, los que lo hagan, habitualmente solo requerirán de usuario, dominio y contraseña.</p>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="configure_ddi.html" class="btn btn-neutral float-right" title="Dar de alta un DDI externo" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="numeric_transformations.html" class="btn btn-neutral" title="Transformaciones numéricas" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016-2017, Irontec.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
        <span class="fa fa-book"> Other Versions</span>
        v: oasis
        <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
        <dl>
            <dt>Branches</dt>
            <dd><a href="../../artemis/index.html">artemis</a></dd>
            <dd><a href="../../halliday/index.html">halliday</a></dd>
            <dd><a href="../../main/index.html">main</a></dd>
            <dd><a href="peering_contracts.html">oasis</a></dd>
            <dd><a href="../../tempest/index.html">tempest</a></dd>
        </dl>
    </div>
</div>


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'Oasis',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/translations.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>