<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">


<html xmlns="http://www.w3.org/1999/xhtml" lang="es">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Friends remotos</title>
    
    <link rel="stylesheet" href="../../../../../_static/epub.css" type="text/css" />
    <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../../../_static/banner.css" type="text/css" /> 
  </head>
  <body role="document">

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../../genindex.xhtml" title="Índice General"
             accesskey="I">índice</a></li>
        <li class="right" >
          <a href="internal_friends.xhtml" title="Friends internos"
             accesskey="N">siguiente</a> |</li>
        <li class="right" >
          <a href="index.xhtml" title="Friends"
             accesskey="P">anterior</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../../../index.xhtml">documentación de IvozProvider - tempest</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../../index.xhtml" >Configuración del Cliente</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../../index.xhtml" >Clientes vPBX</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="../index.xhtml" >Items enrutables</a> &#187;</li>
          <li class="nav-item nav-item-4"><a href="index.xhtml" accesskey="U">Friends</a> &#187;</li> 
      </ul>
    </div>

    <div class="document">
      <div class="documentwrapper">
          <div class="body" role="main">
            
  <div class="section" id="remote-friends">
<h1>Friends remotos</h1>
<p>Los friends remotos conectan un cliente vPBX con una entidad SIP externa.</p>
<div class="section" id="types-of-remote-friends">
<h2>Tipos de friends remotos</h2>
<p>Hay 2 tipos principales de PBX SIP que se pueden integrar con IvozProvider:</p>
<ul class="simple">
<li><p class="first"><strong>PBX de conexión directa</strong> (Modo de conectividad: directo): IvozProvider debe poder hablar SIP directamente con este tipo de friends simplemente redirigiendo el tráfico al puerto adecuado de la dirección IP pública del PBX.</p>
</li>
<li><p class="first"><strong>PBX detrás de NAT</strong> (Modo de conectividad: registrar): No accesible directamente. Este tipo de PBX debe registrarse en IvozProvider (al igual que todos los <a class="reference internal" href="../../terminals.xhtml#terminals"><span class="std std-ref">Terminales</span></a>).</p>
</li>
</ul>
</div>
<div class="section" id="what-do-remote-friends-allow">
<h2>¿Qué permiten los friends remotos?</h2>
<p>Esta sección permite no solo la comunicación entre usuarios en ambos extremos del SIP <em>trunk</em>, sino también:</p>
<ul class="simple">
<li><p class="first">Los usuarios &#8220;del otro lado&#8221; pueden llamar a la red pública igual que los <a class="reference internal" href="../../users.xhtml#users"><span class="std std-ref">Usuarios</span></a> nativos de Ivozprovider.</p>
</li>
<li><p class="first">Las llamadas a la red pública pueden ser enrutadas al otro extremo del SIP <em>trunk</em>.</p>
</li>
</ul>
</div>
<div class="section" id="what-kind-of-calls-can-be-routed-through-a-remote-friend">
<h2>¿Qué tipo de llamadas se pueden enrutar a través de un <em>friend remoto</em>?</h2>
<p>IvozProvider debe saber qué llamadas deben ser enrutadas a los diferentes <em>friends remotos</em> definidos. Para eso, el <strong>administrador del cliente</strong> configurará expresiones regulares que describan los números que <em>se pueden alcanzar</em> a través del <strong>friend</strong>.</p>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Las <a class="reference internal" href="../../extensions.xhtml#extensions"><span class="std std-ref">extensiones</span></a> internas tienen prioridad sobre cualquier expresión definida en los <em>friends</em>.</p>
</div>
<div class="admonition important">
<p class="first admonition-title">Importante</p>
<p class="last">Evite las expresiones regulares PCRE en la configuración de friends: use [0-9] en lugar de \d.</p>
</div>
</div>
<div class="section" id="configuration-of-remote-friends">
<h2>Configuración de friends remotos</h2>
<p>La configuración de <strong>Friend</strong> es una combinación entre un <strong>Usuario</strong> y un <strong>Terminal</strong></p>
<p>Estos son los ajustes configurables de los <em>friends</em>:</p>
<blockquote>
<div><dl class="docutils">
<dt>Nombre</dt>
<dd><p class="first last">Nombre del <strong>friend</strong>, como en <strong>Terminales</strong>. Esto también se usará en mensajes SIP (enviados <strong>Desde Usuario</strong>).</p>
</dd>
<dt>Descripción</dt>
<dd><p class="first last">Opcional. Información adicional para este <strong>friend</strong>.</p>
</dd>
<dt>Prioridad</dt>
<dd><p class="first last">Se usa para resolver conflictos al enrutar llamadas a través de <strong>friends</strong>. Si un destino de llamada <strong>coincide</strong> con más de una expresión regular de friend, la llamada se enrutarán a través del friend con <strong>menor valor de prioridad</strong>.</p>
</dd>
<dt>Contraseña</dt>
<dd><p class="first last">Cuando el <em>friend</em> envía solicitudes, IvozProvider lo autentificará usando esta contraseña. <strong>Usar contraseña ES OBLIGATORIO en modo &#8220;Registrar&#8221;</strong>. En modo &#8220;Directo&#8221;, dejarlo en blanco desactiva la autenticación SIP y habilita la verificación de la fuente IP.</p>
</dd>
<dt>Modo de conectividad</dt>
<dd><p class="first last">Elija entre &#8220;Directo&#8221; y &#8220;Registrar&#8221; para un friend remoto.</p>
</dd>
<dt>ACL de llamada</dt>
<dd><p class="first last">Similar a <a class="reference internal" href="../../users.xhtml#users"><span class="std std-ref">usuarios internos</span></a>, los friends pueden realizar llamadas internas del cliente sin restricciones (incluyendo Extensiones u otros Friends). Al llamar a números externos, se verificará esta ACL si está configurada.</p>
</dd>
<dt>DDI de salida de respaldo</dt>
<dd><p class="first last">Las llamadas externas de este <em>friend</em> se presentarán con este DDI, <strong>a menos que la fuente presentada por el friend sea un DDI que exista en la sección de DDIs</strong>.</p>
</dd>
<dt>Código de país y área</dt>
<dd><p class="first last">Se usa para la transformación de números desde y hacia este friend.</p>
</dd>
<dt>Codecs permitidos</dt>
<dd><p class="first last">Como un terminal, los <em>friends</em> hablarán el codec seleccionado.</p>
</dd>
<dt>Desde usuario</dt>
<dd><p class="first last">La solicitud de IvozProvider a este friend incluirá este usuario en el encabezado From.</p>
</dd>
<dt>Desde dominio</dt>
<dd><p class="first last">La solicitud de IvozProvider a este friend incluirá este dominio en el encabezado From.</p>
</dd>
<dt>DDI entrante</dt>
<dd><p class="first last">Si se establece en &#8216;Sí&#8217;, establezca el destino (R-URI y To) al DDI/número llamado cuando se llame a este punto final. Si se establece en &#8216;No&#8217;, se usará el nombre de usuario utilizado en el encabezado Contact de registro, como se especifica en el RFC SIP (se usará el nombre del friend para puntos finales con conectividad directa). Por defecto es &#8216;Sí&#8217;.</p>
</dd>
<dt>Habilitar paso a través de T.38</dt>
<dd><p class="first last">Si se establece en &#8216;sí&#8217;, este punto final SIP debe ser un <strong>emisor/receptor de fax compatible con T.38</strong>. IvozProvider actuará como una puerta de enlace T.38, conectando llamadas de fax de un operador compatible con T.38 y un dispositivo compatible con T.38.</p>
</dd>
<dt>Aplicar siempre transformaciones</dt>
<dd><p class="first last">Tanto los números listados en la sección de Extensiones como los números que coincidan con cualquier expresión regular de friend se considerarán internos y no atravesarán las reglas de transformación numérica. Habilite esta configuración para forzar las reglas de Transformación Numérica incluso en estos números.</p>
</dd>
<dt>Encriptación RTP</dt>
<dd><p class="first last">Si se establece en &#8216;sí&#8217;, la llamada no se establecerá a menos que sea posible encriptar su audio. Si se establece en &#8216;no&#8217;, el audio no se encriptará.</p>
</dd>
<dt>Contacto múltiple</dt>
<dd><p class="first last">Las mismas credenciales SIP se pueden configurar en múltiples dispositivos SIP. En ese caso, todos los dispositivos suenan simultáneamente al recibir una llamada. Configurar este interruptor en &#8216;No&#8217; limita este comportamiento para que solo suene el último dispositivo SIP registrado.</p>
</dd>
</dl>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Las llamadas a <em>friends</em> se consideran internas. Eso significa que no se verificarán las ACLs al llamar a un friend, sin importar si el origen de la llamada es un usuario u otro friend.</p>
</div>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Se puede contactar al friend debido a llamadas a varias extensiones/DDIs. La configuración de <em>DDI entrante</em> permite al punto final SIP remoto saber qué número causó cada llamada, estableciendo ese número como destino (encabezados R-URI y To). De esta manera, el friend puede manejar las llamadas de manera diferente.</p>
</div>
</div>
<div class="section" id="asterisk-as-a-remote-friend">
<h2>Asterisk como un friend remoto</h2>
<p>En el otro extremo de un friend puede haber cualquier tipo de entidad SIP. Esta sección toma como ejemplo un sistema PBX Asterisk que usa el controlador de canal SIP que desea conectarse a IvozProvider.</p>
<p class="rubric">registrar</p>
<p>Si el sistema no se puede acceder directamente, Asterisk tendrá que registrarse en la plataforma (como lo haría un terminal).</p>
<p>La configuración será algo así:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>register =&gt; friendName:friendPassword@ivozprovider-client.sip-domain.com
</pre></div>
</div>
<p class="rubric">par</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[friendName]
type=peer
host=ivozprovider-client.sip-domain.com
context=XXXXXX
disallow=all
allow=alaw
defaultuser=friendName
secret=friendPassword
fromuser=friendName
fromdomain=ivozprovider-brand.sip-domain.com
insecure=port,invite
sendrpid=pai
directmedia=no
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Advertencia</p>
<p class="last"><em>Los friends</em>, como los terminales, NO DEBEN desafiar a IvozProvider. Por eso se usa la configuración <em>insegura</em> aquí.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Dado que el nombre de usuario From se usa para identificar al friend, se debe usar P-Asserted-Identity (o P-Preferred-Identity o Remote-Party-Id) para especificar el número del llamante. La prevalencia entre estos encabezados de origen es: PAI &gt; PPI &gt; RPID.</p>
</div>
</div>
<div class="section" id="summary-of-remote-friends">
<h2>Resumen de friends remotos</h2>
<p>El punto clave es entender que un <em>friend remoto</em> tiene una relación directa con el trío extensión-usuario-terminal:</p>
<ul class="simple">
<li><p class="first">Puede realizar llamadas a todas las extensiones internas y otros friends.</p>
</li>
<li><p class="first">Puede realizar llamadas externas que su ACL permita</p>
</li>
<li><p class="first">Muestra su DDI de salida configurado al llamar a entidades externas</p>
</li>
<li><p class="first">Nunca desafíe las solicitudes de IvozProvider (no solicite autenticación en solicitudes recibidas)</p>
</li>
<li><p class="first">Responde a los desafíos de autenticación de IvozProvider (Todas las solicitudes de ellos a IvozProvider deben ser autenticadas por razones de seguridad)</p>
</li>
<li><p class="first">Solo se conecta con <em>Proxy SIP de Usuarios</em>, como terminales. De hecho, el tráfico SIP de friends es idéntico al tráfico de cualquier otro terminal de usuario en formato.</p>
</li>
</ul>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2016-2019, Irontec.
      Creado con <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.9.
    </div>
  </body>
</html>